var Qu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ri(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ec(e){if(e.__esModule)return e;var r=e.default;if(typeof r=="function"){var s=function n(){return this instanceof n?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};s.prototype=r.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(s,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),s}const ti=function(){return typeof process<"u"&&process.release?.name==="node"?"NODE":typeof window<"u"?"WEB":typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?"WORKER":"NODE"}();if(ti==="NODE"){let e=function(s){return new Promise(function(n,o){s.onload=s.onerror=function(i){s.onload=s.onerror=null,i.type==="load"?n(s.result):o(new Error("Failed to read the blob/file"))}})},r=function(){const s=new Uint8Array([1,2,3,4]),o=new File([s],"test").stream();try{return o.getReader({mode:"byob"}),!0}catch{return!1}};if(typeof File>"u"){class s extends Blob{constructor(o,i,t){super(o);let p;t?.lastModified&&(p=new Date),(!p||isNaN(p.getFullYear()))&&(p=new Date),this.lastModifiedDate=p,this.lastModified=p.getMilliseconds(),this.name=i||""}}global.File=s}typeof Blob.prototype.arrayBuffer>"u"&&(Blob.prototype.arrayBuffer=function(){const n=new FileReader;return n.readAsArrayBuffer(this),e(n)}),typeof Blob.prototype.text>"u"&&(Blob.prototype.text=function(){const n=new FileReader;return n.readAsText(this),e(n)}),(typeof Blob.prototype.stream>"u"||!r())&&(Blob.prototype.stream=function(){let s=0;const n=this;return new ReadableStream({type:"bytes",autoAllocateChunkSize:512*1024,async pull(o){const i=o.byobRequest.view,p=await n.slice(s,s+i.byteLength).arrayBuffer(),m=new Uint8Array(p);new Uint8Array(i.buffer).set(m);const c=m.byteLength;o.byobRequest.respond(c),s+=c,s>=n.size&&o.close()}})})}if(ti==="NODE"&&typeof CustomEvent>"u"){class e extends Event{constructor(s,n={}){super(s,n),this.detail=n.detail}initCustomEvent(){}}globalThis.CustomEvent=e}ti==="NODE"&&typeof URL.canParse!="function"&&(globalThis.URL.canParse=function(e){try{return!!new URL(e)}catch{return!1}});const Xa="playground-log",wi=(e,...r)=>{Oe.dispatchEvent(new CustomEvent(Xa,{detail:{log:e,args:r}}))},Ja=(e,...r)=>{switch(typeof e.message=="string"?Reflect.set(e,"message",Us(e.message)):e.message.message&&typeof e.message.message=="string"&&Reflect.set(e.message,"message",Us(e.message.message)),e.severity){case"Debug":console.debug(e.message,...r);break;case"Info":console.info(e.message,...r);break;case"Warn":console.warn(e.message,...r);break;case"Error":console.error(e.message,...r);break;case"Fatal":console.error(e.message,...r);break;default:console.log(e.message,...r)}},Qa=e=>e instanceof Error?[e.message,e.stack].join(`
`):JSON.stringify(e,null,2),vn=[],bi=e=>{vn.push(e)},Ws=e=>{if(e.raw===!0)bi(e.message);else{const r=io(typeof e.message=="object"?Qa(e.message):e.message,e.severity??"Info",e.prefix??"JavaScript");bi(r)}};let gs=0;const vi="/wordpress/wp-content/debug.log",eo=async e=>await e.fileExists(vi)?await e.readFileAsText(vi):"",ro=(e,r)=>{r.addEventListener("request.end",async()=>{const s=await eo(r);if(s.length>gs){const n=s.substring(gs);e.logMessage({message:n,raw:!0}),gs=s.length}}),r.addEventListener("request.error",s=>{s=s,s.error&&(e.logMessage({message:`${s.error.message} ${s.error.stack}`,severity:"Fatal",prefix:s.source==="request"?"PHP":"WASM Crash"}),e.dispatchEvent(new CustomEvent(e.fatalErrorEvent,{detail:{logs:e.getLogs(),source:s.source}})))})};class to extends EventTarget{constructor(r=[]){super(),this.handlers=r,this.fatalErrorEvent="playground-fatal-error"}getLogs(){return this.handlers.includes(Ws)?[...vn]:(this.error(`Logs aren't stored because the logToMemory handler isn't registered.
				If you're using a custom logger instance, make sure to register logToMemory handler.
			`),[])}logMessage(r,...s){for(const n of this.handlers)n(r,...s)}log(r,...s){this.logMessage({message:r,severity:void 0,prefix:"JavaScript",raw:!1},...s)}debug(r,...s){this.logMessage({message:r,severity:"Debug",prefix:"JavaScript",raw:!1},...s)}info(r,...s){this.logMessage({message:r,severity:"Info",prefix:"JavaScript",raw:!1},...s)}warn(r,...s){this.logMessage({message:r,severity:"Warn",prefix:"JavaScript",raw:!1},...s)}error(r,...s){this.logMessage({message:r,severity:"Error",prefix:"JavaScript",raw:!1},...s)}}const so=()=>{try{if(process.env.NODE_ENV==="test")return[Ws,wi]}catch{}return[Ws,Ja,wi]},Oe=new to(so()),Us=e=>e.replace(/\t/g,""),io=(e,r,s)=>{const n=new Date,o=new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"short",day:"2-digit",timeZone:"UTC"}).format(n).replace(/ /g,"-"),i=new Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,timeZone:"UTC",timeZoneName:"short"}).format(n),t=o+" "+i;return e=Us(e),`[${t}] ${s} ${r}: ${e}`},rc=(e,r)=>{e.addEventListener(e.fatalErrorEvent,r)},Pn=["db.php","plugins/akismet","plugins/hello.php","plugins/wordpress-importer","mu-plugins/sqlite-database-integration","mu-plugins/playground-includes","mu-plugins/0-playground.php","mu-plugins/0-sqlite.php","themes/twentytwenty","themes/twentytwentyone","themes/twentytwentytwo","themes/twentytwentythree","themes/twentytwentyfour","themes/twentytwentyfive","themes/twentytwentysix"],En=async(e,{pluginPath:r,pluginName:s},n)=>{n?.tracker.setCaption(`Activating ${s||r}`);const o=await e.documentRoot,i=await e.run({code:`<?php
			define( 'WP_ADMIN', true );
			require_once( getenv('DOCROOT') . "/wp-load.php" );
			require_once( getenv('DOCROOT') . "/wp-admin/includes/plugin.php" );

			// Set current user to admin
			wp_set_current_user( get_users(array('role' => 'Administrator') )[0]->ID );

			$plugin_path = getenv('PLUGIN_PATH');
			$response = false;
			if ( ! is_dir( $plugin_path)) {
				$response = activate_plugin($plugin_path);
			}

			// Activate plugin by name if activation by path wasn't successful
			if ( null !== $response ) {
				foreach ( ( glob( $plugin_path . '/*.php' ) ?: array() ) as $file ) {
					$info = get_plugin_data( $file, false, false );
					if ( ! empty( $info['Name'] ) ) {
						$response = activate_plugin( $file );
						break;
					}
				}
			}

			if ( is_wp_error($response) ) {
				die( $response->get_error_message() );
			} else if ( false === $response ) {
				die( "The activatePlugin step wasn't able to find the plugin $plugin_path." );
			}
		`,env:{PLUGIN_PATH:r,DOCROOT:o}});i.text&&Oe.warn(`Plugin ${r} activation printed the following bytes: ${i.text}`);const t=await e.run({code:`<?php
			ob_start();
			require_once( getenv( 'DOCROOT' ) . "/wp-load.php" );

			/**
			 * Extracts the relative plugin path from either an absolute or relative plugin path.
			 *
			 * Absolute paths starting with plugin directory (e.g., '/wordpress/wp-content/plugins/test-plugin/index.php')
			 * should be converted to relative paths (e.g., 'test-plugin/index.php')
			 *
			 * Directories should finish with a trailing slash to ensure we match the full plugin directory name.
			 *
			 * Examples:
			 * - '/wordpress/wp-content/plugins/test-plugin/index.php' → 'test-plugin/index.php'
			 * - '/wordpress/wp-content/plugins/test-plugin/' → 'test-plugin/'
			 * - '/wordpress/wp-content/plugins/test-plugin' → 'test-plugin/'
			 * - 'test-plugin/index.php' → 'test-plugin/index.php'
			 * - 'test-plugin/' → 'test-plugin/'
			 * - 'test-plugin' → 'test-plugin/'
			 */
			$plugin_directory = WP_PLUGIN_DIR . '/';
			$relative_plugin_path = getenv( 'PLUGIN_PATH' );
			if (strpos($relative_plugin_path, $plugin_directory) === 0) {
				$relative_plugin_path = substr($relative_plugin_path, strlen($plugin_directory));
			}

			if ( is_dir( $plugin_directory . $relative_plugin_path ) ) {
				$relative_plugin_path = rtrim( $relative_plugin_path, '/' ) . '/';
			}

			$active_plugins = get_option( 'active_plugins' );
			foreach ( $active_plugins as $plugin ) {
				if ( substr( $plugin, 0, strlen( $relative_plugin_path ) ) === $relative_plugin_path ) {
					ob_end_clean();
					die( 'true' );
				}
			}
			die( ob_get_flush() ?: 'false' );
		`,env:{DOCROOT:o,PLUGIN_PATH:r}});if(t.text!=="true")throw t.text!=="false"&&Oe.debug(t.text),new Error(`Plugin ${r} could not be activated – WordPress exited with no error. Sometimes, when $_SERVER or site options are not configured correctly, WordPress exits early with a 301 redirect. Inspect the "debug" logs in the console for more details.`)},Sn=async(e,{themeFolderName:r},s)=>{s?.tracker.setCaption(`Activating ${r}`);const n=await e.documentRoot,o=`${n}/wp-content/themes/${r}`;if(!await e.fileExists(o))throw new Error(`
			Couldn't activate theme ${r}.
			Theme not found at the provided theme path: ${o}.
			Check the theme path to ensure it's correct.
			If the theme is not installed, you can install it using the installTheme step.
			More info can be found in the Blueprint documentation: https://wordpress.github.io/wordpress-playground/blueprints/steps/#ActivateThemeStep
		`);const i=await e.run({code:`<?php
			define( 'WP_ADMIN', true );
			require_once( getenv('docroot') . "/wp-load.php" );

			// Set current user to admin
			wp_set_current_user( get_users(array('role' => 'Administrator') )[0]->ID );

			switch_theme( getenv('themeFolderName') );

			if( wp_get_theme()->get_stylesheet() !== getenv('themeFolderName') ) {
				throw new Exception( 'Theme ' . getenv('themeFolderName') . ' could not be activated.' );				
			}
			die('Theme activated successfully');
		`,env:{docroot:n,themeFolderName:r}});if(i.text!=="Theme activated successfully")throw Oe.debug(i),new Error(`Theme ${r} could not be activated – WordPress exited with no error. Sometimes, when $_SERVER or site options are not configured correctly, WordPress exits early with a 301 redirect. Inspect the "debug" logs in the console for more details`)},no=async(e,{code:r})=>await e.run({code:r}),ao=async(e,{options:r})=>await e.run(r),kn=async(e,{path:r})=>{await e.unlink(r)},An=Symbol("SleepFinished");function oo(e){return new Promise(r=>{setTimeout(()=>r(An),e)})}class po extends Error{constructor(){super("Acquiring lock timed out")}}class Tn{constructor({concurrency:r,timeout:s}){this._running=0,this.concurrency=r,this.timeout=s,this.queue=[]}get remaining(){return this.concurrency-this.running}get running(){return this._running}async acquire(){for(;;)if(this._running>=this.concurrency){const r=new Promise(s=>{this.queue.push(s)});this.timeout!==void 0?await Promise.race([r,oo(this.timeout)]).then(s=>{if(s===An)throw new po}):await r}else{this._running++;let r=!1;return()=>{r||(r=!0,this._running--,this.queue.length>0&&this.queue.shift()())}}}async run(r){const s=await this.acquire();try{return await r()}finally{s()}}}function de(...e){function r(i){return i.substring(i.length-1)==="/"}let s=e.join("/");const n=s[0]==="/",o=r(s);return s=is(s),!s&&!n&&(s="."),s&&o&&!r(s)&&(s+="/"),s}function _t(e){if(e==="/")return"/";e=is(e);const r=e.lastIndexOf("/");return r===-1?"":r===0?"/":e.substr(0,r)}function tc(e){if(e==="/")return"/";e=is(e);const r=e.lastIndexOf("/");return r===-1?e:e.substr(r+1)}function is(e){const r=e[0]==="/";return e=fo(e.split("/").filter(s=>!!s),!r).join("/"),(r?"/":"")+e.replace(/\/$/,"")}function fo(e,r){let s=0;for(let n=e.length-1;n>=0;n--){const o=e[n];o==="."?e.splice(n,1):o===".."?(e.splice(n,1),s++):s&&(e.splice(n,1),s--)}if(r)for(;s;s--)e.unshift("..");return e}function Cn(e=36,r="!@#$%^&*()_+=-[]/.,<>?"){const s="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"+r;let n="";for(let o=e;o>0;--o)n+=s[Math.floor(Math.random()*s.length)];return n}function lo(){return Cn(36,"-_")}function Re(e){return`json_decode(base64_decode('${uo(JSON.stringify(e))}'), true)`}function ns(e){const r={};for(const s in e)r[s]=Re(e[s]);return r}function uo(e){return co(new TextEncoder().encode(e))}function co(e){const r=String.fromCodePoint(...e);return btoa(r)}const ho=async(e,{sql:r},s)=>{s?.tracker.setCaption("Executing SQL Queries");const n=`/tmp/${lo()}.sql`;await e.writeFile(n,new Uint8Array(await r.arrayBuffer()));const o=await e.documentRoot,i=ns({docroot:o,sqlFilename:n}),t=await e.run({code:`<?php
		require_once ${i.docroot} . '/wp-load.php';

		$handle = fopen(${i.sqlFilename}, 'r');

		global $wpdb;

		while ($line = fgets($handle)) {
			if(trim($line, " 
;") === '') {
				continue;
			}

			$wpdb->query($line);
		}
	`});return await kn(e,{path:n}),t},mo=async(e,{request:r})=>{Oe.warn('Deprecated: The Blueprint step "request" is deprecated and will be removed in a future release.');const s=await e.request(r);if(s.httpStatusCode>399||s.httpStatusCode<200)throw Oe.warn("WordPress response was",{response:s}),new Error(`Request failed with status ${s.httpStatusCode}`);return s},yo=`<?php

/**
 * Rewrites the wp-config.php file to ensure specific constants are defined
 * with specific values.
 * 
 * Example:
 * 
 * \`\`\`php
 * <?php
 * define('WP_DEBUG', true);
 * // The third define() argument is also supported:
 * define('SAVEQUERIES', false, true);
 * 
 * // Expression
 * define(true ? 'WP_DEBUG_LOG' : 'WP_DEBUG_LOG', 123);
 * 
 * // Guarded expressions shouldn't be wrapped twice
 * if(!defined(1 ? 'A' : 'B')) {
 *     define(1 ? 'A' : 'B', 0);
 * }
 * 
 * // More advanced expression
 * define((function() use($x) {
 *     return [$x, 'a'];
 * })(), 123);
 * \`\`\`
 * 
 * Rewritten with
 * 
 *     $constants = [
 *        'WP_DEBUG' => false,
 *        'WP_DEBUG_LOG' => true,
 *        'SAVEQUERIES' => true,
 *        'NEW_CONSTANT' => "new constant",
 *     ];
 * 
 * \`\`\`php
 * <?php
 * define('WP_DEBUG_LOG',true);
 * define('NEW_CONSTANT','new constant');
 * ?><?php
 * define('WP_DEBUG',false);
 * // The third define() argument is also supported:
 * define('SAVEQUERIES',true, true);
 * 
 * // Expression
 * if(!defined($const ? 'WP_DEBUG_LOG' : 'WP_DEBUG_LOG')) {
 *      define($const ? 'WP_DEBUG_LOG' : 'WP_DEBUG_LOG', 123);
 * }
 * 
 * // Guarded expressions shouldn't be wrapped twice
 * if(!defined(1 ? 'A' : 'B')) {
 *     define(1 ? 'A' : 'B', 0);
 * }
 * 
 * // More advanced expression
 * if(!defined((function() use($x) {
 *    return [$x, 'a'];
 * })())) {
 *     define((function() use($x) {
 *         return [$x, 'a'];
 *     })(), 123);
 * }
 * \`\`\`
 * 
 * @param mixed $content
 * @return string
 */
function rewrite_wp_config_to_define_constants($content, $constants = [])
{
    $tokens = array_reverse(token_get_all($content));
    $output = [];
    $defined_expressions = [];

    // Look through all the tokens and find the define calls
    do {
        $buffer = [];
        $name_buffer = [];
        $value_buffer = [];
        $third_arg_buffer = [];

        // Capture everything until the define call into output.
        // Capturing the define call into a buffer.
        // Example:
        //     <?php echo 'a'; define  (
        //     ^^^^^^^^^^^^^^^^^^^^^^
        //           output   |buffer
        while ($token = array_pop($tokens)) {
            if (is_array($token) && $token[0] === T_STRING && (strtolower($token[1]) === 'define' || strtolower($token[1]) === 'defined')) {
                $buffer[] = $token;
                break;
            }
            $output[] = $token;
        }

        // Maybe we didn't find a define call and reached the end of the file?
        if (!count($tokens)) {
            break;
        }

        // Keep track of the "defined" expressions that are already accounted for
        if($token[1] === 'defined') {
            $output[] = $token;
            $defined_expression = [];
            $open_parenthesis = 0;
            // Capture everything up to the opening parenthesis, including the parenthesis
            // e.g. defined  (
            //           ^^^^
            while ($token = array_pop($tokens)) {
                $output[] = $token;
                if ($token === "(") {
                    ++$open_parenthesis;
                    break;
                }
            }

            // Capture everything up to the closing parenthesis, including the parenthesis
            // e.g. defined  (
            //           ^^^^
            while ($token = array_pop($tokens)) {
                $output[] = $token;
                if ($token === ")") {
                    --$open_parenthesis;
                }
                if ($open_parenthesis === 0) {
                    break;
                }
                $defined_expression[] = $token;
            }

            $defined_expressions[] = stringify_tokens(skip_whitespace($defined_expression));
            continue;
        }

        // Capture everything up to the opening parenthesis, including the parenthesis
        // e.g. define  (
        //           ^^^^
        while ($token = array_pop($tokens)) {
            $buffer[] = $token;
            if ($token === "(") {
                break;
            }
        }

        // Capture the first argument – it's the first expression after the opening
        // parenthesis and before the comma:
        // Examples:
        //     define("WP_DEBUG", true);
        //            ^^^^^^^^^^^
        //
        //     define(count([1,2]) > 2 ? 'WP_DEBUG' : 'FOO', true);
        //            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        $open_parenthesis = 0;
        while ($token = array_pop($tokens)) {
            $buffer[] = $token;
            if ($token === "(" || $token === "[" || $token === "{") {
                ++$open_parenthesis;
            } elseif ($token === ")" || $token === "]" || $token === "}") {
                --$open_parenthesis;
            } elseif ($token === "," && $open_parenthesis === 0) {
                break;
            }

            // Don't capture the comma as a part of the constant name
            $name_buffer[] = $token;
        }

        // Capture everything until the closing parenthesis
        //     define("WP_DEBUG", true);
        //                       ^^^^^^
        $open_parenthesis = 0;
        $is_second_argument = true;
        while ($token = array_pop($tokens)) {
            $buffer[] = $token;
            if ($token === ")" && $open_parenthesis === 0) {
                // Final parenthesis of the define call.
                break;
            } else if ($token === "(" || $token === "[" || $token === "{") {
                ++$open_parenthesis;
            } elseif ($token === ")" || $token === "]" || $token === "}") {
                --$open_parenthesis;
            } elseif ($token === "," && $open_parenthesis === 0) {
                // This define call has more than 2 arguments! The third one is the
                // boolean value indicating $is_case_insensitive. Let's continue capturing
                // to $third_arg_buffer.
                $is_second_argument = false;
            }
            if ($is_second_argument) {
                $value_buffer[] = $token;
            } else {
                $third_arg_buffer[] = $token;
            }
        }

        // Capture until the semicolon
        //     define("WP_DEBUG", true)  ;
        //                             ^^^
        while ($token = array_pop($tokens)) {
            $buffer[] = $token;
            if ($token === ";") {
                break;
            }
        }

        // Decide whether $name_buffer is a constant name or an expression
        $name_token = null;
        $name_token_index = $token;
        $name_is_literal = true;
        foreach ($name_buffer as $k => $token) {
            if (is_array($token)) {
                if ($token[0] === T_WHITESPACE || $token[0] === T_COMMENT || $token[0] === T_DOC_COMMENT) {
                    continue;
                } else if ($token[0] === T_STRING || $token[0] === T_CONSTANT_ENCAPSED_STRING) {
                    $name_token = $token;
                    $name_token_index = $k;
                } else {
                    $name_is_literal = false;
                    break;
                }
            } else if ($token !== "(" && $token !== ")") {
                $name_is_literal = false;
                break;
            }
        }

        // We can't handle expressions as constant names. Let's wrap that define
        // call in an if(!defined()) statement, just in case it collides with
        // a constant name.
        if (!$name_is_literal) {
            // Ensure the defined expression is not already accounted for
            foreach ($defined_expressions as $defined_expression) {
                if ($defined_expression === stringify_tokens(skip_whitespace($name_buffer))) {
                    $output = array_merge($output, $buffer);
                    continue 2;
                }
            }
            $output = array_merge(
                $output,
                ["if(!defined("],
                $name_buffer,
                [")) {\\n     "],
                ['define('],
                $name_buffer,
                [','],
                $value_buffer,
                $third_arg_buffer,
                [");"],
                ["\\n}\\n"]
            );
            continue;
        }

        // Yay, we have a literal constant name in the buffer now. Let's
        // get its value:
        $name = eval('return ' . $name_token[1] . ';');

        // If the constant name is not in the list of constants we're looking,
        // we can ignore it.
        if (!array_key_exists($name, $constants)) {
            $output = array_merge($output, $buffer);
            continue;
        }

        // We now have a define() call that defines a constant we're looking for.
        // Let's rewrite its value to the one 
        $output = array_merge(
            $output,
            ['define('],
            $name_buffer,
            [','],
            [var_export($constants[$name], true)],
            $third_arg_buffer,
            [");"]
        );

        // Remove the constant from the list so we can process any remaining
        // constants later.
        unset($constants[$name]);
    } while (count($tokens));

    // Add any constants that weren't found in the file
    if (count($constants)) {
        $prepend = [
            "<?php \\n"
        ];
        foreach ($constants as $name => $value) {
            $prepend = array_merge(
                $prepend,
                [
                    "define(",
                    var_export($name, true),
                    ',',
                    var_export($value, true),
                    ");\\n"
                ]
            );
        }
        $prepend[] = "?>";
        $output = array_merge(
            $prepend,
            $output
        );
    }

    // Translate the output tokens back into a string
    return stringify_tokens($output);
}

function stringify_tokens($tokens) {
    $output = '';
    foreach ($tokens as $token) {
        if (is_array($token)) {
            $output .= $token[1];
        } else {
            $output .= $token;
        }
    }
    return $output;
}

function skip_whitespace($tokens) {
    $output = [];
    foreach ($tokens as $token) {
        if (is_array($token) && ($token[0] === T_WHITESPACE || $token[0] === T_COMMENT || $token[0] === T_DOC_COMMENT)) {
            continue;
        }
        $output[] = $token;
    }
    return $output;
}
`,si=async(e,{consts:r,method:s="define-before-run"})=>{switch(s){case"define-before-run":await _o(e,r);break;case"rewrite-wp-config":{const n=await e.documentRoot,o=de(n,"/wp-config.php"),i=await e.readFileAsText(o),t=await go(e,i,r);await e.writeFile(o,t);break}default:throw new Error(`Invalid method: ${s}`)}};async function _o(e,r){for(const s in r)await e.defineConstant(s,r[s])}async function go(e,r,s){await e.writeFile("/tmp/code.php",r);const n=ns({consts:s});return await e.run({code:`${yo}
	$wp_config_path = '/tmp/code.php';
	$wp_config = file_get_contents($wp_config_path);
	$new_wp_config = rewrite_wp_config_to_define_constants($wp_config, ${n.consts});
	file_put_contents($wp_config_path, $new_wp_config);
	`}),await e.readFileAsText("/tmp/code.php")}const On=async(e,{options:r})=>{const s=await e.documentRoot;await e.run({code:`<?php
		include ${Re(s)} . '/wp-load.php';
		$site_options = ${Re(r)};
		foreach($site_options as $name => $value) {
			update_option($name, $value);
		}
		echo "Success";
		`})},wo=async(e,{meta:r,userId:s})=>{const n=await e.documentRoot;await e.run({code:`<?php
		include ${Re(n)} . '/wp-load.php';
		$meta = ${Re(r)};
		foreach($meta as $name => $value) {
			update_user_meta(${Re(s)}, $name, $value);
		}
		`})},ii="/tmp/wp-cli.phar",bo={resource:"url",url:"https://playground.wordpress.net/wp-cli.phar"},xn=async(e,r=ii)=>{if(!await e.fileExists(r))throw new Error(`wp-cli.phar not found at ${r}.
			You can enable wp-cli support by adding "wp-cli" to the list of extra libraries in your blueprint as follows:
			{
				"extraLibraries": [ "wp-cli" ]
			}
			Read more about it in the documentation.
			https://wordpress.github.io/wordpress-playground/blueprints/data-format#extra-libraries`)},Ln=async(e,{command:r,wpCliPath:s=ii})=>{await xn(e,s);let n;if(typeof r=="string"?(r=r.trim(),n=vo(r)):n=r,n.shift()!=="wp")throw new Error('The first argument must be "wp".');const i=await e.documentRoot;await e.writeFile("/tmp/stdout",""),await e.writeFile("/tmp/stderr",""),await e.writeFile(de(i,"run-cli.php"),`<?php
		// Set up the environment to emulate a shell script
		// call.

		// Set SHELL_PIPE to 0 to ensure WP-CLI formats
		// the output as ASCII tables.
		// @see https://github.com/wp-cli/wp-cli/issues/1102
		putenv( 'SHELL_PIPE=0' );

		// Set the argv global.
		$GLOBALS['argv'] = array_merge([
		  "/tmp/wp-cli.phar",
		  "--path=${i}"
		], ${Re(n)});

		// Provide stdin, stdout, stderr streams outside of
		// the CLI SAPI.
		define('STDIN', fopen('php://stdin', 'rb'));
		define('STDOUT', fopen('php://stdout', 'wb'));
		define('STDERR', fopen('php://stderr', 'wb'));

		require( ${Re(s)} );
		`);const t=await e.run({scriptPath:de(i,"run-cli.php")});if(t.errors)throw new Error(t.errors);return t};function vo(e){let n=0,o="";const i=[];let t="";for(let p=0;p<e.length;p++){const m=e[p];n===0?m==='"'||m==="'"?(n=1,o=m):m.match(/\s/)?(t&&i.push(t),t=""):t+=m:n===1&&(m==="\\"?(p++,t+=e[p]):m===o?(n=0,o=""):t+=m)}return t&&i.push(t),i}const Po=async(e,{wpCliPath:r})=>{await xn(e,r),await si(e,{consts:{WP_ALLOW_MULTISITE:1}});const s=new URL(await e.absoluteUrl);if(s.port!==""){let i=`The current host is ${s.host}, but WordPress multisites do not support custom ports.`;throw s.hostname==="localhost"&&(i+=" For development, you can set up a playground.test domain using the instructions at https://wordpress.github.io/wordpress-playground/contributing/code."),new Error(i)}const n=s.pathname.replace(/\/$/,"")+"/",o=`${s.protocol}//${s.hostname}${n}`;await On(e,{options:{siteurl:o,home:o}}),await Ln(e,{command:"wp core multisite-convert"})},Eo=async(e,{fromPath:r,toPath:s})=>{await e.writeFile(s,await e.readFileAsBuffer(r))},So=async(e,{fromPath:r,toPath:s})=>{await e.mv(r,s)},ko=async(e,{path:r})=>{await e.mkdir(r)},Ao=async(e,{path:r})=>{await e.rmdir(r)},as=async(e,{path:r,data:s})=>{s instanceof File&&(s=new Uint8Array(await s.arrayBuffer())),r.startsWith("/wordpress/wp-content/mu-plugins")&&!await e.fileExists("/wordpress/wp-content/mu-plugins")&&await e.mkdir("/wordpress/wp-content/mu-plugins"),await e.writeFile(r,s)},Yt={0:"No error occurred. System call completed successfully.",1:"Argument list too long.",2:"Permission denied.",3:"Address in use.",4:"Address not available.",5:"Address family not supported.",6:"Resource unavailable, or operation would block.",7:"Connection already in progress.",8:"Bad file descriptor.",9:"Bad message.",10:"Device or resource busy.",11:"Operation canceled.",12:"No child processes.",13:"Connection aborted.",14:"Connection refused.",15:"Connection reset.",16:"Resource deadlock would occur.",17:"Destination address required.",18:"Mathematics argument out of domain of function.",19:"Reserved.",20:"File exists.",21:"Bad address.",22:"File too large.",23:"Host is unreachable.",24:"Identifier removed.",25:"Illegal byte sequence.",26:"Operation in progress.",27:"Interrupted function.",28:"Invalid argument.",29:"I/O error.",30:"Socket is connected.",31:"There is a directory under that path.",32:"Too many levels of symbolic links.",33:"File descriptor value too large.",34:"Too many links.",35:"Message too large.",36:"Reserved.",37:"Filename too long.",38:"Network is down.",39:"Connection aborted by network.",40:"Network unreachable.",41:"Too many files open in system.",42:"No buffer space available.",43:"No such device.",44:"There is no such file or directory OR the parent directory does not exist.",45:"Executable file format error.",46:"No locks available.",47:"Reserved.",48:"Not enough space.",49:"No message of the desired type.",50:"Protocol not available.",51:"No space left on device.",52:"Function not supported.",53:"The socket is not connected.",54:"Not a directory or a symbolic link to a directory.",55:"Directory not empty.",56:"State not recoverable.",57:"Not a socket.",58:"Not supported, or operation not supported on socket.",59:"Inappropriate I/O control operation.",60:"No such device or address.",61:"Value too large to be stored in data type.",62:"Previous owner died.",63:"Operation not permitted.",64:"Broken pipe.",65:"Protocol error.",66:"Protocol not supported.",67:"Protocol wrong type for socket.",68:"Result too large.",69:"Read-only file system.",70:"Invalid seek.",71:"No such process.",72:"Reserved.",73:"Connection timed out.",74:"Text file busy.",75:"Cross-device link.",76:"Extension: Capabilities insufficient."};function To(e){const r=typeof e=="object"?e?.errno:null;if(r in Yt)return Yt[r]}function Ve(e=""){return function(s,n,o){const i=o.value;o.value=function(...t){try{return i.apply(this,t)}catch(p){const m=typeof p=="object"?p?.errno:null;if(m in Yt){const c=Yt[m],h=typeof t[1]=="string"?t[1]:null,b=h!==null?e.replaceAll("{path}",h):e;throw new Error(`${b}: ${c}`,{cause:p})}throw p}}}}var Co=Object.defineProperty,Oo=Object.getOwnPropertyDescriptor,Ye=(e,r,s,n)=>{for(var o=n>1?void 0:n?Oo(r,s):r,i=e.length-1,t;i>=0;i--)(t=e[i])&&(o=(n?t(r,s,o):t(o))||o);return n&&o&&Co(r,s,o),o};const Xe=class Ie{static readFileAsText(r,s){return new TextDecoder().decode(Ie.readFileAsBuffer(r,s))}static readFileAsBuffer(r,s){return r.readFile(s)}static writeFile(r,s,n){r.writeFile(s,n)}static unlink(r,s){r.unlink(s)}static mv(r,s,n){try{const o=r.lookupPath(s).node.mount,i=Ie.fileExists(r,n)?r.lookupPath(n).node.mount:r.lookupPath(_t(n)).node.mount;o.mountpoint!==i.mountpoint?(Ie.copyRecursive(r,s,n),Ie.isDir(r,s)?Ie.rmdir(r,s,{recursive:!0}):r.unlink(s)):r.rename(s,n)}catch(o){const i=To(o);throw i?new Error(`Could not move ${s} to ${n}: ${i}`,{cause:o}):o}}static rmdir(r,s,n={recursive:!0}){n?.recursive&&Ie.listFiles(r,s).forEach(o=>{const i=`${s}/${o}`;Ie.isDir(r,i)?Ie.rmdir(r,i,n):Ie.unlink(r,i)}),r.rmdir(s)}static listFiles(r,s,n={prependPath:!1}){if(!Ie.fileExists(r,s))return[];try{const o=r.readdir(s).filter(i=>i!=="."&&i!=="..");if(n.prependPath){const i=s.replace(/\/$/,"");return o.map(t=>`${i}/${t}`)}return o}catch(o){return Oe.error(o,{path:s}),[]}}static isDir(r,s){return Ie.fileExists(r,s)?r.isDir(r.lookupPath(s,{follow:!0}).node.mode):!1}static isFile(r,s){return Ie.fileExists(r,s)?r.isFile(r.lookupPath(s,{follow:!0}).node.mode):!1}static symlink(r,s,n){return r.symlink(s,n)}static isSymlink(r,s){return Ie.fileExists(r,s)?r.isLink(r.lookupPath(s).node.mode):!1}static readlink(r,s){return r.readlink(s)}static realpath(r,s){return r.lookupPath(s,{follow:!0}).path}static fileExists(r,s){try{return r.lookupPath(s),!0}catch{return!1}}static mkdir(r,s){r.mkdirTree(s)}static copyRecursive(r,s,n){const o=r.lookupPath(s).node;if(r.isDir(o.mode)){r.mkdirTree(n);const i=r.readdir(s).filter(t=>t!=="."&&t!=="..");for(const t of i)Ie.copyRecursive(r,de(s,t),de(n,t))}else r.writeFile(n,r.readFile(s))}};Ye([Ve('Could not read "{path}"')],Xe,"readFileAsText",1);Ye([Ve('Could not read "{path}"')],Xe,"readFileAsBuffer",1);Ye([Ve('Could not write to "{path}"')],Xe,"writeFile",1);Ye([Ve('Could not unlink "{path}"')],Xe,"unlink",1);Ye([Ve('Could not remove directory "{path}"')],Xe,"rmdir",1);Ye([Ve('Could not list files in "{path}"')],Xe,"listFiles",1);Ye([Ve('Could not stat "{path}"')],Xe,"isDir",1);Ye([Ve('Could not stat "{path}"')],Xe,"isFile",1);Ye([Ve('Could not stat "{path}"')],Xe,"realpath",1);Ye([Ve('Could not stat "{path}"')],Xe,"fileExists",1);Ye([Ve('Could not create directory "{path}"')],Xe,"mkdir",1);Ye([Ve('Could not copy files from "{path}"')],Xe,"copyRecursive",1);const xo={500:"Internal Server Error",502:"Bad Gateway",404:"Not Found",403:"Forbidden",401:"Unauthorized",400:"Bad Request",301:"Moved Permanently",302:"Found",307:"Temporary Redirect",308:"Permanent Redirect",204:"No Content",201:"Created",200:"OK"};class Xt{constructor(r,s,n,o="",i=0){this.httpStatusCode=r,this.headers=s,this.bytes=n,this.exitCode=i,this.errors=o}static forHttpCode(r,s=""){return new Xt(r,{},new TextEncoder().encode(s||xo[r]||""))}static fromRawData(r){return new Xt(r.httpStatusCode,r.headers,r.bytes,r.errors,r.exitCode)}toRawData(){return{headers:this.headers,bytes:this.bytes,errors:this.errors,exitCode:this.exitCode,httpStatusCode:this.httpStatusCode}}get json(){return JSON.parse(this.text)}get text(){return new TextDecoder().decode(this.bytes)}}(function(){return typeof process<"u"&&process.release?.name==="node"?"NODE":typeof window<"u"?"WEB":typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?"WORKER":"NODE"})();ReadableStream.prototype[Symbol.asyncIterator]||(ReadableStream.prototype[Symbol.asyncIterator]=async function*(){const e=this.getReader();try{for(;;){const{done:r,value:s}=await e.read();if(r)return;yield s}}finally{e.releaseLock()}},ReadableStream.prototype.iterate=ReadableStream.prototype[Symbol.asyncIterator]);const ni=["8.3","8.2","8.1","8.0","7.4","7.3","7.2","7.1","7.0"],Lo=ni[0],sc=ni;async function os(e,r,s,{rmRoot:n=!1}={}){n&&await e.isDir(r)&&await e.rmdir(r,{recursive:!0});for(const[o,i]of Object.entries(s)){const t=de(r,o);await e.fileExists(_t(t))||await e.mkdir(_t(t)),i instanceof Uint8Array||typeof i=="string"?await e.writeFile(t,i):await os(e,t,i)}}const $o=async(e,{writeToPath:r,filesTree:s})=>{await os(e,r,s.files)},$n=async(e,{siteUrl:r})=>{await si(e,{consts:{WP_HOME:r,WP_SITEURL:r}})},Io=async(e,{file:r,importer:s="default"},n)=>{s==="data-liberation"?await Ro(e,r,n):await Ho(e,r,n)};async function Ho(e,r,s){s?.tracker?.setCaption("Importing content"),await as(e,{path:"/tmp/import.wxr",data:r});const n=await e.documentRoot;await e.run({code:`<?php
	require ${Re(n)} . '/wp-load.php';
	require ${Re(n)} . '/wp-admin/includes/admin.php';

	kses_remove_filters();
	$admin_id = get_users(array('role' => 'Administrator') )[0]->ID;
	wp_set_current_user( $admin_id );
	$importer = new WXR_Importer( array(
		'fetch_attachments' => true,
		'default_author' => $admin_id
	) );
	$logger = new WP_Importer_Logger_CLI();
	$importer->set_logger( $logger );
	// Slashes from the imported content are lost if we don't call wp_slash here.
	add_action( 'wp_insert_post_data', function( $data ) {
		return wp_slash($data);
	});
  
  // Ensure that Site Editor templates are associated with the correct taxonomy.
  add_filter( 'wp_import_post_terms', function ( $terms, $post_id ) {
    foreach ( $terms as $post_term ) {
      if ( 'wp_theme' !== $term['taxonomy'] ) continue;
      $post_term = get_term_by('slug', $term['slug'], $term['taxonomy'] );
      if ( ! $post_term ) {
        $post_term = wp_insert_term(
          $term['slug'],
          $term['taxonomy']
        );
        $term_id = $post_term['term_id'];
      } else {
        $term_id = $post_term->term_id;
      }
      wp_set_object_terms( $post_id, $term_id, $term['taxonomy']) ;
    }
    return $terms;
  }, 10, 2 );
	$result = $importer->import( '/tmp/import.wxr' );
	`})}async function Ro(e,r,s){s?.tracker?.setCaption("Preparing content import"),await as(e,{path:"/tmp/import.wxr",data:r});const n=await e.documentRoot,o=await e.onMessage(i=>{const t=JSON.parse(i);t?.type==="import-wxr-progress"&&s?.tracker?.setCaption(t.progress)});try{await e.run({code:`<?php
	require ${Re(n)} . '/wp-load.php';
	require ${Re(n)} . '/wp-admin/includes/admin.php';

	// Defines the constants expected by the Box .phar stub when "cli" is used
	// as the SAPI name.
	// @TODO: Don't use the "cli" SAPI string and don't allow composer to run platform checks.
	if(!defined('STDERR')) define('STDERR', fopen('php://stderr', 'w'));
	if(!defined('STDIN'))  define('STDIN', fopen('php://stdin', 'r'));
	if(!defined('STDOUT')) define('STDOUT', fopen('php://stdout', 'w'));
	
	// Preloaded by the Blueprint compile() function
	require '/internal/shared/data-liberation-core.phar';

	$admin_id = get_users(array('role' => 'Administrator') )[0]->ID;
	wp_set_current_user( $admin_id );

	$new_site_url = get_site_url();
	$importer = WP_Stream_Importer::create_for_wxr_file(
		'/tmp/import.wxr',
		array(
			'new_site_url' => $new_site_url,
		)
	);
	$session = WP_Import_Session::create(
		array(
			'data_source' => 'wxr_file',
			'file_name' => '/tmp/import.wxr',
		)
	);
	while ( true ) {
		if ( true === $importer->next_step() ) {
			/**
			 * We're ignoring any importing errors.
			 * This script is a part of Blueprints and is expected to finish
			 * without stopping. We won't be gathering additional user input
			 * along the way. Instead, we'll just decide not to ignore the
			 * errors.
			 *
			 * @TODO: Consider extracting this code into a CLI script and
			 *        using it here instead of this custom script. Note it's
			 *        about a simple CLI script, not a WP-CLI command, as the
			 *        latter would require downloading 5MB of WP-CLI code.
			 */
			switch ( $importer->get_stage() ) {
				case WP_Stream_Importer::STAGE_INITIAL:
					$message = 'Preparing content import';
					break;
		
				case WP_Stream_Importer::STAGE_INDEX_ENTITIES:
					// Bump the total number of entities to import.
					$indexed = $session->count_all_total_entities();
					$message = 'Content import 1/4: Indexing records (' . $indexed . ' so far)';
					$session->create_frontloading_placeholders( $importer->get_indexed_assets_urls() );
					$session->bump_total_number_of_entities(
						$importer->get_indexed_entities_counts()
					);
					break;

				case WP_Stream_Importer::STAGE_TOPOLOGICAL_SORT:
					$message = 'Content import 2/4: Indexing data';
					break;

				case WP_Stream_Importer::STAGE_FRONTLOAD_ASSETS:
					$session->bump_frontloading_progress(
						$importer->get_frontloading_progress(),
						$importer->get_frontloading_events()
					);
					$nb_media = $session->count_awaiting_frontloading_placeholders();
					$message = 'Content import 3/4: Downloading media (' . $nb_media . ' remaining)';
					break;

				case WP_Stream_Importer::STAGE_IMPORT_ENTITIES:
					$session->bump_imported_entities_counts(
						$importer->get_imported_entities_counts()
					);
					$nb_remaining_entities = $session->count_remaining_entities();
					$message = 'Content import 4/4: Inserting data (' . $nb_remaining_entities . ' remaining)';
					break;

				default:
					$message = 'Importing content';
					break;
			}

			// Report progress to the UI
			post_message_to_js(json_encode([
				'type' => 'import-wxr-progress',
				'progress' => $message,
			]));
			continue;
		}
		if ( $importer->advance_to_next_stage() ) {
			continue;
		}
		// Import finished
		break;
	}
	`})}finally{await o()}}const In=async(e,{themeSlug:r=""},s)=>{s?.tracker?.setCaption("Importing theme starter content");const n=await e.documentRoot;await e.run({code:`<?php

		/**
		 * Ensure that the customizer loads as an admin user.
		 *
		 * For compatibility with themes, this MUST be run prior to theme inclusion, which is why this is a plugins_loaded filter instead
		 * of running _wp_customize_include() manually after load.
		 */
		function importThemeStarterContent_plugins_loaded() {
			// Set as the admin user, this ensures we can customize the site.
			wp_set_current_user(
				get_users( [ 'role' => 'Administrator' ] )[0]
			);

			// Force the site to be fresh, although it should already be.
			add_filter( 'pre_option_fresh_site', '__return_true' );

			/*
			 * Simulate this request as the customizer loading with the current theme in preview mode.
			 *
			 * See _wp_customize_include()
			 */
			$_REQUEST['wp_customize']    = 'on';
			$_REQUEST['customize_theme'] = ${Re(r)} ?: get_stylesheet();

			/*
			 * Claim this is a ajax request saving settings, to avoid the preview filters being applied.
			 */
			$_REQUEST['action'] = 'customize_save';
			add_filter( 'wp_doing_ajax', '__return_true' );

			$_GET = $_REQUEST;
		}
		playground_add_filter( 'plugins_loaded', 'importThemeStarterContent_plugins_loaded', 0 );

		require ${Re(n)} . '/wp-load.php';

		// Return early if there's no starter content.
		if ( ! get_theme_starter_content() ) {
			return;
		}

		// Import the Starter Content.
		$wp_customize->import_theme_starter_content();

		// Publish the changeset, which publishes the starter content.
		wp_publish_post( $wp_customize->changeset_post_id() );
		`})};function Do(e=fetch){const r={};return async function(n,o){r[n]||(r[n]=e(n,o).then(c=>({body:c.body,responseInit:{status:c.status,statusText:c.statusText,headers:c.headers}})));const{body:i,responseInit:t}=await r[n],[p,m]=i.tee();return r[n]={body:p,responseInit:t},new Response(m,t)}}const ws="/tmp/file.zip",Hn=async(e,r,s,n=!0)=>{if(r instanceof File){const i=r;r=ws,await e.writeFile(r,new Uint8Array(await i.arrayBuffer()))}const o=ns({zipPath:r,extractToPath:s,overwriteFiles:n});await e.run({code:`<?php
        function unzip($zipPath, $extractTo, $overwriteFiles = true)
        {
            if (!is_dir($extractTo)) {
                mkdir($extractTo, 0777, true);
            }
            $zip = new ZipArchive;
            $res = $zip->open($zipPath);
            if ($res === TRUE) {
				for ($i = 0; $i < $zip->numFiles; $i++) {
					$filename = $zip->getNameIndex($i);
					$fileinfo = pathinfo($filename);
					$extractFilePath = rtrim($extractTo, '/') . '/' . $filename;
					// Check if file exists and $overwriteFiles is false
					if (!file_exists($extractFilePath) || $overwriteFiles) {
						// Extract file
						$zip->extractTo($extractTo, $filename);
					}
				}
				$zip->close();
				chmod($extractTo, 0777);
            } else {
                throw new Exception("Could not unzip file: " . $zip->getStatusString());
            }
        }
        unzip(${o.zipPath}, ${o.extractToPath}, ${o.overwriteFiles});
        `}),await e.fileExists(ws)&&await e.unlink(ws)},ai=async(e,{zipFile:r,zipPath:s,extractToPath:n})=>{if(s)Oe.warn('The "zipPath" option of the unzip() Blueprint step is deprecated and will be removed. Use "zipFile" instead.');else if(!r)throw new Error("Either zipPath or zipFile must be provided");await Hn(e,r||s,n)},Bo=async(e,{wordPressFilesZip:r,pathInZip:s=""})=>{const n=await e.documentRoot;let o=de("/tmp","import");await e.mkdir(o),await ai(e,{zipFile:r,extractToPath:o}),o=de(o,s);const i=de(o,"wp-content"),t=de(n,"wp-content");for(const h of Pn){const b=de(i,h);await Pi(e,b);const g=de(t,h);await e.fileExists(g)&&(await e.mkdir(_t(b)),await e.mv(g,b))}const p=de(o,"wp-content","database");await e.fileExists(p)||await e.mv(de(n,"wp-content","database"),p);const m=await e.listFiles(o);for(const h of m)await Pi(e,de(n,h)),await e.mv(de(o,h),de(n,h));await e.rmdir(o),await $n(e,{siteUrl:await e.absoluteUrl});const c=Re(de(n,"wp-admin","upgrade.php"));await e.run({code:`<?php
            $_GET['step'] = 'upgrade_db';
            require ${c};
            `})};async function Pi(e,r){await e.fileExists(r)&&(await e.isDir(r)?await e.rmdir(r):await e.unlink(r))}async function Fo(e){const r=await e.request({url:"/wp-admin/export.php?download=true&content=all"});return new File([r.bytes],"export.xml")}async function Rn(e,{targetPath:r,zipFile:s,ifAlreadyInstalled:n="overwrite",targetFolderName:o=""}){const t=s.name.replace(/\.zip$/,""),p=de(await e.documentRoot,"wp-content"),m=de(p,Cn()),c=de(m,"assets",t);await e.fileExists(c)&&await e.rmdir(m,{recursive:!0}),await e.mkdir(m);try{await ai(e,{zipFile:s,extractToPath:c});let h=await e.listFiles(c,{prependPath:!0});h=h.filter(E=>!E.endsWith("/__MACOSX"));const b=h.length===1&&await e.isDir(h[0]);let g,w="";b?(w=h[0],g=h[0].split("/").pop()):(w=c,g=t),o&&o.length&&(g=o);const $=`${r}/${g}`;if(await e.fileExists($)){if(!await e.isDir($))throw new Error(`Cannot install asset ${g} to ${$} because a file with the same name already exists. Note it's a file, not a directory! Is this by mistake?`);if(n==="overwrite")await e.rmdir($,{recursive:!0});else{if(n==="skip")return{assetFolderPath:$,assetFolderName:g};throw new Error(`Cannot install asset ${g} to ${r} because it already exists and the ifAlreadyInstalled option was set to ${n}`)}}return await e.mv(w,$),{assetFolderPath:$,assetFolderName:g}}finally{await e.rmdir(m,{recursive:!0})}}function ps(e){const r=e.split(".").shift().replace(/-/g," ");return r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()}const jo=async(e,{pluginData:r,pluginZipFile:s,ifAlreadyInstalled:n,options:o={}},i)=>{s&&(r=s,Oe.warn('The "pluginZipFile" option is deprecated. Use "pluginData" instead.'));const t=de(await e.documentRoot,"wp-content","plugins"),p="targetFolderName"in o?o.targetFolderName:"";let m="",c="";if(r instanceof File)if(r.name.endsWith(".php")){const b=de(t,r.name);await as(e,{path:b,data:r}),m=t,c=r.name}else{const b=r.name.split("/").pop()||"plugin.zip";c=ps(b),i?.tracker.setCaption(`Installing the ${c} plugin`);const g=await Rn(e,{ifAlreadyInstalled:n,zipFile:r,targetPath:`${await e.documentRoot}/wp-content/plugins`,targetFolderName:p});m=g.assetFolderPath,c=g.assetFolderName}else if(r){c=r.name,i?.tracker.setCaption(`Installing the ${c} plugin`);const b=de(t,p||r.name);await os(e,b,r.files,{rmRoot:!0}),m=b}("activate"in o?o.activate:!0)&&await En(e,{pluginPath:m,pluginName:c},i)},No=async(e,{themeData:r,themeZipFile:s,ifAlreadyInstalled:n,options:o={}},i)=>{s&&(r=s,Oe.warn('The "themeZipFile" option is deprecated. Use "themeData" instead.'));const t="targetFolderName"in o?o.targetFolderName:"";let p="",m="";if(r instanceof File){const b=r.name.split("/").pop()||"theme.zip";m=ps(b),i?.tracker.setCaption(`Installing the ${m} theme`),p=(await Rn(e,{ifAlreadyInstalled:n,zipFile:r,targetPath:`${await e.documentRoot}/wp-content/themes`,targetFolderName:t})).assetFolderName}else{m=r.name,p=t||m,i?.tracker.setCaption(`Installing the ${m} theme`);const b=de(await e.documentRoot,"wp-content","themes",p);await os(e,b,r.files,{rmRoot:!0})}("activate"in o?o.activate:!0)&&await Sn(e,{themeFolderName:p},i),("importStarterContent"in o?o.importStarterContent:!1)&&await In(e,{themeSlug:p},i)},Wo=async(e,{username:r="admin"}={},s)=>{s?.tracker.setCaption(s?.initialCaption||"Logging in"),e.defineConstant("PLAYGROUND_AUTO_LOGIN_AS_USER",r)},Uo=async(e,r,s)=>{s?.tracker?.setCaption("Resetting WordPress data");const n=await e.documentRoot;await e.run({env:{DOCROOT:n},code:`<?php
		require getenv('DOCROOT') . '/wp-load.php';

		$GLOBALS['@pdo']->query('DELETE FROM wp_posts WHERE id > 0');
		$GLOBALS['@pdo']->query("UPDATE SQLITE_SEQUENCE SET SEQ=0 WHERE NAME='wp_posts'");
		
		$GLOBALS['@pdo']->query('DELETE FROM wp_postmeta WHERE post_id > 1');
		$GLOBALS['@pdo']->query("UPDATE SQLITE_SEQUENCE SET SEQ=20 WHERE NAME='wp_postmeta'");

		$GLOBALS['@pdo']->query('DELETE FROM wp_comments');
		$GLOBALS['@pdo']->query("UPDATE SQLITE_SEQUENCE SET SEQ=0 WHERE NAME='wp_comments'");

		$GLOBALS['@pdo']->query('DELETE FROM wp_commentmeta');
		$GLOBALS['@pdo']->query("UPDATE SQLITE_SEQUENCE SET SEQ=0 WHERE NAME='wp_commentmeta'");
		`})},qo=async(e,{options:r})=>{await e.request({url:"/wp-admin/install.php?step=2",method:"POST",body:{language:"en",prefix:"wp_",weblog_title:"My WordPress Website",user_name:r.adminPassword||"admin",admin_password:r.adminPassword||"password",admin_password2:r.adminPassword||"password",Submit:"Install WordPress",pw_weak:"1",admin_email:"admin@localhost.com"}})},Mo=async(e,{selfContained:r=!1}={})=>{const s="/tmp/wordpress-playground.zip",n=await e.documentRoot,o=de(n,"wp-content");let i=Pn;r&&(i=i.filter(m=>!m.startsWith("themes/twenty")).filter(m=>m!=="mu-plugins/sqlite-database-integration"));const t=ns({zipPath:s,wpContentPath:o,documentRoot:n,exceptPaths:i.map(m=>de(n,"wp-content",m)),additionalPaths:r?{[de(n,"wp-config.php")]:"wp-config.php"}:{}});await zo(e,`zipDir(${t.wpContentPath}, ${t.zipPath}, array(
			'exclude_paths' => ${t.exceptPaths},
			'zip_root'      => ${t.documentRoot},
			'additional_paths' => ${t.additionalPaths}
		));`);const p=await e.readFileAsBuffer(s);return e.unlink(s),p},Ko=`<?php

function zipDir($root, $output, $options = array())
{
    $root = rtrim($root, '/');
    $additionalPaths = array_key_exists('additional_paths', $options) ? $options['additional_paths'] : array();
    $excludePaths = array_key_exists('exclude_paths', $options) ? $options['exclude_paths'] : array();
    $zip_root = array_key_exists('zip_root', $options) ? $options['zip_root'] : $root;

    $zip = new ZipArchive;
    $res = $zip->open($output, ZipArchive::CREATE);
    if ($res === TRUE) {
        $directories = array(
            $root . '/'
        );
        while (sizeof($directories)) {
            $current_dir = array_pop($directories);

            if ($handle = opendir($current_dir)) {
                while (false !== ($entry = readdir($handle))) {
                    if ($entry == '.' || $entry == '..') {
                        continue;
                    }

                    $entry = join_paths($current_dir, $entry);
                    if (in_array($entry, $excludePaths)) {
                        continue;
                    }

                    if (is_dir($entry)) {
                        $directory_path = $entry . '/';
                        array_push($directories, $directory_path);
                    } else if (is_file($entry)) {
                        $zip->addFile($entry, substr($entry, strlen($zip_root)));
                    }
                }
                closedir($handle);
            }
        }
        foreach ($additionalPaths as $disk_path => $zip_path) {
            $zip->addFile($disk_path, $zip_path);
        }
        $zip->close();
        chmod($output, 0777);
    }
}

function join_paths()
{
    $paths = array();

    foreach (func_get_args() as $arg) {
        if ($arg !== '') {
            $paths[] = $arg;
        }
    }

    return preg_replace('#/+#', '/', join('/', $paths));
}
`;async function zo(e,r){return await e.run({code:Ko+r})}const Go=Do(fetch);async function bs(e="latest"){if(e.startsWith("https://")||e.startsWith("http://")){const n=await crypto.subtle.digest("SHA-1",new TextEncoder().encode(e)),o=Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("");return{releaseUrl:e,version:"custom-"+o.substring(0,8),source:"inferred"}}else if(e==="trunk"||e==="nightly")return{releaseUrl:"https://wordpress.org/nightly-builds/wordpress-latest.zip",version:"nightly-"+new Date().toISOString().split("T")[0],source:"inferred"};let s=await(await Go("https://api.wordpress.org/core/version-check/1.7/?channel=beta")).json();s=s.offers.filter(n=>n.response==="autoupdate");for(const n of s){if(e==="beta"&&n.version.includes("beta"))return{releaseUrl:n.download,version:n.version,source:"api"};if(e==="latest"&&!n.version.includes("beta"))return{releaseUrl:n.download,version:n.version,source:"api"};if(n.version.substring(0,e.length)===e)return{releaseUrl:n.download,version:n.version,source:"api"}}return{releaseUrl:`https://wordpress.org/wordpress-${e}.zip`,version:e,source:"inferred"}}const Zo=async(e,r,s,n)=>{let o=null;if(e.match(/^(\d+\.\d+)(?:\.\d+)?$/))o=e;else if(e.match(/^(\d.\d(.\d)?)-(beta|rc|alpha|nightly).*$/i)){if(s)o=s;else{let i=await bs("beta");i.source!=="api"&&(i=await bs("latest")),o=i.version}o=o.replace(/^(\d.\d)(.\d+)/i,"$1").replace(/(rc|beta).*$/i,"RC")}else n?o=n:o=(await bs("latest")).version;if(!o)throw new Error(`WordPress version ${e} is not supported by the setSiteLanguage step`);return`https://downloads.wordpress.org/translation/core/${o}/${r}.zip`},Vo=async(e,{language:r},s)=>{s?.tracker.setCaption(s?.initialCaption||"Translating"),await e.defineConstant("WPLANG",r);const n=await e.documentRoot,o=(await e.run({code:`<?php
			require '${n}/wp-includes/version.php';
			echo $wp_version;
		`})).text,i=[{url:await Zo(o,r),type:"core"}],p=(await e.run({code:`<?php
		require_once('${n}/wp-load.php');
		require_once('${n}/wp-admin/includes/plugin.php');
		echo json_encode(
			array_values(
				array_map(
					function($plugin) {
						return [
							'slug'    => $plugin['TextDomain'],
							'version' => $plugin['Version']
						];
					},
					array_filter(
						get_plugins(),
						function($plugin) {
							return !empty($plugin['TextDomain']);
						}
					)
				)
			)
		);`})).json;for(const{slug:g,version:w}of p)i.push({url:`https://downloads.wordpress.org/translation/plugin/${g}/${w}/${r}.zip`,type:"plugin"});const c=(await e.run({code:`<?php
		require_once('${n}/wp-load.php');
		require_once('${n}/wp-admin/includes/theme.php');
		echo json_encode(
			array_values(
				array_map(
					function($theme) {
						return [
							'slug'    => $theme->get('TextDomain'),
							'version' => $theme->get('Version')
						];
					},
					wp_get_themes()
				)
			)
		);`})).json;for(const{slug:g,version:w}of c)i.push({url:`https://downloads.wordpress.org/translation/theme/${g}/${w}/${r}.zip`,type:"theme"});await e.isDir(`${n}/wp-content/languages/plugins`)||await e.mkdir(`${n}/wp-content/languages/plugins`),await e.isDir(`${n}/wp-content/languages/themes`)||await e.mkdir(`${n}/wp-content/languages/themes`);const h=new Tn({concurrency:5}),b=i.map(({url:g,type:w})=>h.run(async()=>{try{const $=await fetch(g);if(!$.ok)throw new Error(`Failed to download translations for ${w}: ${$.statusText}`);let E=`${n}/wp-content/languages`;w==="plugin"?E+="/plugins":w==="theme"&&(E+="/themes"),await Hn(e,new File([await $.blob()],`${r}-${w}.zip`),E)}catch($){if(w==="core")throw new Error(`Failed to download translations for WordPress. Please check if the language code ${r} is correct. You can find all available languages and translations on https://translate.wordpress.org/.`);Oe.warn(`Error downloading translations for ${w}: ${$}`)}}));await Promise.all(b)},Yo=Object.freeze(Object.defineProperty({__proto__:null,activatePlugin:En,activateTheme:Sn,cp:Eo,defineSiteUrl:$n,defineWpConfigConsts:si,enableMultisite:Po,exportWXR:Fo,importThemeStarterContent:In,importWordPressFiles:Bo,importWxr:Io,installPlugin:jo,installTheme:No,login:Wo,mkdir:ko,mv:So,request:mo,resetData:Uo,rm:kn,rmdir:Ao,runPHP:no,runPHPWithOptions:ao,runSql:ho,runWpInstallationWizard:qo,setSiteLanguage:Vo,setSiteOptions:On,unzip:ai,updateUserMeta:wo,wpCLI:Ln,writeFile:as,writeFiles:$o,zipWpContent:Mo},Symbol.toStringTag,{value:"Module"})),Xo=5*1024*1024;function Jo(e,r){const s=e.headers.get("content-length")||"",n=parseInt(s,10)||Xo;function o(i,t){r(new CustomEvent("progress",{detail:{loaded:i,total:t}}))}return new Response(new ReadableStream({async start(i){if(!e.body){i.close();return}const t=e.body.getReader();let p=0;for(;;)try{const{done:m,value:c}=await t.read();if(c&&(p+=c.byteLength),m){o(p,p),i.close();break}else o(p,n),i.enqueue(c)}catch(m){Oe.error({e:m}),i.error(m);break}}}),{status:e.status,statusText:e.statusText,headers:e.headers})}const vs=1e-5;class fs extends EventTarget{constructor({weight:r=1,caption:s="",fillTime:n=4}={}){super(),this._selfWeight=1,this._selfDone=!1,this._selfProgress=0,this._selfCaption="",this._isFilling=!1,this._subTrackers=[],this._weight=r,this._selfCaption=s,this._fillTime=n}stage(r,s=""){if(r||(r=this._selfWeight),this._selfWeight-r<-vs)throw new Error(`Cannot add a stage with weight ${r} as the total weight of registered stages would exceed 1.`);this._selfWeight-=r;const n=new fs({caption:s,weight:r,fillTime:this._fillTime});return this._subTrackers.push(n),n.addEventListener("progress",()=>this.notifyProgress()),n.addEventListener("done",()=>{this.done&&this.notifyDone()}),n}fillSlowly({stopBeforeFinishing:r=!0}={}){if(this._isFilling)return;this._isFilling=!0;const s=100,n=this._fillTime/s;this._fillInterval=setInterval(()=>{this.set(this._selfProgress+1),r&&this._selfProgress>=99&&clearInterval(this._fillInterval)},n)}set(r){this._selfProgress=Math.min(r,100),this.notifyProgress(),this._selfProgress+vs>=100&&this.finish()}finish(){this._fillInterval&&clearInterval(this._fillInterval),this._selfDone=!0,this._selfProgress=100,this._isFilling=!1,this._fillInterval=void 0,this.notifyProgress(),this.notifyDone()}get caption(){for(let r=this._subTrackers.length-1;r>=0;r--)if(!this._subTrackers[r].done){const s=this._subTrackers[r].caption;if(s)return s}return this._selfCaption}setCaption(r){this._selfCaption=r,this.notifyProgress()}get done(){return this.progress+vs>=100}get progress(){if(this._selfDone)return 100;const r=this._subTrackers.reduce((s,n)=>s+n.progress*n.weight,this._selfProgress*this._selfWeight);return Math.round(r*1e4)/1e4}get weight(){return this._weight}get observer(){return this._progressObserver||(this._progressObserver=r=>{this.set(r)}),this._progressObserver}get loadingListener(){return this._loadingListener||(this._loadingListener=r=>{this.set(r.detail.loaded/r.detail.total*100)}),this._loadingListener}pipe(r){r.setProgress({progress:this.progress,caption:this.caption}),this.addEventListener("progress",s=>{r.setProgress({progress:s.detail.progress,caption:s.detail.caption})}),this.addEventListener("done",()=>{r.setLoaded()})}addEventListener(r,s){super.addEventListener(r,s)}removeEventListener(r,s){super.removeEventListener(r,s)}notifyProgress(){const r=this;this.dispatchEvent(new CustomEvent("progress",{detail:{get progress(){return r.progress},get caption(){return r.caption}}}))}notifyDone(){this.dispatchEvent(new CustomEvent("done"))}}function Qo(e){let r=[e];return{next(){return Promise.resolve({done:r.length===0,value:r.pop()})},return(){return r=[],{}},[Symbol.asyncIterator](){return this}}}function Dn(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:Qo(e)}class Bn{constructor(r){if(typeof Buffer>"u")throw new Error("Missing Buffer dependency");this.stream=Dn(r),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(r){if(!this.eof())return this.started||await this._init(),this.cursor+r>this.buffer.length&&(this._trim(),await this._accumulate(r)),this._moveCursor(r),this.buffer.slice(this.undoCursor,this.cursor)}async skip(r){this.eof()||(this.started||await this._init(),this.cursor+r>this.buffer.length&&(this._trim(),await this._accumulate(r)),this._moveCursor(r))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:r,value:s}=await this.stream.next();return r&&(this._ended=!0,!s)?Buffer.alloc(0):(s&&(s=Buffer.from(s)),s)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(r){this.undoCursor=this.cursor,this.cursor+=r,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(r){if(this._ended)return;const s=[this.buffer];for(;this.cursor+r>ep(s);){const n=await this._next();if(this._ended)break;s.push(n)}this.buffer=Buffer.concat(s)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function ep(e){return e.reduce((r,s)=>r+s.length,0)}function rp(e,r){const s=r.toString(16);return"0".repeat(e-s.length)+s}class Ce{static flush(){return Buffer.from("0000","utf8")}static delim(){return Buffer.from("0001","utf8")}static encode(r){typeof r=="string"&&(r=Buffer.from(r));const s=r.length+4,n=rp(4,s);return Buffer.concat([Buffer.from(n,"utf8"),r])}static streamReader(r){const s=new Bn(r);return async function(){try{let o=await s.read(4);if(o==null)return!0;if(o=parseInt(o.toString("utf8"),16),o===0||o===1)return null;const i=await s.read(o-4);return i??!0}catch(o){return r.error=o,!0}}}}class st extends Error{constructor(r){super(r),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(r){const s=new st(r.message);return s.code=r.code,s.data=r.data,s.caller=r.caller,s.stack=r.stack,s}get isIsomorphicGitError(){return!0}}class be extends st{constructor(r){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${r}`),this.code=this.name=be.code,this.data={message:r}}}be.code="InternalError";class ls extends st{constructor(r){super(`The filepath "${r}" contains unsafe character sequences`),this.code=this.name=ls.code,this.data={filepath:r}}}ls.code="UnsafeFilepathError";function Fn(e,r){return-(e<r)||+(e>r)}function tp(e,r){return Fn(e.path,r.path)}function sp(e,r){return Fn(Ei(e),Ei(r))}function Ei(e){return e.mode==="040000"?e.path+"/":e.path}function jn(e){switch(e){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new be(`Unexpected GitTree entry mode: ${e}`)}function ip(e){const r=[];let s=0;for(;s<e.length;){const n=e.indexOf(32,s);if(n===-1)throw new be(`GitTree: Error parsing buffer at byte location ${s}: Could not find the next space character.`);const o=e.indexOf(0,s);if(o===-1)throw new be(`GitTree: Error parsing buffer at byte location ${s}: Could not find the next null character.`);let i=e.slice(s,n).toString("utf8");i==="40000"&&(i="040000");const t=jn(i),p=e.slice(n+1,o).toString("utf8");if(p.includes("\\")||p.includes("/"))throw new ls(p);const m=e.slice(o+1,o+21).toString("hex");s=o+21,r.push({mode:i,path:p,oid:m,type:t})}return r}function np(e){if(typeof e=="number"&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new be(`Could not understand file mode: ${e}`)}function ap(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=np(e.mode),e.type||(e.type=jn(e.mode)),e}class oi{constructor(r){if(Buffer.isBuffer(r))this._entries=ip(r);else if(Array.isArray(r))this._entries=r.map(ap);else throw new be("invalid type passed to GitTree constructor");this._entries.sort(tp)}static from(r){return new oi(r)}render(){return this._entries.map(r=>`${r.mode} ${r.type} ${r.oid}    ${r.path}`).join(`
`)}toObject(){const r=[...this._entries];return r.sort(sp),Buffer.concat(r.map(s=>{const n=Buffer.from(s.mode.replace(/^0/,"")),o=Buffer.from(" "),i=Buffer.from(s.path,"utf8"),t=Buffer.from([0]),p=Buffer.from(s.oid,"hex");return Buffer.concat([n,o,i,t,p])}))}entries(){return this._entries}*[Symbol.iterator](){for(const r of this._entries)yield r}}function qs({name:e,email:r,timestamp:s,timezoneOffset:n}){return n=op(n),`${e} <${r}> ${s} ${n}`}function op(e){const r=pp(fp(e));e=Math.abs(e);const s=Math.floor(e/60);e-=s*60;let n=String(s),o=String(e);return n.length<2&&(n="0"+n),o.length<2&&(o="0"+o),(r===-1?"-":"+")+n+o}function pp(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function fp(e){return e===0?e:-e}function mr(e){return e=e.replace(/\r/g,""),e=e.replace(/^\n+/,""),e=e.replace(/\n+$/,"")+`
`,e}function Jt(e){const[,r,s,n,o]=e.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:r,email:s,timestamp:Number(n),timezoneOffset:lp(o)}}function lp(e){let[,r,s,n]=e.match(/(\+|-)(\d\d)(\d\d)/);return n=(r==="+"?1:-1)*(Number(s)*60+Number(n)),up(n)}function up(e){return e===0?e:-e}class ut{constructor(r){if(typeof r=="string")this._tag=r;else if(Buffer.isBuffer(r))this._tag=r.toString("utf8");else if(typeof r=="object")this._tag=ut.render(r);else throw new be("invalid type passed to GitAnnotatedTag constructor")}static from(r){return new ut(r)}static render(r){return`object ${r.object}
type ${r.type}
tag ${r.tag}
tagger ${qs(r.tagger)}

${r.message}
${r.gpgsig?r.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const r=this.withoutSignature();return r.slice(r.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const r=this.justHeaders().split(`
`),s=[];for(const o of r)o[0]===" "?s[s.length-1]+=`
`+o.slice(1):s.push(o);const n={};for(const o of s){const i=o.slice(0,o.indexOf(" ")),t=o.slice(o.indexOf(" ")+1);Array.isArray(n[i])?n[i].push(t):n[i]=t}return n.tagger&&(n.tagger=Jt(n.tagger)),n.committer&&(n.committer=Jt(n.committer)),n}withoutSignature(){const r=mr(this._tag);return r.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?r:r.slice(0,r.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const r=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return mr(r)}payload(){return this.withoutSignature()+`
`}toObject(){return Buffer.from(this._tag,"utf8")}static async sign(r,s,n){const o=r.payload();let{signature:i}=await s({payload:o,secretKey:n});i=mr(i);const t=o+i;return ut.from(t)}}function Ps(e){return e.trim().split(`
`).map(r=>" "+r).join(`
`)+`
`}function cp(e){return e.split(`
`).map(r=>r.replace(/^ /,"")).join(`
`)}class Ne{constructor(r){if(typeof r=="string")this._commit=r;else if(Buffer.isBuffer(r))this._commit=r.toString("utf8");else if(typeof r=="object")this._commit=Ne.render(r);else throw new be("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:r,signature:s}){const n=Ne.justHeaders(r),o=Ne.justMessage(r),i=mr(n+`
gpgsig`+Ps(s)+`
`+o);return new Ne(i)}static from(r){return new Ne(r)}toObject(){return Buffer.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return Ne.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(r){return mr(r.slice(r.indexOf(`

`)+2))}static justHeaders(r){return r.slice(0,r.indexOf(`

`))}parseHeaders(){const r=Ne.justHeaders(this._commit).split(`
`),s=[];for(const o of r)o[0]===" "?s[s.length-1]+=`
`+o.slice(1):s.push(o);const n={parent:[]};for(const o of s){const i=o.slice(0,o.indexOf(" ")),t=o.slice(o.indexOf(" ")+1);Array.isArray(n[i])?n[i].push(t):n[i]=t}return n.author&&(n.author=Jt(n.author)),n.committer&&(n.committer=Jt(n.committer)),n}static renderHeaders(r){let s="";if(r.tree?s+=`tree ${r.tree}
`:s+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,r.parent){if(r.parent.length===void 0)throw new be("commit 'parent' property should be an array");for(const i of r.parent)s+=`parent ${i}
`}const n=r.author;s+=`author ${qs(n)}
`;const o=r.committer||r.author;return s+=`committer ${qs(o)}
`,r.gpgsig&&(s+="gpgsig"+Ps(r.gpgsig)),s}static render(r){return Ne.renderHeaders(r)+`
`+mr(r.message)}render(){return this._commit}withoutSignature(){const r=mr(this._commit);if(r.indexOf(`
gpgsig`)===-1)return r;const s=r.slice(0,r.indexOf(`
gpgsig`)),n=r.slice(r.indexOf(`-----END PGP SIGNATURE-----
`)+28);return mr(s+`
`+n)}isolateSignature(){const r=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return cp(r)}static async sign(r,s,n){const o=r.withoutSignature(),i=Ne.justMessage(r._commit);let{signature:t}=await s({payload:o,secretKey:n});t=mr(t);const m=Ne.justHeaders(r._commit)+`
gpgsig`+Ps(t)+`
`+i;return Ne.from(m)}}var Nn={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */(function(e){(function(r){r(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(r){r.version="1.2.2";function s(){for(var C=0,T=new Array(256),S=0;S!=256;++S)C=S,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,T[S]=C;return typeof Int32Array<"u"?new Int32Array(T):T}var n=s();function o(C){var T=0,S=0,k=0,D=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(k=0;k!=256;++k)D[k]=C[k];for(k=0;k!=256;++k)for(S=C[k],T=256+k;T<4096;T+=256)S=D[T]=S>>>8^C[S&255];var R=[];for(k=1;k!=16;++k)R[k-1]=typeof Int32Array<"u"?D.subarray(k*256,k*256+256):D.slice(k*256,k*256+256);return R}var i=o(n),t=i[0],p=i[1],m=i[2],c=i[3],h=i[4],b=i[5],g=i[6],w=i[7],$=i[8],E=i[9],j=i[10],F=i[11],q=i[12],I=i[13],W=i[14];function B(C,T){for(var S=T^-1,k=0,D=C.length;k<D;)S=S>>>8^n[(S^C.charCodeAt(k++))&255];return~S}function O(C,T){for(var S=T^-1,k=C.length-15,D=0;D<k;)S=W[C[D++]^S&255]^I[C[D++]^S>>8&255]^q[C[D++]^S>>16&255]^F[C[D++]^S>>>24]^j[C[D++]]^E[C[D++]]^$[C[D++]]^w[C[D++]]^g[C[D++]]^b[C[D++]]^h[C[D++]]^c[C[D++]]^m[C[D++]]^p[C[D++]]^t[C[D++]]^n[C[D++]];for(k+=15;D<k;)S=S>>>8^n[(S^C[D++])&255];return~S}function N(C,T){for(var S=T^-1,k=0,D=C.length,R=0,L=0;k<D;)R=C.charCodeAt(k++),R<128?S=S>>>8^n[(S^R)&255]:R<2048?(S=S>>>8^n[(S^(192|R>>6&31))&255],S=S>>>8^n[(S^(128|R&63))&255]):R>=55296&&R<57344?(R=(R&1023)+64,L=C.charCodeAt(k++)&1023,S=S>>>8^n[(S^(240|R>>8&7))&255],S=S>>>8^n[(S^(128|R>>2&63))&255],S=S>>>8^n[(S^(128|L>>6&15|(R&3)<<4))&255],S=S>>>8^n[(S^(128|L&63))&255]):(S=S>>>8^n[(S^(224|R>>12&15))&255],S=S>>>8^n[(S^(128|R>>6&63))&255],S=S>>>8^n[(S^(128|R&63))&255]);return~S}r.table=n,r.bstr=B,r.buf=O,r.str=N})})(Nn);const dp=ri(Nn);class hp{static wrap({type:r,object:s}){return Buffer.concat([Buffer.from(`${r} ${s.byteLength.toString()}\0`),Buffer.from(s)])}static unwrap(r){const s=r.indexOf(32),n=r.indexOf(0),o=r.slice(0,s).toString("utf8"),i=r.slice(s+1,n).toString("utf8"),t=r.length-(n+1);if(parseInt(i)!==t)throw new be(`Length mismatch: expected ${i} bytes but got ${t} instead.`);return{type:o,object:Buffer.from(r.slice(n+1))}}}class xr{constructor(r){this.buffer=r,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(r){this._start=r}slice(r){const s=this.buffer.slice(this._start,this._start+r);return this._start+=r,s}toString(r,s){const n=this.buffer.toString(r,this._start,this._start+s);return this._start+=s,n}write(r,s,n){const o=this.buffer.write(r,this._start,s,n);return this._start+=s,o}copy(r,s,n){const o=r.copy(this.buffer,this._start,s,n);return this._start+=o,o}readUInt8(){const r=this.buffer.readUInt8(this._start);return this._start+=1,r}writeUInt8(r){const s=this.buffer.writeUInt8(r,this._start);return this._start+=1,s}readUInt16BE(){const r=this.buffer.readUInt16BE(this._start);return this._start+=2,r}writeUInt16BE(r){const s=this.buffer.writeUInt16BE(r,this._start);return this._start+=2,s}readUInt32BE(){const r=this.buffer.readUInt32BE(this._start);return this._start+=4,r}writeUInt32BE(r){const s=this.buffer.writeUInt32BE(r,this._start);return this._start+=4,s}}function mp(e,r){const s=new xr(e),n=Si(s);if(n!==r.byteLength)throw new be(`applyDelta expected source buffer to be ${n} bytes but the provided buffer was ${r.length} bytes`);const o=Si(s);let i;const t=Ai(s,r);if(t.byteLength===o)i=t;else{i=Buffer.alloc(o);const p=new xr(i);for(p.copy(t);!s.eof();)p.copy(Ai(s,r));const m=p.tell();if(o!==m)throw new be(`applyDelta expected target buffer to be ${o} bytes but the resulting buffer was ${m} bytes`)}return i}function Si(e){let r=0,s=0,n=null;do n=e.readUInt8(),r|=(n&127)<<s,s+=7;while(n&128);return r}function ki(e,r,s){let n=0,o=0;for(;s--;)r&1&&(n|=e.readUInt8()<<o),r>>=1,o+=8;return n}function Ai(e,r){const s=e.readUInt8(),n=128,o=15,i=112;if(s&n){const t=ki(e,s&o,4);let p=ki(e,(s&i)>>4,3);return p===0&&(p=65536),r.slice(t,t+p)}else return e.slice(s)}var gr={};(function(e){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function s(i,t){return Object.prototype.hasOwnProperty.call(i,t)}e.assign=function(i){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var p=t.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var m in p)s(p,m)&&(i[m]=p[m])}}return i},e.shrinkBuf=function(i,t){return i.length===t?i:i.subarray?i.subarray(0,t):(i.length=t,i)};var n={arraySet:function(i,t,p,m,c){if(t.subarray&&i.subarray){i.set(t.subarray(p,p+m),c);return}for(var h=0;h<m;h++)i[c+h]=t[p+h]},flattenChunks:function(i){var t,p,m,c,h,b;for(m=0,t=0,p=i.length;t<p;t++)m+=i[t].length;for(b=new Uint8Array(m),c=0,t=0,p=i.length;t<p;t++)h=i[t],b.set(h,c),c+=h.length;return b}},o={arraySet:function(i,t,p,m,c){for(var h=0;h<m;h++)i[c+h]=t[p+h]},flattenChunks:function(i){return[].concat.apply([],i)}};e.setTyped=function(i){i?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(r)})(gr);var At={},ur={},it={},yp=gr,_p=4,Ti=0,Ci=1,gp=2;function nt(e){for(var r=e.length;--r>=0;)e[r]=0}var wp=0,Wn=1,bp=2,vp=3,Pp=258,pi=29,Tt=256,gt=Tt+1+pi,et=30,fi=19,Un=2*gt+1,$r=15,Es=16,Ep=7,li=256,qn=16,Mn=17,Kn=18,Ms=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Ut=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Sp=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],zn=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],kp=512,yr=new Array((gt+2)*2);nt(yr);var ct=new Array(et*2);nt(ct);var wt=new Array(kp);nt(wt);var bt=new Array(Pp-vp+1);nt(bt);var ui=new Array(pi);nt(ui);var Qt=new Array(et);nt(Qt);function Ss(e,r,s,n,o){this.static_tree=e,this.extra_bits=r,this.extra_base=s,this.elems=n,this.max_length=o,this.has_stree=e&&e.length}var Gn,Zn,Vn;function ks(e,r){this.dyn_tree=e,this.max_code=0,this.stat_desc=r}function Yn(e){return e<256?wt[e]:wt[256+(e>>>7)]}function vt(e,r){e.pending_buf[e.pending++]=r&255,e.pending_buf[e.pending++]=r>>>8&255}function Be(e,r,s){e.bi_valid>Es-s?(e.bi_buf|=r<<e.bi_valid&65535,vt(e,e.bi_buf),e.bi_buf=r>>Es-e.bi_valid,e.bi_valid+=s-Es):(e.bi_buf|=r<<e.bi_valid&65535,e.bi_valid+=s)}function pr(e,r,s){Be(e,s[r*2],s[r*2+1])}function Xn(e,r){var s=0;do s|=e&1,e>>>=1,s<<=1;while(--r>0);return s>>>1}function Ap(e){e.bi_valid===16?(vt(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function Tp(e,r){var s=r.dyn_tree,n=r.max_code,o=r.stat_desc.static_tree,i=r.stat_desc.has_stree,t=r.stat_desc.extra_bits,p=r.stat_desc.extra_base,m=r.stat_desc.max_length,c,h,b,g,w,$,E=0;for(g=0;g<=$r;g++)e.bl_count[g]=0;for(s[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<Un;c++)h=e.heap[c],g=s[s[h*2+1]*2+1]+1,g>m&&(g=m,E++),s[h*2+1]=g,!(h>n)&&(e.bl_count[g]++,w=0,h>=p&&(w=t[h-p]),$=s[h*2],e.opt_len+=$*(g+w),i&&(e.static_len+=$*(o[h*2+1]+w)));if(E!==0){do{for(g=m-1;e.bl_count[g]===0;)g--;e.bl_count[g]--,e.bl_count[g+1]+=2,e.bl_count[m]--,E-=2}while(E>0);for(g=m;g!==0;g--)for(h=e.bl_count[g];h!==0;)b=e.heap[--c],!(b>n)&&(s[b*2+1]!==g&&(e.opt_len+=(g-s[b*2+1])*s[b*2],s[b*2+1]=g),h--)}}function Jn(e,r,s){var n=new Array($r+1),o=0,i,t;for(i=1;i<=$r;i++)n[i]=o=o+s[i-1]<<1;for(t=0;t<=r;t++){var p=e[t*2+1];p!==0&&(e[t*2]=Xn(n[p]++,p))}}function Cp(){var e,r,s,n,o,i=new Array($r+1);for(s=0,n=0;n<pi-1;n++)for(ui[n]=s,e=0;e<1<<Ms[n];e++)bt[s++]=n;for(bt[s-1]=n,o=0,n=0;n<16;n++)for(Qt[n]=o,e=0;e<1<<Ut[n];e++)wt[o++]=n;for(o>>=7;n<et;n++)for(Qt[n]=o<<7,e=0;e<1<<Ut[n]-7;e++)wt[256+o++]=n;for(r=0;r<=$r;r++)i[r]=0;for(e=0;e<=143;)yr[e*2+1]=8,e++,i[8]++;for(;e<=255;)yr[e*2+1]=9,e++,i[9]++;for(;e<=279;)yr[e*2+1]=7,e++,i[7]++;for(;e<=287;)yr[e*2+1]=8,e++,i[8]++;for(Jn(yr,gt+1,i),e=0;e<et;e++)ct[e*2+1]=5,ct[e*2]=Xn(e,5);Gn=new Ss(yr,Ms,Tt+1,gt,$r),Zn=new Ss(ct,Ut,0,et,$r),Vn=new Ss(new Array(0),Sp,0,fi,Ep)}function Qn(e){var r;for(r=0;r<gt;r++)e.dyn_ltree[r*2]=0;for(r=0;r<et;r++)e.dyn_dtree[r*2]=0;for(r=0;r<fi;r++)e.bl_tree[r*2]=0;e.dyn_ltree[li*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function ea(e){e.bi_valid>8?vt(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Op(e,r,s,n){ea(e),n&&(vt(e,s),vt(e,~s)),yp.arraySet(e.pending_buf,e.window,r,s,e.pending),e.pending+=s}function Oi(e,r,s,n){var o=r*2,i=s*2;return e[o]<e[i]||e[o]===e[i]&&n[r]<=n[s]}function As(e,r,s){for(var n=e.heap[s],o=s<<1;o<=e.heap_len&&(o<e.heap_len&&Oi(r,e.heap[o+1],e.heap[o],e.depth)&&o++,!Oi(r,n,e.heap[o],e.depth));)e.heap[s]=e.heap[o],s=o,o<<=1;e.heap[s]=n}function xi(e,r,s){var n,o,i=0,t,p;if(e.last_lit!==0)do n=e.pending_buf[e.d_buf+i*2]<<8|e.pending_buf[e.d_buf+i*2+1],o=e.pending_buf[e.l_buf+i],i++,n===0?pr(e,o,r):(t=bt[o],pr(e,t+Tt+1,r),p=Ms[t],p!==0&&(o-=ui[t],Be(e,o,p)),n--,t=Yn(n),pr(e,t,s),p=Ut[t],p!==0&&(n-=Qt[t],Be(e,n,p)));while(i<e.last_lit);pr(e,li,r)}function Ks(e,r){var s=r.dyn_tree,n=r.stat_desc.static_tree,o=r.stat_desc.has_stree,i=r.stat_desc.elems,t,p,m=-1,c;for(e.heap_len=0,e.heap_max=Un,t=0;t<i;t++)s[t*2]!==0?(e.heap[++e.heap_len]=m=t,e.depth[t]=0):s[t*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=m<2?++m:0,s[c*2]=1,e.depth[c]=0,e.opt_len--,o&&(e.static_len-=n[c*2+1]);for(r.max_code=m,t=e.heap_len>>1;t>=1;t--)As(e,s,t);c=i;do t=e.heap[1],e.heap[1]=e.heap[e.heap_len--],As(e,s,1),p=e.heap[1],e.heap[--e.heap_max]=t,e.heap[--e.heap_max]=p,s[c*2]=s[t*2]+s[p*2],e.depth[c]=(e.depth[t]>=e.depth[p]?e.depth[t]:e.depth[p])+1,s[t*2+1]=s[p*2+1]=c,e.heap[1]=c++,As(e,s,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Tp(e,r),Jn(s,m,e.bl_count)}function Li(e,r,s){var n,o=-1,i,t=r[0*2+1],p=0,m=7,c=4;for(t===0&&(m=138,c=3),r[(s+1)*2+1]=65535,n=0;n<=s;n++)i=t,t=r[(n+1)*2+1],!(++p<m&&i===t)&&(p<c?e.bl_tree[i*2]+=p:i!==0?(i!==o&&e.bl_tree[i*2]++,e.bl_tree[qn*2]++):p<=10?e.bl_tree[Mn*2]++:e.bl_tree[Kn*2]++,p=0,o=i,t===0?(m=138,c=3):i===t?(m=6,c=3):(m=7,c=4))}function $i(e,r,s){var n,o=-1,i,t=r[0*2+1],p=0,m=7,c=4;for(t===0&&(m=138,c=3),n=0;n<=s;n++)if(i=t,t=r[(n+1)*2+1],!(++p<m&&i===t)){if(p<c)do pr(e,i,e.bl_tree);while(--p!==0);else i!==0?(i!==o&&(pr(e,i,e.bl_tree),p--),pr(e,qn,e.bl_tree),Be(e,p-3,2)):p<=10?(pr(e,Mn,e.bl_tree),Be(e,p-3,3)):(pr(e,Kn,e.bl_tree),Be(e,p-11,7));p=0,o=i,t===0?(m=138,c=3):i===t?(m=6,c=3):(m=7,c=4)}}function xp(e){var r;for(Li(e,e.dyn_ltree,e.l_desc.max_code),Li(e,e.dyn_dtree,e.d_desc.max_code),Ks(e,e.bl_desc),r=fi-1;r>=3&&e.bl_tree[zn[r]*2+1]===0;r--);return e.opt_len+=3*(r+1)+5+5+4,r}function Lp(e,r,s,n){var o;for(Be(e,r-257,5),Be(e,s-1,5),Be(e,n-4,4),o=0;o<n;o++)Be(e,e.bl_tree[zn[o]*2+1],3);$i(e,e.dyn_ltree,r-1),$i(e,e.dyn_dtree,s-1)}function $p(e){var r=4093624447,s;for(s=0;s<=31;s++,r>>>=1)if(r&1&&e.dyn_ltree[s*2]!==0)return Ti;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Ci;for(s=32;s<Tt;s++)if(e.dyn_ltree[s*2]!==0)return Ci;return Ti}var Ii=!1;function Ip(e){Ii||(Cp(),Ii=!0),e.l_desc=new ks(e.dyn_ltree,Gn),e.d_desc=new ks(e.dyn_dtree,Zn),e.bl_desc=new ks(e.bl_tree,Vn),e.bi_buf=0,e.bi_valid=0,Qn(e)}function ra(e,r,s,n){Be(e,(wp<<1)+(n?1:0),3),Op(e,r,s,!0)}function Hp(e){Be(e,Wn<<1,3),pr(e,li,yr),Ap(e)}function Rp(e,r,s,n){var o,i,t=0;e.level>0?(e.strm.data_type===gp&&(e.strm.data_type=$p(e)),Ks(e,e.l_desc),Ks(e,e.d_desc),t=xp(e),o=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=o&&(o=i)):o=i=s+5,s+4<=o&&r!==-1?ra(e,r,s,n):e.strategy===_p||i===o?(Be(e,(Wn<<1)+(n?1:0),3),xi(e,yr,ct)):(Be(e,(bp<<1)+(n?1:0),3),Lp(e,e.l_desc.max_code+1,e.d_desc.max_code+1,t+1),xi(e,e.dyn_ltree,e.dyn_dtree)),Qn(e),n&&ea(e)}function Dp(e,r,s){return e.pending_buf[e.d_buf+e.last_lit*2]=r>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=r&255,e.pending_buf[e.l_buf+e.last_lit]=s&255,e.last_lit++,r===0?e.dyn_ltree[s*2]++:(e.matches++,r--,e.dyn_ltree[(bt[s]+Tt+1)*2]++,e.dyn_dtree[Yn(r)*2]++),e.last_lit===e.lit_bufsize-1}it._tr_init=Ip;it._tr_stored_block=ra;it._tr_flush_block=Rp;it._tr_tally=Dp;it._tr_align=Hp;function Bp(e,r,s,n){for(var o=e&65535|0,i=e>>>16&65535|0,t=0;s!==0;){t=s>2e3?2e3:s,s-=t;do o=o+r[n++]|0,i=i+o|0;while(--t);o%=65521,i%=65521}return o|i<<16|0}var ta=Bp;function Fp(){for(var e,r=[],s=0;s<256;s++){e=s;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;r[s]=e}return r}var jp=Fp();function Np(e,r,s,n){var o=jp,i=n+s;e^=-1;for(var t=n;t<i;t++)e=e>>>8^o[(e^r[t])&255];return e^-1}var sa=Np,ci={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},He=gr,ze=it,ia=ta,Er=sa,Wp=ci,Wr=0,Up=1,qp=3,Cr=4,Hi=5,fr=0,Ri=1,Ge=-2,Mp=-3,Ts=-5,Kp=-1,zp=1,Rt=2,Gp=3,Zp=4,Vp=0,Yp=2,us=8,Xp=9,Jp=15,Qp=8,ef=29,rf=256,zs=rf+1+ef,tf=30,sf=19,nf=2*zs+1,af=15,oe=3,Ar=258,er=Ar+oe+1,of=32,cs=42,Gs=69,qt=73,Mt=91,Kt=103,Ir=113,lt=666,Ae=1,Ct=2,Dr=3,at=4,pf=3;function Tr(e,r){return e.msg=Wp[r],r}function Di(e){return(e<<1)-(e>4?9:0)}function kr(e){for(var r=e.length;--r>=0;)e[r]=0}function Sr(e){var r=e.state,s=r.pending;s>e.avail_out&&(s=e.avail_out),s!==0&&(He.arraySet(e.output,r.pending_buf,r.pending_out,s,e.next_out),e.next_out+=s,r.pending_out+=s,e.total_out+=s,e.avail_out-=s,r.pending-=s,r.pending===0&&(r.pending_out=0))}function Le(e,r){ze._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,r),e.block_start=e.strstart,Sr(e.strm)}function fe(e,r){e.pending_buf[e.pending++]=r}function ft(e,r){e.pending_buf[e.pending++]=r>>>8&255,e.pending_buf[e.pending++]=r&255}function ff(e,r,s,n){var o=e.avail_in;return o>n&&(o=n),o===0?0:(e.avail_in-=o,He.arraySet(r,e.input,e.next_in,o,s),e.state.wrap===1?e.adler=ia(e.adler,r,o,s):e.state.wrap===2&&(e.adler=Er(e.adler,r,o,s)),e.next_in+=o,e.total_in+=o,o)}function na(e,r){var s=e.max_chain_length,n=e.strstart,o,i,t=e.prev_length,p=e.nice_match,m=e.strstart>e.w_size-er?e.strstart-(e.w_size-er):0,c=e.window,h=e.w_mask,b=e.prev,g=e.strstart+Ar,w=c[n+t-1],$=c[n+t];e.prev_length>=e.good_match&&(s>>=2),p>e.lookahead&&(p=e.lookahead);do if(o=r,!(c[o+t]!==$||c[o+t-1]!==w||c[o]!==c[n]||c[++o]!==c[n+1])){n+=2,o++;do;while(c[++n]===c[++o]&&c[++n]===c[++o]&&c[++n]===c[++o]&&c[++n]===c[++o]&&c[++n]===c[++o]&&c[++n]===c[++o]&&c[++n]===c[++o]&&c[++n]===c[++o]&&n<g);if(i=Ar-(g-n),n=g-Ar,i>t){if(e.match_start=r,t=i,i>=p)break;w=c[n+t-1],$=c[n+t]}}while((r=b[r&h])>m&&--s!==0);return t<=e.lookahead?t:e.lookahead}function Br(e){var r=e.w_size,s,n,o,i,t;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=r+(r-er)){He.arraySet(e.window,e.window,r,r,0),e.match_start-=r,e.strstart-=r,e.block_start-=r,n=e.hash_size,s=n;do o=e.head[--s],e.head[s]=o>=r?o-r:0;while(--n);n=r,s=n;do o=e.prev[--s],e.prev[s]=o>=r?o-r:0;while(--n);i+=r}if(e.strm.avail_in===0)break;if(n=ff(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=oe)for(t=e.strstart-e.insert,e.ins_h=e.window[t],e.ins_h=(e.ins_h<<e.hash_shift^e.window[t+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[t+oe-1])&e.hash_mask,e.prev[t&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=t,t++,e.insert--,!(e.lookahead+e.insert<oe)););}while(e.lookahead<er&&e.strm.avail_in!==0)}function lf(e,r){var s=65535;for(s>e.pending_buf_size-5&&(s=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Br(e),e.lookahead===0&&r===Wr)return Ae;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+s;if((e.strstart===0||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,Le(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-er&&(Le(e,!1),e.strm.avail_out===0))return Ae}return e.insert=0,r===Cr?(Le(e,!0),e.strm.avail_out===0?Dr:at):(e.strstart>e.block_start&&(Le(e,!1),e.strm.avail_out===0),Ae)}function Cs(e,r){for(var s,n;;){if(e.lookahead<er){if(Br(e),e.lookahead<er&&r===Wr)return Ae;if(e.lookahead===0)break}if(s=0,e.lookahead>=oe&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+oe-1])&e.hash_mask,s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),s!==0&&e.strstart-s<=e.w_size-er&&(e.match_length=na(e,s)),e.match_length>=oe)if(n=ze._tr_tally(e,e.strstart-e.match_start,e.match_length-oe),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=oe){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+oe-1])&e.hash_mask,s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=ze._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Le(e,!1),e.strm.avail_out===0))return Ae}return e.insert=e.strstart<oe-1?e.strstart:oe-1,r===Cr?(Le(e,!0),e.strm.avail_out===0?Dr:at):e.last_lit&&(Le(e,!1),e.strm.avail_out===0)?Ae:Ct}function Zr(e,r){for(var s,n,o;;){if(e.lookahead<er){if(Br(e),e.lookahead<er&&r===Wr)return Ae;if(e.lookahead===0)break}if(s=0,e.lookahead>=oe&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+oe-1])&e.hash_mask,s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=oe-1,s!==0&&e.prev_length<e.max_lazy_match&&e.strstart-s<=e.w_size-er&&(e.match_length=na(e,s),e.match_length<=5&&(e.strategy===zp||e.match_length===oe&&e.strstart-e.match_start>4096)&&(e.match_length=oe-1)),e.prev_length>=oe&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-oe,n=ze._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-oe),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+oe-1])&e.hash_mask,s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=oe-1,e.strstart++,n&&(Le(e,!1),e.strm.avail_out===0))return Ae}else if(e.match_available){if(n=ze._tr_tally(e,0,e.window[e.strstart-1]),n&&Le(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Ae}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=ze._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<oe-1?e.strstart:oe-1,r===Cr?(Le(e,!0),e.strm.avail_out===0?Dr:at):e.last_lit&&(Le(e,!1),e.strm.avail_out===0)?Ae:Ct}function uf(e,r){for(var s,n,o,i,t=e.window;;){if(e.lookahead<=Ar){if(Br(e),e.lookahead<=Ar&&r===Wr)return Ae;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=oe&&e.strstart>0&&(o=e.strstart-1,n=t[o],n===t[++o]&&n===t[++o]&&n===t[++o])){i=e.strstart+Ar;do;while(n===t[++o]&&n===t[++o]&&n===t[++o]&&n===t[++o]&&n===t[++o]&&n===t[++o]&&n===t[++o]&&n===t[++o]&&o<i);e.match_length=Ar-(i-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=oe?(s=ze._tr_tally(e,1,e.match_length-oe),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(s=ze._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),s&&(Le(e,!1),e.strm.avail_out===0))return Ae}return e.insert=0,r===Cr?(Le(e,!0),e.strm.avail_out===0?Dr:at):e.last_lit&&(Le(e,!1),e.strm.avail_out===0)?Ae:Ct}function cf(e,r){for(var s;;){if(e.lookahead===0&&(Br(e),e.lookahead===0)){if(r===Wr)return Ae;break}if(e.match_length=0,s=ze._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,s&&(Le(e,!1),e.strm.avail_out===0))return Ae}return e.insert=0,r===Cr?(Le(e,!0),e.strm.avail_out===0?Dr:at):e.last_lit&&(Le(e,!1),e.strm.avail_out===0)?Ae:Ct}function nr(e,r,s,n,o){this.good_length=e,this.max_lazy=r,this.nice_length=s,this.max_chain=n,this.func=o}var Jr;Jr=[new nr(0,0,0,0,lf),new nr(4,4,8,4,Cs),new nr(4,5,16,8,Cs),new nr(4,6,32,32,Cs),new nr(4,4,16,16,Zr),new nr(8,16,32,32,Zr),new nr(8,16,128,128,Zr),new nr(8,32,128,256,Zr),new nr(32,128,258,1024,Zr),new nr(32,258,258,4096,Zr)];function df(e){e.window_size=2*e.w_size,kr(e.head),e.max_lazy_match=Jr[e.level].max_lazy,e.good_match=Jr[e.level].good_length,e.nice_match=Jr[e.level].nice_length,e.max_chain_length=Jr[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=oe-1,e.match_available=0,e.ins_h=0}function hf(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=us,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new He.Buf16(nf*2),this.dyn_dtree=new He.Buf16((2*tf+1)*2),this.bl_tree=new He.Buf16((2*sf+1)*2),kr(this.dyn_ltree),kr(this.dyn_dtree),kr(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new He.Buf16(af+1),this.heap=new He.Buf16(2*zs+1),kr(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new He.Buf16(2*zs+1),kr(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function aa(e){var r;return!e||!e.state?Tr(e,Ge):(e.total_in=e.total_out=0,e.data_type=Yp,r=e.state,r.pending=0,r.pending_out=0,r.wrap<0&&(r.wrap=-r.wrap),r.status=r.wrap?cs:Ir,e.adler=r.wrap===2?0:1,r.last_flush=Wr,ze._tr_init(r),fr)}function oa(e){var r=aa(e);return r===fr&&df(e.state),r}function mf(e,r){return!e||!e.state||e.state.wrap!==2?Ge:(e.state.gzhead=r,fr)}function pa(e,r,s,n,o,i){if(!e)return Ge;var t=1;if(r===Kp&&(r=6),n<0?(t=0,n=-n):n>15&&(t=2,n-=16),o<1||o>Xp||s!==us||n<8||n>15||r<0||r>9||i<0||i>Zp)return Tr(e,Ge);n===8&&(n=9);var p=new hf;return e.state=p,p.strm=e,p.wrap=t,p.gzhead=null,p.w_bits=n,p.w_size=1<<p.w_bits,p.w_mask=p.w_size-1,p.hash_bits=o+7,p.hash_size=1<<p.hash_bits,p.hash_mask=p.hash_size-1,p.hash_shift=~~((p.hash_bits+oe-1)/oe),p.window=new He.Buf8(p.w_size*2),p.head=new He.Buf16(p.hash_size),p.prev=new He.Buf16(p.w_size),p.lit_bufsize=1<<o+6,p.pending_buf_size=p.lit_bufsize*4,p.pending_buf=new He.Buf8(p.pending_buf_size),p.d_buf=1*p.lit_bufsize,p.l_buf=(1+2)*p.lit_bufsize,p.level=r,p.strategy=i,p.method=s,oa(e)}function yf(e,r){return pa(e,r,us,Jp,Qp,Vp)}function _f(e,r){var s,n,o,i;if(!e||!e.state||r>Hi||r<0)return e?Tr(e,Ge):Ge;if(n=e.state,!e.output||!e.input&&e.avail_in!==0||n.status===lt&&r!==Cr)return Tr(e,e.avail_out===0?Ts:Ge);if(n.strm=e,s=n.last_flush,n.last_flush=r,n.status===cs)if(n.wrap===2)e.adler=0,fe(n,31),fe(n,139),fe(n,8),n.gzhead?(fe(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),fe(n,n.gzhead.time&255),fe(n,n.gzhead.time>>8&255),fe(n,n.gzhead.time>>16&255),fe(n,n.gzhead.time>>24&255),fe(n,n.level===9?2:n.strategy>=Rt||n.level<2?4:0),fe(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(fe(n,n.gzhead.extra.length&255),fe(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Er(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=Gs):(fe(n,0),fe(n,0),fe(n,0),fe(n,0),fe(n,0),fe(n,n.level===9?2:n.strategy>=Rt||n.level<2?4:0),fe(n,pf),n.status=Ir);else{var t=us+(n.w_bits-8<<4)<<8,p=-1;n.strategy>=Rt||n.level<2?p=0:n.level<6?p=1:n.level===6?p=2:p=3,t|=p<<6,n.strstart!==0&&(t|=of),t+=31-t%31,n.status=Ir,ft(n,t),n.strstart!==0&&(ft(n,e.adler>>>16),ft(n,e.adler&65535)),e.adler=1}if(n.status===Gs)if(n.gzhead.extra){for(o=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>o&&(e.adler=Er(e.adler,n.pending_buf,n.pending-o,o)),Sr(e),o=n.pending,n.pending===n.pending_buf_size));)fe(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>o&&(e.adler=Er(e.adler,n.pending_buf,n.pending-o,o)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=qt)}else n.status=qt;if(n.status===qt)if(n.gzhead.name){o=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>o&&(e.adler=Er(e.adler,n.pending_buf,n.pending-o,o)),Sr(e),o=n.pending,n.pending===n.pending_buf_size)){i=1;break}n.gzindex<n.gzhead.name.length?i=n.gzhead.name.charCodeAt(n.gzindex++)&255:i=0,fe(n,i)}while(i!==0);n.gzhead.hcrc&&n.pending>o&&(e.adler=Er(e.adler,n.pending_buf,n.pending-o,o)),i===0&&(n.gzindex=0,n.status=Mt)}else n.status=Mt;if(n.status===Mt)if(n.gzhead.comment){o=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>o&&(e.adler=Er(e.adler,n.pending_buf,n.pending-o,o)),Sr(e),o=n.pending,n.pending===n.pending_buf_size)){i=1;break}n.gzindex<n.gzhead.comment.length?i=n.gzhead.comment.charCodeAt(n.gzindex++)&255:i=0,fe(n,i)}while(i!==0);n.gzhead.hcrc&&n.pending>o&&(e.adler=Er(e.adler,n.pending_buf,n.pending-o,o)),i===0&&(n.status=Kt)}else n.status=Kt;if(n.status===Kt&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&Sr(e),n.pending+2<=n.pending_buf_size&&(fe(n,e.adler&255),fe(n,e.adler>>8&255),e.adler=0,n.status=Ir)):n.status=Ir),n.pending!==0){if(Sr(e),e.avail_out===0)return n.last_flush=-1,fr}else if(e.avail_in===0&&Di(r)<=Di(s)&&r!==Cr)return Tr(e,Ts);if(n.status===lt&&e.avail_in!==0)return Tr(e,Ts);if(e.avail_in!==0||n.lookahead!==0||r!==Wr&&n.status!==lt){var m=n.strategy===Rt?cf(n,r):n.strategy===Gp?uf(n,r):Jr[n.level].func(n,r);if((m===Dr||m===at)&&(n.status=lt),m===Ae||m===Dr)return e.avail_out===0&&(n.last_flush=-1),fr;if(m===Ct&&(r===Up?ze._tr_align(n):r!==Hi&&(ze._tr_stored_block(n,0,0,!1),r===qp&&(kr(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),Sr(e),e.avail_out===0))return n.last_flush=-1,fr}return r!==Cr?fr:n.wrap<=0?Ri:(n.wrap===2?(fe(n,e.adler&255),fe(n,e.adler>>8&255),fe(n,e.adler>>16&255),fe(n,e.adler>>24&255),fe(n,e.total_in&255),fe(n,e.total_in>>8&255),fe(n,e.total_in>>16&255),fe(n,e.total_in>>24&255)):(ft(n,e.adler>>>16),ft(n,e.adler&65535)),Sr(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?fr:Ri)}function gf(e){var r;return!e||!e.state?Ge:(r=e.state.status,r!==cs&&r!==Gs&&r!==qt&&r!==Mt&&r!==Kt&&r!==Ir&&r!==lt?Tr(e,Ge):(e.state=null,r===Ir?Tr(e,Mp):fr))}function wf(e,r){var s=r.length,n,o,i,t,p,m,c,h;if(!e||!e.state||(n=e.state,t=n.wrap,t===2||t===1&&n.status!==cs||n.lookahead))return Ge;for(t===1&&(e.adler=ia(e.adler,r,s,0)),n.wrap=0,s>=n.w_size&&(t===0&&(kr(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new He.Buf8(n.w_size),He.arraySet(h,r,s-n.w_size,n.w_size,0),r=h,s=n.w_size),p=e.avail_in,m=e.next_in,c=e.input,e.avail_in=s,e.next_in=0,e.input=r,Br(n);n.lookahead>=oe;){o=n.strstart,i=n.lookahead-(oe-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[o+oe-1])&n.hash_mask,n.prev[o&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=o,o++;while(--i);n.strstart=o,n.lookahead=oe-1,Br(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=oe-1,n.match_available=0,e.next_in=m,e.input=c,e.avail_in=p,n.wrap=t,fr}ur.deflateInit=yf;ur.deflateInit2=pa;ur.deflateReset=oa;ur.deflateResetKeep=aa;ur.deflateSetHeader=mf;ur.deflate=_f;ur.deflateEnd=gf;ur.deflateSetDictionary=wf;ur.deflateInfo="pako deflate (from Nodeca project)";var Ur={},ds=gr,fa=!0,la=!0;try{String.fromCharCode.apply(null,[0])}catch{fa=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{la=!1}var Pt=new ds.Buf8(256);for(var Pr=0;Pr<256;Pr++)Pt[Pr]=Pr>=252?6:Pr>=248?5:Pr>=240?4:Pr>=224?3:Pr>=192?2:1;Pt[254]=Pt[254]=1;Ur.string2buf=function(e){var r,s,n,o,i,t=e.length,p=0;for(o=0;o<t;o++)s=e.charCodeAt(o),(s&64512)===55296&&o+1<t&&(n=e.charCodeAt(o+1),(n&64512)===56320&&(s=65536+(s-55296<<10)+(n-56320),o++)),p+=s<128?1:s<2048?2:s<65536?3:4;for(r=new ds.Buf8(p),i=0,o=0;i<p;o++)s=e.charCodeAt(o),(s&64512)===55296&&o+1<t&&(n=e.charCodeAt(o+1),(n&64512)===56320&&(s=65536+(s-55296<<10)+(n-56320),o++)),s<128?r[i++]=s:s<2048?(r[i++]=192|s>>>6,r[i++]=128|s&63):s<65536?(r[i++]=224|s>>>12,r[i++]=128|s>>>6&63,r[i++]=128|s&63):(r[i++]=240|s>>>18,r[i++]=128|s>>>12&63,r[i++]=128|s>>>6&63,r[i++]=128|s&63);return r};function ua(e,r){if(r<65534&&(e.subarray&&la||!e.subarray&&fa))return String.fromCharCode.apply(null,ds.shrinkBuf(e,r));for(var s="",n=0;n<r;n++)s+=String.fromCharCode(e[n]);return s}Ur.buf2binstring=function(e){return ua(e,e.length)};Ur.binstring2buf=function(e){for(var r=new ds.Buf8(e.length),s=0,n=r.length;s<n;s++)r[s]=e.charCodeAt(s);return r};Ur.buf2string=function(e,r){var s,n,o,i,t=r||e.length,p=new Array(t*2);for(n=0,s=0;s<t;){if(o=e[s++],o<128){p[n++]=o;continue}if(i=Pt[o],i>4){p[n++]=65533,s+=i-1;continue}for(o&=i===2?31:i===3?15:7;i>1&&s<t;)o=o<<6|e[s++]&63,i--;if(i>1){p[n++]=65533;continue}o<65536?p[n++]=o:(o-=65536,p[n++]=55296|o>>10&1023,p[n++]=56320|o&1023)}return ua(p,n)};Ur.utf8border=function(e,r){var s;for(r=r||e.length,r>e.length&&(r=e.length),s=r-1;s>=0&&(e[s]&192)===128;)s--;return s<0||s===0?r:s+Pt[e[s]]>r?s:r};function bf(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var ca=bf,dt=ur,ht=gr,Zs=Ur,Vs=ci,vf=ca,da=Object.prototype.toString,Pf=0,Os=4,rt=0,Bi=1,Fi=2,Ef=-1,Sf=0,kf=8;function Fr(e){if(!(this instanceof Fr))return new Fr(e);this.options=ht.assign({level:Ef,method:kf,chunkSize:16384,windowBits:15,memLevel:8,strategy:Sf,to:""},e||{});var r=this.options;r.raw&&r.windowBits>0?r.windowBits=-r.windowBits:r.gzip&&r.windowBits>0&&r.windowBits<16&&(r.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new vf,this.strm.avail_out=0;var s=dt.deflateInit2(this.strm,r.level,r.method,r.windowBits,r.memLevel,r.strategy);if(s!==rt)throw new Error(Vs[s]);if(r.header&&dt.deflateSetHeader(this.strm,r.header),r.dictionary){var n;if(typeof r.dictionary=="string"?n=Zs.string2buf(r.dictionary):da.call(r.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(r.dictionary):n=r.dictionary,s=dt.deflateSetDictionary(this.strm,n),s!==rt)throw new Error(Vs[s]);this._dict_set=!0}}Fr.prototype.push=function(e,r){var s=this.strm,n=this.options.chunkSize,o,i;if(this.ended)return!1;i=r===~~r?r:r===!0?Os:Pf,typeof e=="string"?s.input=Zs.string2buf(e):da.call(e)==="[object ArrayBuffer]"?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(s.avail_out===0&&(s.output=new ht.Buf8(n),s.next_out=0,s.avail_out=n),o=dt.deflate(s,i),o!==Bi&&o!==rt)return this.onEnd(o),this.ended=!0,!1;(s.avail_out===0||s.avail_in===0&&(i===Os||i===Fi))&&(this.options.to==="string"?this.onData(Zs.buf2binstring(ht.shrinkBuf(s.output,s.next_out))):this.onData(ht.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||s.avail_out===0)&&o!==Bi);return i===Os?(o=dt.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===rt):(i===Fi&&(this.onEnd(rt),s.avail_out=0),!0)};Fr.prototype.onData=function(e){this.chunks.push(e)};Fr.prototype.onEnd=function(e){e===rt&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=ht.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function di(e,r){var s=new Fr(r);if(s.push(e,!0),s.err)throw s.msg||Vs[s.err];return s.result}function Af(e,r){return r=r||{},r.raw=!0,di(e,r)}function Tf(e,r){return r=r||{},r.gzip=!0,di(e,r)}At.Deflate=Fr;At.deflate=di;At.deflateRaw=Af;At.gzip=Tf;var Ot={},rr={},Dt=30,Cf=12,Of=function(r,s){var n,o,i,t,p,m,c,h,b,g,w,$,E,j,F,q,I,W,B,O,N,C,T,S,k;n=r.state,o=r.next_in,S=r.input,i=o+(r.avail_in-5),t=r.next_out,k=r.output,p=t-(s-r.avail_out),m=t+(r.avail_out-257),c=n.dmax,h=n.wsize,b=n.whave,g=n.wnext,w=n.window,$=n.hold,E=n.bits,j=n.lencode,F=n.distcode,q=(1<<n.lenbits)-1,I=(1<<n.distbits)-1;e:do{E<15&&($+=S[o++]<<E,E+=8,$+=S[o++]<<E,E+=8),W=j[$&q];r:for(;;){if(B=W>>>24,$>>>=B,E-=B,B=W>>>16&255,B===0)k[t++]=W&65535;else if(B&16){O=W&65535,B&=15,B&&(E<B&&($+=S[o++]<<E,E+=8),O+=$&(1<<B)-1,$>>>=B,E-=B),E<15&&($+=S[o++]<<E,E+=8,$+=S[o++]<<E,E+=8),W=F[$&I];t:for(;;){if(B=W>>>24,$>>>=B,E-=B,B=W>>>16&255,B&16){if(N=W&65535,B&=15,E<B&&($+=S[o++]<<E,E+=8,E<B&&($+=S[o++]<<E,E+=8)),N+=$&(1<<B)-1,N>c){r.msg="invalid distance too far back",n.mode=Dt;break e}if($>>>=B,E-=B,B=t-p,N>B){if(B=N-B,B>b&&n.sane){r.msg="invalid distance too far back",n.mode=Dt;break e}if(C=0,T=w,g===0){if(C+=h-B,B<O){O-=B;do k[t++]=w[C++];while(--B);C=t-N,T=k}}else if(g<B){if(C+=h+g-B,B-=g,B<O){O-=B;do k[t++]=w[C++];while(--B);if(C=0,g<O){B=g,O-=B;do k[t++]=w[C++];while(--B);C=t-N,T=k}}}else if(C+=g-B,B<O){O-=B;do k[t++]=w[C++];while(--B);C=t-N,T=k}for(;O>2;)k[t++]=T[C++],k[t++]=T[C++],k[t++]=T[C++],O-=3;O&&(k[t++]=T[C++],O>1&&(k[t++]=T[C++]))}else{C=t-N;do k[t++]=k[C++],k[t++]=k[C++],k[t++]=k[C++],O-=3;while(O>2);O&&(k[t++]=k[C++],O>1&&(k[t++]=k[C++]))}}else if(B&64){r.msg="invalid distance code",n.mode=Dt;break e}else{W=F[(W&65535)+($&(1<<B)-1)];continue t}break}}else if(B&64)if(B&32){n.mode=Cf;break e}else{r.msg="invalid literal/length code",n.mode=Dt;break e}else{W=j[(W&65535)+($&(1<<B)-1)];continue r}break}}while(o<i&&t<m);O=E>>3,o-=O,E-=O<<3,$&=(1<<E)-1,r.next_in=o,r.next_out=t,r.avail_in=o<i?5+(i-o):5-(o-i),r.avail_out=t<m?257+(m-t):257-(t-m),n.hold=$,n.bits=E},ji=gr,Vr=15,Ni=852,Wi=592,Ui=0,xs=1,qi=2,xf=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Lf=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],$f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],If=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],Hf=function(r,s,n,o,i,t,p,m){var c=m.bits,h=0,b=0,g=0,w=0,$=0,E=0,j=0,F=0,q=0,I=0,W,B,O,N,C,T=null,S=0,k,D=new ji.Buf16(Vr+1),R=new ji.Buf16(Vr+1),L=null,V=0,z,K,Y;for(h=0;h<=Vr;h++)D[h]=0;for(b=0;b<o;b++)D[s[n+b]]++;for($=c,w=Vr;w>=1&&D[w]===0;w--);if($>w&&($=w),w===0)return i[t++]=1<<24|64<<16|0,i[t++]=1<<24|64<<16|0,m.bits=1,0;for(g=1;g<w&&D[g]===0;g++);for($<g&&($=g),F=1,h=1;h<=Vr;h++)if(F<<=1,F-=D[h],F<0)return-1;if(F>0&&(r===Ui||w!==1))return-1;for(R[1]=0,h=1;h<Vr;h++)R[h+1]=R[h]+D[h];for(b=0;b<o;b++)s[n+b]!==0&&(p[R[s[n+b]]++]=b);if(r===Ui?(T=L=p,k=19):r===xs?(T=xf,S-=257,L=Lf,V-=257,k=256):(T=$f,L=If,k=-1),I=0,b=0,h=g,C=t,E=$,j=0,O=-1,q=1<<$,N=q-1,r===xs&&q>Ni||r===qi&&q>Wi)return 1;for(;;){z=h-j,p[b]<k?(K=0,Y=p[b]):p[b]>k?(K=L[V+p[b]],Y=T[S+p[b]]):(K=32+64,Y=0),W=1<<h-j,B=1<<E,g=B;do B-=W,i[C+(I>>j)+B]=z<<24|K<<16|Y|0;while(B!==0);for(W=1<<h-1;I&W;)W>>=1;if(W!==0?(I&=W-1,I+=W):I=0,b++,--D[h]===0){if(h===w)break;h=s[n+p[b]]}if(h>$&&(I&N)!==O){for(j===0&&(j=$),C+=g,E=h-j,F=1<<E;E+j<w&&(F-=D[E+j],!(F<=0));)E++,F<<=1;if(q+=1<<E,r===xs&&q>Ni||r===qi&&q>Wi)return 1;O=I&N,i[O]=$<<24|E<<16|C-t|0}}return I!==0&&(i[C+I]=h-j<<24|64<<16|0),m.bits=$,0},Ue=gr,Ys=ta,ar=sa,Rf=Of,mt=Hf,Df=0,ha=1,ma=2,Mi=4,Bf=5,Bt=6,jr=0,Ff=1,jf=2,Ze=-2,ya=-3,_a=-4,Nf=-5,Ki=8,ga=1,zi=2,Gi=3,Zi=4,Vi=5,Yi=6,Xi=7,Ji=8,Qi=9,en=10,es=11,hr=12,Ls=13,rn=14,$s=15,tn=16,sn=17,nn=18,an=19,Ft=20,jt=21,on=22,pn=23,fn=24,ln=25,un=26,Is=27,cn=28,dn=29,we=30,wa=31,Wf=32,Uf=852,qf=592,Mf=15,Kf=Mf;function hn(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function zf(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Ue.Buf16(320),this.work=new Ue.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ba(e){var r;return!e||!e.state?Ze:(r=e.state,e.total_in=e.total_out=r.total=0,e.msg="",r.wrap&&(e.adler=r.wrap&1),r.mode=ga,r.last=0,r.havedict=0,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new Ue.Buf32(Uf),r.distcode=r.distdyn=new Ue.Buf32(qf),r.sane=1,r.back=-1,jr)}function va(e){var r;return!e||!e.state?Ze:(r=e.state,r.wsize=0,r.whave=0,r.wnext=0,ba(e))}function Pa(e,r){var s,n;return!e||!e.state||(n=e.state,r<0?(s=0,r=-r):(s=(r>>4)+1,r<48&&(r&=15)),r&&(r<8||r>15))?Ze:(n.window!==null&&n.wbits!==r&&(n.window=null),n.wrap=s,n.wbits=r,va(e))}function Ea(e,r){var s,n;return e?(n=new zf,e.state=n,n.window=null,s=Pa(e,r),s!==jr&&(e.state=null),s):Ze}function Gf(e){return Ea(e,Kf)}var mn=!0,Hs,Rs;function Zf(e){if(mn){var r;for(Hs=new Ue.Buf32(512),Rs=new Ue.Buf32(32),r=0;r<144;)e.lens[r++]=8;for(;r<256;)e.lens[r++]=9;for(;r<280;)e.lens[r++]=7;for(;r<288;)e.lens[r++]=8;for(mt(ha,e.lens,0,288,Hs,0,e.work,{bits:9}),r=0;r<32;)e.lens[r++]=5;mt(ma,e.lens,0,32,Rs,0,e.work,{bits:5}),mn=!1}e.lencode=Hs,e.lenbits=9,e.distcode=Rs,e.distbits=5}function Sa(e,r,s,n){var o,i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Ue.Buf8(i.wsize)),n>=i.wsize?(Ue.arraySet(i.window,r,s-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):(o=i.wsize-i.wnext,o>n&&(o=n),Ue.arraySet(i.window,r,s-n,o,i.wnext),n-=o,n?(Ue.arraySet(i.window,r,s-n,n,0),i.wnext=n,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0}function Vf(e,r){var s,n,o,i,t,p,m,c,h,b,g,w,$,E,j=0,F,q,I,W,B,O,N,C,T=new Ue.Buf8(4),S,k,D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Ze;s=e.state,s.mode===hr&&(s.mode=Ls),t=e.next_out,o=e.output,m=e.avail_out,i=e.next_in,n=e.input,p=e.avail_in,c=s.hold,h=s.bits,b=p,g=m,C=jr;e:for(;;)switch(s.mode){case ga:if(s.wrap===0){s.mode=Ls;break}for(;h<16;){if(p===0)break e;p--,c+=n[i++]<<h,h+=8}if(s.wrap&2&&c===35615){s.check=0,T[0]=c&255,T[1]=c>>>8&255,s.check=ar(s.check,T,2,0),c=0,h=0,s.mode=zi;break}if(s.flags=0,s.head&&(s.head.done=!1),!(s.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",s.mode=we;break}if((c&15)!==Ki){e.msg="unknown compression method",s.mode=we;break}if(c>>>=4,h-=4,N=(c&15)+8,s.wbits===0)s.wbits=N;else if(N>s.wbits){e.msg="invalid window size",s.mode=we;break}s.dmax=1<<N,e.adler=s.check=1,s.mode=c&512?en:hr,c=0,h=0;break;case zi:for(;h<16;){if(p===0)break e;p--,c+=n[i++]<<h,h+=8}if(s.flags=c,(s.flags&255)!==Ki){e.msg="unknown compression method",s.mode=we;break}if(s.flags&57344){e.msg="unknown header flags set",s.mode=we;break}s.head&&(s.head.text=c>>8&1),s.flags&512&&(T[0]=c&255,T[1]=c>>>8&255,s.check=ar(s.check,T,2,0)),c=0,h=0,s.mode=Gi;case Gi:for(;h<32;){if(p===0)break e;p--,c+=n[i++]<<h,h+=8}s.head&&(s.head.time=c),s.flags&512&&(T[0]=c&255,T[1]=c>>>8&255,T[2]=c>>>16&255,T[3]=c>>>24&255,s.check=ar(s.check,T,4,0)),c=0,h=0,s.mode=Zi;case Zi:for(;h<16;){if(p===0)break e;p--,c+=n[i++]<<h,h+=8}s.head&&(s.head.xflags=c&255,s.head.os=c>>8),s.flags&512&&(T[0]=c&255,T[1]=c>>>8&255,s.check=ar(s.check,T,2,0)),c=0,h=0,s.mode=Vi;case Vi:if(s.flags&1024){for(;h<16;){if(p===0)break e;p--,c+=n[i++]<<h,h+=8}s.length=c,s.head&&(s.head.extra_len=c),s.flags&512&&(T[0]=c&255,T[1]=c>>>8&255,s.check=ar(s.check,T,2,0)),c=0,h=0}else s.head&&(s.head.extra=null);s.mode=Yi;case Yi:if(s.flags&1024&&(w=s.length,w>p&&(w=p),w&&(s.head&&(N=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Array(s.head.extra_len)),Ue.arraySet(s.head.extra,n,i,w,N)),s.flags&512&&(s.check=ar(s.check,n,w,i)),p-=w,i+=w,s.length-=w),s.length))break e;s.length=0,s.mode=Xi;case Xi:if(s.flags&2048){if(p===0)break e;w=0;do N=n[i+w++],s.head&&N&&s.length<65536&&(s.head.name+=String.fromCharCode(N));while(N&&w<p);if(s.flags&512&&(s.check=ar(s.check,n,w,i)),p-=w,i+=w,N)break e}else s.head&&(s.head.name=null);s.length=0,s.mode=Ji;case Ji:if(s.flags&4096){if(p===0)break e;w=0;do N=n[i+w++],s.head&&N&&s.length<65536&&(s.head.comment+=String.fromCharCode(N));while(N&&w<p);if(s.flags&512&&(s.check=ar(s.check,n,w,i)),p-=w,i+=w,N)break e}else s.head&&(s.head.comment=null);s.mode=Qi;case Qi:if(s.flags&512){for(;h<16;){if(p===0)break e;p--,c+=n[i++]<<h,h+=8}if(c!==(s.check&65535)){e.msg="header crc mismatch",s.mode=we;break}c=0,h=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),e.adler=s.check=0,s.mode=hr;break;case en:for(;h<32;){if(p===0)break e;p--,c+=n[i++]<<h,h+=8}e.adler=s.check=hn(c),c=0,h=0,s.mode=es;case es:if(s.havedict===0)return e.next_out=t,e.avail_out=m,e.next_in=i,e.avail_in=p,s.hold=c,s.bits=h,jf;e.adler=s.check=1,s.mode=hr;case hr:if(r===Bf||r===Bt)break e;case Ls:if(s.last){c>>>=h&7,h-=h&7,s.mode=Is;break}for(;h<3;){if(p===0)break e;p--,c+=n[i++]<<h,h+=8}switch(s.last=c&1,c>>>=1,h-=1,c&3){case 0:s.mode=rn;break;case 1:if(Zf(s),s.mode=Ft,r===Bt){c>>>=2,h-=2;break e}break;case 2:s.mode=sn;break;case 3:e.msg="invalid block type",s.mode=we}c>>>=2,h-=2;break;case rn:for(c>>>=h&7,h-=h&7;h<32;){if(p===0)break e;p--,c+=n[i++]<<h,h+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",s.mode=we;break}if(s.length=c&65535,c=0,h=0,s.mode=$s,r===Bt)break e;case $s:s.mode=tn;case tn:if(w=s.length,w){if(w>p&&(w=p),w>m&&(w=m),w===0)break e;Ue.arraySet(o,n,i,w,t),p-=w,i+=w,m-=w,t+=w,s.length-=w;break}s.mode=hr;break;case sn:for(;h<14;){if(p===0)break e;p--,c+=n[i++]<<h,h+=8}if(s.nlen=(c&31)+257,c>>>=5,h-=5,s.ndist=(c&31)+1,c>>>=5,h-=5,s.ncode=(c&15)+4,c>>>=4,h-=4,s.nlen>286||s.ndist>30){e.msg="too many length or distance symbols",s.mode=we;break}s.have=0,s.mode=nn;case nn:for(;s.have<s.ncode;){for(;h<3;){if(p===0)break e;p--,c+=n[i++]<<h,h+=8}s.lens[D[s.have++]]=c&7,c>>>=3,h-=3}for(;s.have<19;)s.lens[D[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,S={bits:s.lenbits},C=mt(Df,s.lens,0,19,s.lencode,0,s.work,S),s.lenbits=S.bits,C){e.msg="invalid code lengths set",s.mode=we;break}s.have=0,s.mode=an;case an:for(;s.have<s.nlen+s.ndist;){for(;j=s.lencode[c&(1<<s.lenbits)-1],F=j>>>24,q=j>>>16&255,I=j&65535,!(F<=h);){if(p===0)break e;p--,c+=n[i++]<<h,h+=8}if(I<16)c>>>=F,h-=F,s.lens[s.have++]=I;else{if(I===16){for(k=F+2;h<k;){if(p===0)break e;p--,c+=n[i++]<<h,h+=8}if(c>>>=F,h-=F,s.have===0){e.msg="invalid bit length repeat",s.mode=we;break}N=s.lens[s.have-1],w=3+(c&3),c>>>=2,h-=2}else if(I===17){for(k=F+3;h<k;){if(p===0)break e;p--,c+=n[i++]<<h,h+=8}c>>>=F,h-=F,N=0,w=3+(c&7),c>>>=3,h-=3}else{for(k=F+7;h<k;){if(p===0)break e;p--,c+=n[i++]<<h,h+=8}c>>>=F,h-=F,N=0,w=11+(c&127),c>>>=7,h-=7}if(s.have+w>s.nlen+s.ndist){e.msg="invalid bit length repeat",s.mode=we;break}for(;w--;)s.lens[s.have++]=N}}if(s.mode===we)break;if(s.lens[256]===0){e.msg="invalid code -- missing end-of-block",s.mode=we;break}if(s.lenbits=9,S={bits:s.lenbits},C=mt(ha,s.lens,0,s.nlen,s.lencode,0,s.work,S),s.lenbits=S.bits,C){e.msg="invalid literal/lengths set",s.mode=we;break}if(s.distbits=6,s.distcode=s.distdyn,S={bits:s.distbits},C=mt(ma,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,S),s.distbits=S.bits,C){e.msg="invalid distances set",s.mode=we;break}if(s.mode=Ft,r===Bt)break e;case Ft:s.mode=jt;case jt:if(p>=6&&m>=258){e.next_out=t,e.avail_out=m,e.next_in=i,e.avail_in=p,s.hold=c,s.bits=h,Rf(e,g),t=e.next_out,o=e.output,m=e.avail_out,i=e.next_in,n=e.input,p=e.avail_in,c=s.hold,h=s.bits,s.mode===hr&&(s.back=-1);break}for(s.back=0;j=s.lencode[c&(1<<s.lenbits)-1],F=j>>>24,q=j>>>16&255,I=j&65535,!(F<=h);){if(p===0)break e;p--,c+=n[i++]<<h,h+=8}if(q&&!(q&240)){for(W=F,B=q,O=I;j=s.lencode[O+((c&(1<<W+B)-1)>>W)],F=j>>>24,q=j>>>16&255,I=j&65535,!(W+F<=h);){if(p===0)break e;p--,c+=n[i++]<<h,h+=8}c>>>=W,h-=W,s.back+=W}if(c>>>=F,h-=F,s.back+=F,s.length=I,q===0){s.mode=un;break}if(q&32){s.back=-1,s.mode=hr;break}if(q&64){e.msg="invalid literal/length code",s.mode=we;break}s.extra=q&15,s.mode=on;case on:if(s.extra){for(k=s.extra;h<k;){if(p===0)break e;p--,c+=n[i++]<<h,h+=8}s.length+=c&(1<<s.extra)-1,c>>>=s.extra,h-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=pn;case pn:for(;j=s.distcode[c&(1<<s.distbits)-1],F=j>>>24,q=j>>>16&255,I=j&65535,!(F<=h);){if(p===0)break e;p--,c+=n[i++]<<h,h+=8}if(!(q&240)){for(W=F,B=q,O=I;j=s.distcode[O+((c&(1<<W+B)-1)>>W)],F=j>>>24,q=j>>>16&255,I=j&65535,!(W+F<=h);){if(p===0)break e;p--,c+=n[i++]<<h,h+=8}c>>>=W,h-=W,s.back+=W}if(c>>>=F,h-=F,s.back+=F,q&64){e.msg="invalid distance code",s.mode=we;break}s.offset=I,s.extra=q&15,s.mode=fn;case fn:if(s.extra){for(k=s.extra;h<k;){if(p===0)break e;p--,c+=n[i++]<<h,h+=8}s.offset+=c&(1<<s.extra)-1,c>>>=s.extra,h-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){e.msg="invalid distance too far back",s.mode=we;break}s.mode=ln;case ln:if(m===0)break e;if(w=g-m,s.offset>w){if(w=s.offset-w,w>s.whave&&s.sane){e.msg="invalid distance too far back",s.mode=we;break}w>s.wnext?(w-=s.wnext,$=s.wsize-w):$=s.wnext-w,w>s.length&&(w=s.length),E=s.window}else E=o,$=t-s.offset,w=s.length;w>m&&(w=m),m-=w,s.length-=w;do o[t++]=E[$++];while(--w);s.length===0&&(s.mode=jt);break;case un:if(m===0)break e;o[t++]=s.length,m--,s.mode=jt;break;case Is:if(s.wrap){for(;h<32;){if(p===0)break e;p--,c|=n[i++]<<h,h+=8}if(g-=m,e.total_out+=g,s.total+=g,g&&(e.adler=s.check=s.flags?ar(s.check,o,g,t-g):Ys(s.check,o,g,t-g)),g=m,(s.flags?c:hn(c))!==s.check){e.msg="incorrect data check",s.mode=we;break}c=0,h=0}s.mode=cn;case cn:if(s.wrap&&s.flags){for(;h<32;){if(p===0)break e;p--,c+=n[i++]<<h,h+=8}if(c!==(s.total&4294967295)){e.msg="incorrect length check",s.mode=we;break}c=0,h=0}s.mode=dn;case dn:C=Ff;break e;case we:C=ya;break e;case wa:return _a;case Wf:default:return Ze}return e.next_out=t,e.avail_out=m,e.next_in=i,e.avail_in=p,s.hold=c,s.bits=h,(s.wsize||g!==e.avail_out&&s.mode<we&&(s.mode<Is||r!==Mi))&&Sa(e,e.output,e.next_out,g-e.avail_out),b-=e.avail_in,g-=e.avail_out,e.total_in+=b,e.total_out+=g,s.total+=g,s.wrap&&g&&(e.adler=s.check=s.flags?ar(s.check,o,g,e.next_out-g):Ys(s.check,o,g,e.next_out-g)),e.data_type=s.bits+(s.last?64:0)+(s.mode===hr?128:0)+(s.mode===Ft||s.mode===$s?256:0),(b===0&&g===0||r===Mi)&&C===jr&&(C=Nf),C}function Yf(e){if(!e||!e.state)return Ze;var r=e.state;return r.window&&(r.window=null),e.state=null,jr}function Xf(e,r){var s;return!e||!e.state||(s=e.state,!(s.wrap&2))?Ze:(s.head=r,r.done=!1,jr)}function Jf(e,r){var s=r.length,n,o,i;return!e||!e.state||(n=e.state,n.wrap!==0&&n.mode!==es)?Ze:n.mode===es&&(o=1,o=Ys(o,r,s,0),o!==n.check)?ya:(i=Sa(e,r,s,s),i?(n.mode=wa,_a):(n.havedict=1,jr))}rr.inflateReset=va;rr.inflateReset2=Pa;rr.inflateResetKeep=ba;rr.inflateInit=Gf;rr.inflateInit2=Ea;rr.inflate=Vf;rr.inflateEnd=Yf;rr.inflateGetHeader=Xf;rr.inflateSetDictionary=Jf;rr.inflateInfo="pako inflate (from Nodeca project)";var ka={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function Qf(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var el=Qf,tt=rr,yt=gr,zt=Ur,Ee=ka,Xs=ci,rl=ca,tl=el,Aa=Object.prototype.toString;function Nr(e){if(!(this instanceof Nr))return new Nr(e);this.options=yt.assign({chunkSize:16384,windowBits:0,to:""},e||{});var r=this.options;r.raw&&r.windowBits>=0&&r.windowBits<16&&(r.windowBits=-r.windowBits,r.windowBits===0&&(r.windowBits=-15)),r.windowBits>=0&&r.windowBits<16&&!(e&&e.windowBits)&&(r.windowBits+=32),r.windowBits>15&&r.windowBits<48&&(r.windowBits&15||(r.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new rl,this.strm.avail_out=0;var s=tt.inflateInit2(this.strm,r.windowBits);if(s!==Ee.Z_OK)throw new Error(Xs[s]);if(this.header=new tl,tt.inflateGetHeader(this.strm,this.header),r.dictionary&&(typeof r.dictionary=="string"?r.dictionary=zt.string2buf(r.dictionary):Aa.call(r.dictionary)==="[object ArrayBuffer]"&&(r.dictionary=new Uint8Array(r.dictionary)),r.raw&&(s=tt.inflateSetDictionary(this.strm,r.dictionary),s!==Ee.Z_OK)))throw new Error(Xs[s])}Nr.prototype.push=function(e,r){var s=this.strm,n=this.options.chunkSize,o=this.options.dictionary,i,t,p,m,c,h=!1;if(this.ended)return!1;t=r===~~r?r:r===!0?Ee.Z_FINISH:Ee.Z_NO_FLUSH,typeof e=="string"?s.input=zt.binstring2buf(e):Aa.call(e)==="[object ArrayBuffer]"?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(s.avail_out===0&&(s.output=new yt.Buf8(n),s.next_out=0,s.avail_out=n),i=tt.inflate(s,Ee.Z_NO_FLUSH),i===Ee.Z_NEED_DICT&&o&&(i=tt.inflateSetDictionary(this.strm,o)),i===Ee.Z_BUF_ERROR&&h===!0&&(i=Ee.Z_OK,h=!1),i!==Ee.Z_STREAM_END&&i!==Ee.Z_OK)return this.onEnd(i),this.ended=!0,!1;s.next_out&&(s.avail_out===0||i===Ee.Z_STREAM_END||s.avail_in===0&&(t===Ee.Z_FINISH||t===Ee.Z_SYNC_FLUSH))&&(this.options.to==="string"?(p=zt.utf8border(s.output,s.next_out),m=s.next_out-p,c=zt.buf2string(s.output,p),s.next_out=m,s.avail_out=n-m,m&&yt.arraySet(s.output,s.output,p,m,0),this.onData(c)):this.onData(yt.shrinkBuf(s.output,s.next_out))),s.avail_in===0&&s.avail_out===0&&(h=!0)}while((s.avail_in>0||s.avail_out===0)&&i!==Ee.Z_STREAM_END);return i===Ee.Z_STREAM_END&&(t=Ee.Z_FINISH),t===Ee.Z_FINISH?(i=tt.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Ee.Z_OK):(t===Ee.Z_SYNC_FLUSH&&(this.onEnd(Ee.Z_OK),s.avail_out=0),!0)};Nr.prototype.onData=function(e){this.chunks.push(e)};Nr.prototype.onEnd=function(e){e===Ee.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=yt.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function hi(e,r){var s=new Nr(r);if(s.push(e,!0),s.err)throw s.msg||Xs[s.err];return s.result}function sl(e,r){return r=r||{},r.raw=!0,hi(e,r)}Ot.Inflate=Nr;Ot.inflate=hi;Ot.inflateRaw=sl;Ot.ungzip=hi;var il=gr.assign,nl=At,al=Ot,ol=ka,Ta={};il(Ta,nl,al,ol);var pl=Ta;const Ca=ri(pl);async function fl(e,r){const s=new Bn(e);let n=await s.read(4);if(n=n.toString("utf8"),n!=="PACK")throw new be(`Invalid PACK header '${n}'`);let o=await s.read(4);if(o=o.readUInt32BE(0),o!==2)throw new be(`Invalid packfile version: ${o}`);let i=await s.read(4);if(i=i.readUInt32BE(0),!(i<1))for(;!s.eof()&&i--;){const t=s.tell(),{type:p,length:m,ofs:c,reference:h}=await ll(s),b=new Ca.Inflate;for(;!b.result;){const g=await s.chunk();if(!g)break;if(b.push(g,!1),b.err)throw new be(`Pako error: ${b.msg}`);if(b.result){if(b.result.length!==m)throw new be("Inflated object size is different from that stated in packfile.");await s.undo(),await s.read(g.length-b.strm.avail_in);const w=s.tell();await r({data:b.result,type:p,num:i,offset:t,end:w,reference:h,ofs:c})}}}}async function ll(e){let r=await e.byte();const s=r>>4&7;let n=r&15;if(r&128){let t=4;do r=await e.byte(),n|=(r&127)<<t,t+=7;while(r&128)}let o,i;if(s===6){let t=0;o=0;const p=[];do r=await e.byte(),o|=(r&127)<<t,t+=7,p.push(r);while(r&128);i=Buffer.from(p)}return s===7&&(i=await e.read(20)),{type:s,length:n,ofs:o,reference:i}}let ul=!1;async function cl(e){return ul?dl(e):Ca.inflate(e)}async function dl(e){const r=new DecompressionStream("deflate"),s=new Blob([e]).stream().pipeThrough(r);return new Uint8Array(await new Response(s).arrayBuffer())}var Js={exports:{}};typeof Object.create=="function"?Js.exports=function(r,s){s&&(r.super_=s,r.prototype=Object.create(s.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:Js.exports=function(r,s){if(s){r.super_=s;var n=function(){};n.prototype=s.prototype,r.prototype=new n,r.prototype.constructor=r}};var hl=Js.exports,Qs={exports:{}},_r={},hs={};hs.byteLength=_l;hs.toByteArray=wl;hs.fromByteArray=Pl;var lr=[],Ke=[],ml=typeof Uint8Array<"u"?Uint8Array:Array,Ds="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Yr=0,yl=Ds.length;Yr<yl;++Yr)lr[Yr]=Ds[Yr],Ke[Ds.charCodeAt(Yr)]=Yr;Ke["-".charCodeAt(0)]=62;Ke["_".charCodeAt(0)]=63;function Oa(e){var r=e.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=e.indexOf("=");s===-1&&(s=r);var n=s===r?0:4-s%4;return[s,n]}function _l(e){var r=Oa(e),s=r[0],n=r[1];return(s+n)*3/4-n}function gl(e,r,s){return(r+s)*3/4-s}function wl(e){var r,s=Oa(e),n=s[0],o=s[1],i=new ml(gl(e,n,o)),t=0,p=o>0?n-4:n,m;for(m=0;m<p;m+=4)r=Ke[e.charCodeAt(m)]<<18|Ke[e.charCodeAt(m+1)]<<12|Ke[e.charCodeAt(m+2)]<<6|Ke[e.charCodeAt(m+3)],i[t++]=r>>16&255,i[t++]=r>>8&255,i[t++]=r&255;return o===2&&(r=Ke[e.charCodeAt(m)]<<2|Ke[e.charCodeAt(m+1)]>>4,i[t++]=r&255),o===1&&(r=Ke[e.charCodeAt(m)]<<10|Ke[e.charCodeAt(m+1)]<<4|Ke[e.charCodeAt(m+2)]>>2,i[t++]=r>>8&255,i[t++]=r&255),i}function bl(e){return lr[e>>18&63]+lr[e>>12&63]+lr[e>>6&63]+lr[e&63]}function vl(e,r,s){for(var n,o=[],i=r;i<s;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),o.push(bl(n));return o.join("")}function Pl(e){for(var r,s=e.length,n=s%3,o=[],i=16383,t=0,p=s-n;t<p;t+=i)o.push(vl(e,t,t+i>p?p:t+i));return n===1?(r=e[s-1],o.push(lr[r>>2]+lr[r<<4&63]+"==")):n===2&&(r=(e[s-2]<<8)+e[s-1],o.push(lr[r>>10]+lr[r>>4&63]+lr[r<<2&63]+"=")),o.join("")}var mi={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */mi.read=function(e,r,s,n,o){var i,t,p=o*8-n-1,m=(1<<p)-1,c=m>>1,h=-7,b=s?o-1:0,g=s?-1:1,w=e[r+b];for(b+=g,i=w&(1<<-h)-1,w>>=-h,h+=p;h>0;i=i*256+e[r+b],b+=g,h-=8);for(t=i&(1<<-h)-1,i>>=-h,h+=n;h>0;t=t*256+e[r+b],b+=g,h-=8);if(i===0)i=1-c;else{if(i===m)return t?NaN:(w?-1:1)*(1/0);t=t+Math.pow(2,n),i=i-c}return(w?-1:1)*t*Math.pow(2,i-n)};mi.write=function(e,r,s,n,o,i){var t,p,m,c=i*8-o-1,h=(1<<c)-1,b=h>>1,g=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=n?0:i-1,$=n?1:-1,E=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(p=isNaN(r)?1:0,t=h):(t=Math.floor(Math.log(r)/Math.LN2),r*(m=Math.pow(2,-t))<1&&(t--,m*=2),t+b>=1?r+=g/m:r+=g*Math.pow(2,1-b),r*m>=2&&(t++,m/=2),t+b>=h?(p=0,t=h):t+b>=1?(p=(r*m-1)*Math.pow(2,o),t=t+b):(p=r*Math.pow(2,b-1)*Math.pow(2,o),t=0));o>=8;e[s+w]=p&255,w+=$,p/=256,o-=8);for(t=t<<o|p,c+=o;c>0;e[s+w]=t&255,w+=$,t/=256,c-=8);e[s+w-$]|=E*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const r=hs,s=mi,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=p,e.SlowBuffer=q,e.INSPECT_MAX_BYTES=50;const o=2147483647;e.kMaxLength=o,p.TYPED_ARRAY_SUPPORT=i(),!p.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const u=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(u,f),u.foo()===42}catch{return!1}}Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}});function t(u){if(u>o)throw new RangeError('The value "'+u+'" is invalid for option "size"');const f=new Uint8Array(u);return Object.setPrototypeOf(f,p.prototype),f}function p(u,f,l){if(typeof u=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(u)}return m(u,f,l)}p.poolSize=8192;function m(u,f,l){if(typeof u=="string")return g(u,f);if(ArrayBuffer.isView(u))return $(u);if(u==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u);if($e(u,ArrayBuffer)||u&&$e(u.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($e(u,SharedArrayBuffer)||u&&$e(u.buffer,SharedArrayBuffer)))return E(u,f,l);if(typeof u=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const _=u.valueOf&&u.valueOf();if(_!=null&&_!==u)return p.from(_,f,l);const v=j(u);if(v)return v;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof u[Symbol.toPrimitive]=="function")return p.from(u[Symbol.toPrimitive]("string"),f,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u)}p.from=function(u,f,l){return m(u,f,l)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array);function c(u){if(typeof u!="number")throw new TypeError('"size" argument must be of type number');if(u<0)throw new RangeError('The value "'+u+'" is invalid for option "size"')}function h(u,f,l){return c(u),u<=0?t(u):f!==void 0?typeof l=="string"?t(u).fill(f,l):t(u).fill(f):t(u)}p.alloc=function(u,f,l){return h(u,f,l)};function b(u){return c(u),t(u<0?0:F(u)|0)}p.allocUnsafe=function(u){return b(u)},p.allocUnsafeSlow=function(u){return b(u)};function g(u,f){if((typeof f!="string"||f==="")&&(f="utf8"),!p.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const l=I(u,f)|0;let _=t(l);const v=_.write(u,f);return v!==l&&(_=_.slice(0,v)),_}function w(u){const f=u.length<0?0:F(u.length)|0,l=t(f);for(let _=0;_<f;_+=1)l[_]=u[_]&255;return l}function $(u){if($e(u,Uint8Array)){const f=new Uint8Array(u);return E(f.buffer,f.byteOffset,f.byteLength)}return w(u)}function E(u,f,l){if(f<0||u.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(u.byteLength<f+(l||0))throw new RangeError('"length" is outside of buffer bounds');let _;return f===void 0&&l===void 0?_=new Uint8Array(u):l===void 0?_=new Uint8Array(u,f):_=new Uint8Array(u,f,l),Object.setPrototypeOf(_,p.prototype),_}function j(u){if(p.isBuffer(u)){const f=F(u.length)|0,l=t(f);return l.length===0||u.copy(l,0,0,f),l}if(u.length!==void 0)return typeof u.length!="number"||xe(u.length)?t(0):w(u);if(u.type==="Buffer"&&Array.isArray(u.data))return w(u.data)}function F(u){if(u>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return u|0}function q(u){return+u!=u&&(u=0),p.alloc(+u)}p.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==p.prototype},p.compare=function(f,l){if($e(f,Uint8Array)&&(f=p.from(f,f.offset,f.byteLength)),$e(l,Uint8Array)&&(l=p.from(l,l.offset,l.byteLength)),!p.isBuffer(f)||!p.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===l)return 0;let _=f.length,v=l.length;for(let A=0,H=Math.min(_,v);A<H;++A)if(f[A]!==l[A]){_=f[A],v=l[A];break}return _<v?-1:v<_?1:0},p.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(f,l){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return p.alloc(0);let _;if(l===void 0)for(l=0,_=0;_<f.length;++_)l+=f[_].length;const v=p.allocUnsafe(l);let A=0;for(_=0;_<f.length;++_){let H=f[_];if($e(H,Uint8Array))A+H.length>v.length?(p.isBuffer(H)||(H=p.from(H)),H.copy(v,A)):Uint8Array.prototype.set.call(v,H,A);else if(p.isBuffer(H))H.copy(v,A);else throw new TypeError('"list" argument must be an Array of Buffers');A+=H.length}return v};function I(u,f){if(p.isBuffer(u))return u.length;if(ArrayBuffer.isView(u)||$e(u,ArrayBuffer))return u.byteLength;if(typeof u!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof u);const l=u.length,_=arguments.length>2&&arguments[2]===!0;if(!_&&l===0)return 0;let v=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return vr(u).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return Or(u).length;default:if(v)return _?-1:vr(u).length;f=(""+f).toLowerCase(),v=!0}}p.byteLength=I;function W(u,f,l){let _=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,f>>>=0,l<=f))return"";for(u||(u="utf8");;)switch(u){case"hex":return G(this,f,l);case"utf8":case"utf-8":return L(this,f,l);case"ascii":return K(this,f,l);case"latin1":case"binary":return Y(this,f,l);case"base64":return R(this,f,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,f,l);default:if(_)throw new TypeError("Unknown encoding: "+u);u=(u+"").toLowerCase(),_=!0}}p.prototype._isBuffer=!0;function B(u,f,l){const _=u[f];u[f]=u[l],u[l]=_}p.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<f;l+=2)B(this,l,l+1);return this},p.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<f;l+=4)B(this,l,l+3),B(this,l+1,l+2);return this},p.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<f;l+=8)B(this,l,l+7),B(this,l+1,l+6),B(this,l+2,l+5),B(this,l+3,l+4);return this},p.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?L(this,0,f):W.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(f){if(!p.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:p.compare(this,f)===0},p.prototype.inspect=function(){let f="";const l=e.INSPECT_MAX_BYTES;return f=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(f+=" ... "),"<Buffer "+f+">"},n&&(p.prototype[n]=p.prototype.inspect),p.prototype.compare=function(f,l,_,v,A){if($e(f,Uint8Array)&&(f=p.from(f,f.offset,f.byteLength)),!p.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(l===void 0&&(l=0),_===void 0&&(_=f?f.length:0),v===void 0&&(v=0),A===void 0&&(A=this.length),l<0||_>f.length||v<0||A>this.length)throw new RangeError("out of range index");if(v>=A&&l>=_)return 0;if(v>=A)return-1;if(l>=_)return 1;if(l>>>=0,_>>>=0,v>>>=0,A>>>=0,this===f)return 0;let H=A-v,Q=_-l;const ye=Math.min(H,Q),he=this.slice(v,A),me=f.slice(l,_);for(let ae=0;ae<ye;++ae)if(he[ae]!==me[ae]){H=he[ae],Q=me[ae];break}return H<Q?-1:Q<H?1:0};function O(u,f,l,_,v){if(u.length===0)return-1;if(typeof l=="string"?(_=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,xe(l)&&(l=v?0:u.length-1),l<0&&(l=u.length+l),l>=u.length){if(v)return-1;l=u.length-1}else if(l<0)if(v)l=0;else return-1;if(typeof f=="string"&&(f=p.from(f,_)),p.isBuffer(f))return f.length===0?-1:N(u,f,l,_,v);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?v?Uint8Array.prototype.indexOf.call(u,f,l):Uint8Array.prototype.lastIndexOf.call(u,f,l):N(u,[f],l,_,v);throw new TypeError("val must be string, number or Buffer")}function N(u,f,l,_,v){let A=1,H=u.length,Q=f.length;if(_!==void 0&&(_=String(_).toLowerCase(),_==="ucs2"||_==="ucs-2"||_==="utf16le"||_==="utf-16le")){if(u.length<2||f.length<2)return-1;A=2,H/=2,Q/=2,l/=2}function ye(me,ae){return A===1?me[ae]:me.readUInt16BE(ae*A)}let he;if(v){let me=-1;for(he=l;he<H;he++)if(ye(u,he)===ye(f,me===-1?0:he-me)){if(me===-1&&(me=he),he-me+1===Q)return me*A}else me!==-1&&(he-=he-me),me=-1}else for(l+Q>H&&(l=H-Q),he=l;he>=0;he--){let me=!0;for(let ae=0;ae<Q;ae++)if(ye(u,he+ae)!==ye(f,ae)){me=!1;break}if(me)return he}return-1}p.prototype.includes=function(f,l,_){return this.indexOf(f,l,_)!==-1},p.prototype.indexOf=function(f,l,_){return O(this,f,l,_,!0)},p.prototype.lastIndexOf=function(f,l,_){return O(this,f,l,_,!1)};function C(u,f,l,_){l=Number(l)||0;const v=u.length-l;_?(_=Number(_),_>v&&(_=v)):_=v;const A=f.length;_>A/2&&(_=A/2);let H;for(H=0;H<_;++H){const Q=parseInt(f.substr(H*2,2),16);if(xe(Q))return H;u[l+H]=Q}return H}function T(u,f,l,_){return qe(vr(f,u.length-l),u,l,_)}function S(u,f,l,_){return qe(Kr(f),u,l,_)}function k(u,f,l,_){return qe(Or(f),u,l,_)}function D(u,f,l,_){return qe(dr(f,u.length-l),u,l,_)}p.prototype.write=function(f,l,_,v){if(l===void 0)v="utf8",_=this.length,l=0;else if(_===void 0&&typeof l=="string")v=l,_=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(_)?(_=_>>>0,v===void 0&&(v="utf8")):(v=_,_=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const A=this.length-l;if((_===void 0||_>A)&&(_=A),f.length>0&&(_<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");v||(v="utf8");let H=!1;for(;;)switch(v){case"hex":return C(this,f,l,_);case"utf8":case"utf-8":return T(this,f,l,_);case"ascii":case"latin1":case"binary":return S(this,f,l,_);case"base64":return k(this,f,l,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,f,l,_);default:if(H)throw new TypeError("Unknown encoding: "+v);v=(""+v).toLowerCase(),H=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(u,f,l){return f===0&&l===u.length?r.fromByteArray(u):r.fromByteArray(u.slice(f,l))}function L(u,f,l){l=Math.min(u.length,l);const _=[];let v=f;for(;v<l;){const A=u[v];let H=null,Q=A>239?4:A>223?3:A>191?2:1;if(v+Q<=l){let ye,he,me,ae;switch(Q){case 1:A<128&&(H=A);break;case 2:ye=u[v+1],(ye&192)===128&&(ae=(A&31)<<6|ye&63,ae>127&&(H=ae));break;case 3:ye=u[v+1],he=u[v+2],(ye&192)===128&&(he&192)===128&&(ae=(A&15)<<12|(ye&63)<<6|he&63,ae>2047&&(ae<55296||ae>57343)&&(H=ae));break;case 4:ye=u[v+1],he=u[v+2],me=u[v+3],(ye&192)===128&&(he&192)===128&&(me&192)===128&&(ae=(A&15)<<18|(ye&63)<<12|(he&63)<<6|me&63,ae>65535&&ae<1114112&&(H=ae))}}H===null?(H=65533,Q=1):H>65535&&(H-=65536,_.push(H>>>10&1023|55296),H=56320|H&1023),_.push(H),v+=Q}return z(_)}const V=4096;function z(u){const f=u.length;if(f<=V)return String.fromCharCode.apply(String,u);let l="",_=0;for(;_<f;)l+=String.fromCharCode.apply(String,u.slice(_,_+=V));return l}function K(u,f,l){let _="";l=Math.min(u.length,l);for(let v=f;v<l;++v)_+=String.fromCharCode(u[v]&127);return _}function Y(u,f,l){let _="";l=Math.min(u.length,l);for(let v=f;v<l;++v)_+=String.fromCharCode(u[v]);return _}function G(u,f,l){const _=u.length;(!f||f<0)&&(f=0),(!l||l<0||l>_)&&(l=_);let v="";for(let A=f;A<l;++A)v+=zr[u[A]];return v}function se(u,f,l){const _=u.slice(f,l);let v="";for(let A=0;A<_.length-1;A+=2)v+=String.fromCharCode(_[A]+_[A+1]*256);return v}p.prototype.slice=function(f,l){const _=this.length;f=~~f,l=l===void 0?_:~~l,f<0?(f+=_,f<0&&(f=0)):f>_&&(f=_),l<0?(l+=_,l<0&&(l=0)):l>_&&(l=_),l<f&&(l=f);const v=this.subarray(f,l);return Object.setPrototypeOf(v,p.prototype),v};function ee(u,f,l){if(u%1!==0||u<0)throw new RangeError("offset is not uint");if(u+f>l)throw new RangeError("Trying to access beyond buffer length")}p.prototype.readUintLE=p.prototype.readUIntLE=function(f,l,_){f=f>>>0,l=l>>>0,_||ee(f,l,this.length);let v=this[f],A=1,H=0;for(;++H<l&&(A*=256);)v+=this[f+H]*A;return v},p.prototype.readUintBE=p.prototype.readUIntBE=function(f,l,_){f=f>>>0,l=l>>>0,_||ee(f,l,this.length);let v=this[f+--l],A=1;for(;l>0&&(A*=256);)v+=this[f+--l]*A;return v},p.prototype.readUint8=p.prototype.readUInt8=function(f,l){return f=f>>>0,l||ee(f,1,this.length),this[f]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(f,l){return f=f>>>0,l||ee(f,2,this.length),this[f]|this[f+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(f,l){return f=f>>>0,l||ee(f,2,this.length),this[f]<<8|this[f+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(f,l){return f=f>>>0,l||ee(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(f,l){return f=f>>>0,l||ee(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},p.prototype.readBigUInt64LE=Se(function(f){f=f>>>0,Je(f,"offset");const l=this[f],_=this[f+7];(l===void 0||_===void 0)&&Fe(f,this.length-8);const v=l+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,A=this[++f]+this[++f]*2**8+this[++f]*2**16+_*2**24;return BigInt(v)+(BigInt(A)<<BigInt(32))}),p.prototype.readBigUInt64BE=Se(function(f){f=f>>>0,Je(f,"offset");const l=this[f],_=this[f+7];(l===void 0||_===void 0)&&Fe(f,this.length-8);const v=l*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],A=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+_;return(BigInt(v)<<BigInt(32))+BigInt(A)}),p.prototype.readIntLE=function(f,l,_){f=f>>>0,l=l>>>0,_||ee(f,l,this.length);let v=this[f],A=1,H=0;for(;++H<l&&(A*=256);)v+=this[f+H]*A;return A*=128,v>=A&&(v-=Math.pow(2,8*l)),v},p.prototype.readIntBE=function(f,l,_){f=f>>>0,l=l>>>0,_||ee(f,l,this.length);let v=l,A=1,H=this[f+--v];for(;v>0&&(A*=256);)H+=this[f+--v]*A;return A*=128,H>=A&&(H-=Math.pow(2,8*l)),H},p.prototype.readInt8=function(f,l){return f=f>>>0,l||ee(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},p.prototype.readInt16LE=function(f,l){f=f>>>0,l||ee(f,2,this.length);const _=this[f]|this[f+1]<<8;return _&32768?_|4294901760:_},p.prototype.readInt16BE=function(f,l){f=f>>>0,l||ee(f,2,this.length);const _=this[f+1]|this[f]<<8;return _&32768?_|4294901760:_},p.prototype.readInt32LE=function(f,l){return f=f>>>0,l||ee(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},p.prototype.readInt32BE=function(f,l){return f=f>>>0,l||ee(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},p.prototype.readBigInt64LE=Se(function(f){f=f>>>0,Je(f,"offset");const l=this[f],_=this[f+7];(l===void 0||_===void 0)&&Fe(f,this.length-8);const v=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(_<<24);return(BigInt(v)<<BigInt(32))+BigInt(l+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),p.prototype.readBigInt64BE=Se(function(f){f=f>>>0,Je(f,"offset");const l=this[f],_=this[f+7];(l===void 0||_===void 0)&&Fe(f,this.length-8);const v=(l<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(v)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+_)}),p.prototype.readFloatLE=function(f,l){return f=f>>>0,l||ee(f,4,this.length),s.read(this,f,!0,23,4)},p.prototype.readFloatBE=function(f,l){return f=f>>>0,l||ee(f,4,this.length),s.read(this,f,!1,23,4)},p.prototype.readDoubleLE=function(f,l){return f=f>>>0,l||ee(f,8,this.length),s.read(this,f,!0,52,8)},p.prototype.readDoubleBE=function(f,l){return f=f>>>0,l||ee(f,8,this.length),s.read(this,f,!1,52,8)};function X(u,f,l,_,v,A){if(!p.isBuffer(u))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>v||f<A)throw new RangeError('"value" argument is out of bounds');if(l+_>u.length)throw new RangeError("Index out of range")}p.prototype.writeUintLE=p.prototype.writeUIntLE=function(f,l,_,v){if(f=+f,l=l>>>0,_=_>>>0,!v){const Q=Math.pow(2,8*_)-1;X(this,f,l,_,Q,0)}let A=1,H=0;for(this[l]=f&255;++H<_&&(A*=256);)this[l+H]=f/A&255;return l+_},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(f,l,_,v){if(f=+f,l=l>>>0,_=_>>>0,!v){const Q=Math.pow(2,8*_)-1;X(this,f,l,_,Q,0)}let A=_-1,H=1;for(this[l+A]=f&255;--A>=0&&(H*=256);)this[l+A]=f/H&255;return l+_},p.prototype.writeUint8=p.prototype.writeUInt8=function(f,l,_){return f=+f,l=l>>>0,_||X(this,f,l,1,255,0),this[l]=f&255,l+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(f,l,_){return f=+f,l=l>>>0,_||X(this,f,l,2,65535,0),this[l]=f&255,this[l+1]=f>>>8,l+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(f,l,_){return f=+f,l=l>>>0,_||X(this,f,l,2,65535,0),this[l]=f>>>8,this[l+1]=f&255,l+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(f,l,_){return f=+f,l=l>>>0,_||X(this,f,l,4,4294967295,0),this[l+3]=f>>>24,this[l+2]=f>>>16,this[l+1]=f>>>8,this[l]=f&255,l+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(f,l,_){return f=+f,l=l>>>0,_||X(this,f,l,4,4294967295,0),this[l]=f>>>24,this[l+1]=f>>>16,this[l+2]=f>>>8,this[l+3]=f&255,l+4};function J(u,f,l,_,v){sr(f,_,v,u,l,7);let A=Number(f&BigInt(4294967295));u[l++]=A,A=A>>8,u[l++]=A,A=A>>8,u[l++]=A,A=A>>8,u[l++]=A;let H=Number(f>>BigInt(32)&BigInt(4294967295));return u[l++]=H,H=H>>8,u[l++]=H,H=H>>8,u[l++]=H,H=H>>8,u[l++]=H,l}function re(u,f,l,_,v){sr(f,_,v,u,l,7);let A=Number(f&BigInt(4294967295));u[l+7]=A,A=A>>8,u[l+6]=A,A=A>>8,u[l+5]=A,A=A>>8,u[l+4]=A;let H=Number(f>>BigInt(32)&BigInt(4294967295));return u[l+3]=H,H=H>>8,u[l+2]=H,H=H>>8,u[l+1]=H,H=H>>8,u[l]=H,l+8}p.prototype.writeBigUInt64LE=Se(function(f,l=0){return J(this,f,l,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeBigUInt64BE=Se(function(f,l=0){return re(this,f,l,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeIntLE=function(f,l,_,v){if(f=+f,l=l>>>0,!v){const ye=Math.pow(2,8*_-1);X(this,f,l,_,ye-1,-ye)}let A=0,H=1,Q=0;for(this[l]=f&255;++A<_&&(H*=256);)f<0&&Q===0&&this[l+A-1]!==0&&(Q=1),this[l+A]=(f/H>>0)-Q&255;return l+_},p.prototype.writeIntBE=function(f,l,_,v){if(f=+f,l=l>>>0,!v){const ye=Math.pow(2,8*_-1);X(this,f,l,_,ye-1,-ye)}let A=_-1,H=1,Q=0;for(this[l+A]=f&255;--A>=0&&(H*=256);)f<0&&Q===0&&this[l+A+1]!==0&&(Q=1),this[l+A]=(f/H>>0)-Q&255;return l+_},p.prototype.writeInt8=function(f,l,_){return f=+f,l=l>>>0,_||X(this,f,l,1,127,-128),f<0&&(f=255+f+1),this[l]=f&255,l+1},p.prototype.writeInt16LE=function(f,l,_){return f=+f,l=l>>>0,_||X(this,f,l,2,32767,-32768),this[l]=f&255,this[l+1]=f>>>8,l+2},p.prototype.writeInt16BE=function(f,l,_){return f=+f,l=l>>>0,_||X(this,f,l,2,32767,-32768),this[l]=f>>>8,this[l+1]=f&255,l+2},p.prototype.writeInt32LE=function(f,l,_){return f=+f,l=l>>>0,_||X(this,f,l,4,2147483647,-2147483648),this[l]=f&255,this[l+1]=f>>>8,this[l+2]=f>>>16,this[l+3]=f>>>24,l+4},p.prototype.writeInt32BE=function(f,l,_){return f=+f,l=l>>>0,_||X(this,f,l,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[l]=f>>>24,this[l+1]=f>>>16,this[l+2]=f>>>8,this[l+3]=f&255,l+4},p.prototype.writeBigInt64LE=Se(function(f,l=0){return J(this,f,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeBigInt64BE=Se(function(f,l=0){return re(this,f,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ne(u,f,l,_,v,A){if(l+_>u.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function te(u,f,l,_,v){return f=+f,l=l>>>0,v||ne(u,f,l,4),s.write(u,f,l,_,23,4),l+4}p.prototype.writeFloatLE=function(f,l,_){return te(this,f,l,!0,_)},p.prototype.writeFloatBE=function(f,l,_){return te(this,f,l,!1,_)};function ge(u,f,l,_,v){return f=+f,l=l>>>0,v||ne(u,f,l,8),s.write(u,f,l,_,52,8),l+8}p.prototype.writeDoubleLE=function(f,l,_){return ge(this,f,l,!0,_)},p.prototype.writeDoubleBE=function(f,l,_){return ge(this,f,l,!1,_)},p.prototype.copy=function(f,l,_,v){if(!p.isBuffer(f))throw new TypeError("argument should be a Buffer");if(_||(_=0),!v&&v!==0&&(v=this.length),l>=f.length&&(l=f.length),l||(l=0),v>0&&v<_&&(v=_),v===_||f.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(_<0||_>=this.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("sourceEnd out of bounds");v>this.length&&(v=this.length),f.length-l<v-_&&(v=f.length-l+_);const A=v-_;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(l,_,v):Uint8Array.prototype.set.call(f,this.subarray(_,v),l),A},p.prototype.fill=function(f,l,_,v){if(typeof f=="string"){if(typeof l=="string"?(v=l,l=0,_=this.length):typeof _=="string"&&(v=_,_=this.length),v!==void 0&&typeof v!="string")throw new TypeError("encoding must be a string");if(typeof v=="string"&&!p.isEncoding(v))throw new TypeError("Unknown encoding: "+v);if(f.length===1){const H=f.charCodeAt(0);(v==="utf8"&&H<128||v==="latin1")&&(f=H)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(l<0||this.length<l||this.length<_)throw new RangeError("Out of range index");if(_<=l)return this;l=l>>>0,_=_===void 0?this.length:_>>>0,f||(f=0);let A;if(typeof f=="number")for(A=l;A<_;++A)this[A]=f;else{const H=p.isBuffer(f)?f:p.from(f,v),Q=H.length;if(Q===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(A=0;A<_-l;++A)this[A+l]=H[A%Q]}return this};const ve={};function De(u,f,l){ve[u]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${u}]`,this.stack,delete this.name}get code(){return u}set code(v){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:v,writable:!0})}toString(){return`${this.name} [${u}]: ${this.message}`}}}De("ERR_BUFFER_OUT_OF_BOUNDS",function(u){return u?`${u} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),De("ERR_INVALID_ARG_TYPE",function(u,f){return`The "${u}" argument must be of type number. Received type ${typeof f}`},TypeError),De("ERR_OUT_OF_RANGE",function(u,f,l){let _=`The value of "${u}" is out of range.`,v=l;return Number.isInteger(l)&&Math.abs(l)>2**32?v=tr(String(l)):typeof l=="bigint"&&(v=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(v=tr(v)),v+="n"),_+=` It must be ${f}. Received ${v}`,_},RangeError);function tr(u){let f="",l=u.length;const _=u[0]==="-"?1:0;for(;l>=_+4;l-=3)f=`_${u.slice(l-3,l)}${f}`;return`${u.slice(0,l)}${f}`}function qr(u,f,l){Je(f,"offset"),(u[f]===void 0||u[f+l]===void 0)&&Fe(f,u.length-(l+1))}function sr(u,f,l,_,v,A){if(u>l||u<f){const H=typeof f=="bigint"?"n":"";let Q;throw A>3?f===0||f===BigInt(0)?Q=`>= 0${H} and < 2${H} ** ${(A+1)*8}${H}`:Q=`>= -(2${H} ** ${(A+1)*8-1}${H}) and < 2 ** ${(A+1)*8-1}${H}`:Q=`>= ${f}${H} and <= ${l}${H}`,new ve.ERR_OUT_OF_RANGE("value",Q,u)}qr(_,v,A)}function Je(u,f){if(typeof u!="number")throw new ve.ERR_INVALID_ARG_TYPE(f,"number",u)}function Fe(u,f,l){throw Math.floor(u)!==u?(Je(u,l),new ve.ERR_OUT_OF_RANGE(l||"offset","an integer",u)):f<0?new ve.ERR_BUFFER_OUT_OF_BOUNDS:new ve.ERR_OUT_OF_RANGE(l||"offset",`>= ${l?1:0} and <= ${f}`,u)}const Mr=/[^+/0-9A-Za-z-_]/g;function cr(u){if(u=u.split("=")[0],u=u.trim().replace(Mr,""),u.length<2)return"";for(;u.length%4!==0;)u=u+"=";return u}function vr(u,f){f=f||1/0;let l;const _=u.length;let v=null;const A=[];for(let H=0;H<_;++H){if(l=u.charCodeAt(H),l>55295&&l<57344){if(!v){if(l>56319){(f-=3)>-1&&A.push(239,191,189);continue}else if(H+1===_){(f-=3)>-1&&A.push(239,191,189);continue}v=l;continue}if(l<56320){(f-=3)>-1&&A.push(239,191,189),v=l;continue}l=(v-55296<<10|l-56320)+65536}else v&&(f-=3)>-1&&A.push(239,191,189);if(v=null,l<128){if((f-=1)<0)break;A.push(l)}else if(l<2048){if((f-=2)<0)break;A.push(l>>6|192,l&63|128)}else if(l<65536){if((f-=3)<0)break;A.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((f-=4)<0)break;A.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return A}function Kr(u){const f=[];for(let l=0;l<u.length;++l)f.push(u.charCodeAt(l)&255);return f}function dr(u,f){let l,_,v;const A=[];for(let H=0;H<u.length&&!((f-=2)<0);++H)l=u.charCodeAt(H),_=l>>8,v=l%256,A.push(v),A.push(_);return A}function Or(u){return r.toByteArray(cr(u))}function qe(u,f,l,_){let v;for(v=0;v<_&&!(v+l>=f.length||v>=u.length);++v)f[v+l]=u[v];return v}function $e(u,f){return u instanceof f||u!=null&&u.constructor!=null&&u.constructor.name!=null&&u.constructor.name===f.name}function xe(u){return u!==u}const zr=function(){const u="0123456789abcdef",f=new Array(256);for(let l=0;l<16;++l){const _=l*16;for(let v=0;v<16;++v)f[_+v]=u[l]+u[v]}return f}();function Se(u){return typeof BigInt>"u"?Gr:u}function Gr(){throw new Error("BigInt not supported")}})(_r);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(e,r){var s=_r,n=s.Buffer;function o(t,p){for(var m in t)p[m]=t[m]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=s:(o(s,r),r.Buffer=i);function i(t,p,m){return n(t,p,m)}i.prototype=Object.create(n.prototype),o(n,i),i.from=function(t,p,m){if(typeof t=="number")throw new TypeError("Argument must not be a number");return n(t,p,m)},i.alloc=function(t,p,m){if(typeof t!="number")throw new TypeError("Argument must be a number");var c=n(t);return p!==void 0?typeof m=="string"?c.fill(p,m):c.fill(p):c.fill(0),c},i.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return n(t)},i.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return s.SlowBuffer(t)}})(Qs,Qs.exports);var xa=Qs.exports,La=xa.Buffer;function ms(e,r){this._block=La.alloc(e),this._finalSize=r,this._blockSize=e,this._len=0}ms.prototype.update=function(e,r){typeof e=="string"&&(r=r||"utf8",e=La.from(e,r));for(var s=this._block,n=this._blockSize,o=e.length,i=this._len,t=0;t<o;){for(var p=i%n,m=Math.min(o-t,n-p),c=0;c<m;c++)s[p+c]=e[t+c];i+=m,t+=m,i%n===0&&this._update(s)}return this._len+=o,this};ms.prototype.digest=function(e){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var s=this._len*8;if(s<=4294967295)this._block.writeUInt32BE(s,this._blockSize-4);else{var n=(s&4294967295)>>>0,o=(s-n)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var i=this._hash();return e?i.toString(e):i};ms.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var El=ms,Sl=hl,$a=El,kl=xa.Buffer,Al=[1518500249,1859775393,-1894007588,-899497514],Tl=new Array(80);function xt(){this.init(),this._w=Tl,$a.call(this,64,56)}Sl(xt,$a);xt.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function Cl(e){return e<<1|e>>>31}function Ol(e){return e<<5|e>>>27}function xl(e){return e<<30|e>>>2}function Ll(e,r,s,n){return e===0?r&s|~r&n:e===2?r&s|r&n|s&n:r^s^n}xt.prototype._update=function(e){for(var r=this._w,s=this._a|0,n=this._b|0,o=this._c|0,i=this._d|0,t=this._e|0,p=0;p<16;++p)r[p]=e.readInt32BE(p*4);for(;p<80;++p)r[p]=Cl(r[p-3]^r[p-8]^r[p-14]^r[p-16]);for(var m=0;m<80;++m){var c=~~(m/20),h=Ol(s)+Ll(c,n,o,i)+t+r[m]+Al[c]|0;t=i,i=o,o=xl(n),n=s,s=h}this._a=s+this._a|0,this._b=n+this._b|0,this._c=o+this._c|0,this._d=i+this._d|0,this._e=t+this._e|0};xt.prototype._hash=function(){var e=kl.allocUnsafe(20);return e.writeInt32BE(this._a|0,0),e.writeInt32BE(this._b|0,4),e.writeInt32BE(this._c|0,8),e.writeInt32BE(this._d|0,12),e.writeInt32BE(this._e|0,16),e};var $l=xt;const Il=ri($l);function Hl(e){let r="";for(const s of new Uint8Array(e))s<16&&(r+="0"),r+=s.toString(16);return r}let Bs=null;async function yn(e){return Bs===null&&(Bs=await Dl()),Bs?Ia(e):Rl(e)}function Rl(e){return new Il().update(e).digest("hex")}async function Ia(e){const r=await crypto.subtle.digest("SHA-1",e);return Hl(r)}async function Dl(){try{if(await Ia(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function Bl(e){const r=[];let s=0,n=0;do{s=e.readUInt8();const o=s&127;r.push(o),n=s&128}while(n);return r.reduce((o,i)=>o+1<<7|i,-1)}function Fl(e,r){let s=r,n=4,o=null;do o=e.readUInt8(),s|=(o&127)<<n,n+=7;while(o&128);return s}class Et{constructor(r){Object.assign(this,r),this.offsetCache={}}static async fromIdx({idx:r,getExternalRefDelta:s}){const n=new xr(r);if(n.slice(4).toString("hex")!=="ff744f63")return;const i=n.readUInt32BE();if(i!==2)throw new be(`Unable to read version ${i} packfile IDX. (Only version 2 supported)`);if(r.byteLength>2048*1024*1024)throw new be("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");n.seek(n.tell()+4*255);const t=n.readUInt32BE(),p=[];for(let h=0;h<t;h++){const b=n.slice(20).toString("hex");p[h]=b}n.seek(n.tell()+4*t);const m=new Map;for(let h=0;h<t;h++)m.set(p[h],n.readUInt32BE());const c=n.slice(20).toString("hex");return new Et({hashes:p,crcs:{},offsets:m,packfileSha:c,getExternalRefDelta:s})}static async fromPack({pack:r,getExternalRefDelta:s,onProgress:n}){const o={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},i={},t=r.slice(-20).toString("hex"),p=[],m={},c=new Map;let h=null,b=null;await fl([r],async({data:j,type:F,reference:q,offset:I,num:W})=>{h===null&&(h=W);const B=Math.floor((h-W)*100/h);B!==b&&n&&await n({phase:"Receiving objects",loaded:h-W,total:h}),b=B,F=o[F],["commit","tree","blob","tag"].includes(F)?i[I]={type:F,offset:I}:F==="ofs-delta"?i[I]={type:F,offset:I}:F==="ref-delta"&&(i[I]={type:F,offset:I})});const g=Object.keys(i).map(Number);for(const[j,F]of g.entries()){const q=j+1===g.length?r.byteLength-20:g[j+1],I=i[F],W=dp.buf(r.slice(F,q))>>>0;I.end=q,I.crc=W}const w=new Et({pack:Promise.resolve(r),packfileSha:t,crcs:m,hashes:p,offsets:c,getExternalRefDelta:s});b=null;let $=0;const E=[0,0,0,0,0,0,0,0,0,0,0,0];for(let j in i){j=Number(j);const F=Math.floor($*100/h);F!==b&&n&&await n({phase:"Resolving deltas",loaded:$,total:h}),$++,b=F;const q=i[j];if(!q.oid)try{w.readDepth=0,w.externalReadDepth=0;const{type:I,object:W}=await w.readSlice({start:j});E[w.readDepth]+=1;const B=await yn(hp.wrap({type:I,object:W}));q.oid=B,p.push(B),c.set(B,j),m[B]=q.crc}catch{continue}}return p.sort(),w}async toBuffer(){const r=[],s=(c,h)=>{r.push(Buffer.from(c,h))};s("ff744f63","hex"),s("00000002","hex");const n=new xr(Buffer.alloc(256*4));for(let c=0;c<256;c++){let h=0;for(const b of this.hashes)parseInt(b.slice(0,2),16)<=c&&h++;n.writeUInt32BE(h)}r.push(n.buffer);for(const c of this.hashes)s(c,"hex");const o=new xr(Buffer.alloc(this.hashes.length*4));for(const c of this.hashes)o.writeUInt32BE(this.crcs[c]);r.push(o.buffer);const i=new xr(Buffer.alloc(this.hashes.length*4));for(const c of this.hashes)i.writeUInt32BE(this.offsets.get(c));r.push(i.buffer),s(this.packfileSha,"hex");const t=Buffer.concat(r),p=await yn(t),m=Buffer.alloc(20);return m.write(p,"hex"),Buffer.concat([t,m])}async load({pack:r}){this.pack=r}async unload(){this.pack=null}async read({oid:r}){if(!this.offsets.get(r)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(r);throw new be(`Could not read object ${r} from packfile`)}const s=this.offsets.get(r);return this.readSlice({start:s})}async readSlice({start:r}){if(this.offsetCache[r])return Object.assign({},this.offsetCache[r]);this.readDepth++;const s={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new be("Tried to read from a GitPackIndex with no packfile loaded into memory");const n=(await this.pack).slice(r),o=new xr(n),i=o.readUInt8(),t=i&112;let p=s[t];if(p===void 0)throw new be("Unrecognized type: 0b"+t.toString(2));const m=i&15;let c=m;i&128&&(c=Fl(o,m));let b=null,g=null;if(p==="ofs_delta"){const $=Bl(o),E=r-$;({object:b,type:p}=await this.readSlice({start:E}))}if(p==="ref_delta"){const $=o.slice(20).toString("hex");({object:b,type:p}=await this.read({oid:$}))}const w=n.slice(o.tell());if(g=Buffer.from(await cl(w)),g.byteLength!==c)throw new be(`Packfile told us object would have length ${c} but it had length ${g.byteLength}`);return b&&(g=Buffer.from(mp(g,b))),this.readDepth>3&&(this.offsetCache[r]={type:p,object:g}),{type:p,format:"content",object:g}}}class St extends st{constructor(r){super(`Expected a 40-char hex object id but saw "${r}".`),this.code=this.name=St.code,this.data={value:r}}}St.code="InvalidOidError";class ys extends st{constructor(r,s,n,o){super(`Object ${r} ${o?`at ${o}`:""}was anticipated to be a ${n} but it is a ${s}.`),this.code=this.name=ys.code,this.data={oid:r,actual:s,expected:n,filepath:o}}}ys.code="ObjectTypeError";async function Ha(e,r){const s=Dn(e);for(;;){const{value:n,done:o}=await s.next();if(n&&await r(n),o)break}s.return&&s.return()}async function kt(e){let r=0;const s=[];await Ha(e,i=>{s.push(i),r+=i.byteLength});const n=new Uint8Array(r);let o=0;for(const i of s)n.set(i,o),o+=i.byteLength;return n}class Fs{constructor(){this._queue=[]}write(r){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const s=this._waiting;this._waiting=null,s({value:r})}else this._queue.push(r)}end(){if(this._ended=!0,this._waiting){const r=this._waiting;this._waiting=null,r({done:!0})}}destroy(r){this.error=r,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(r=>{this._waiting=r})}}class jl{static demux(r){const s=Ce.streamReader(r),n=new Fs,o=new Fs,i=new Fs,t=async function(){const p=await s();if(p===null)return t();if(p===!0){n.end(),i.end(),r.error?o.destroy(r.error):o.end();return}switch(p[0]){case 1:{o.write(p.slice(1));break}case 2:{i.write(p.slice(1));break}case 3:{const m=p.slice(1);i.write(m),n.end(),i.end(),o.destroy(new Error(m.toString("utf8")));return}default:n.write(p)}t()};return t(),{packetlines:n,packfile:o,progress:i}}}async function Ra(e){const{packetlines:r,packfile:s,progress:n}=jl.demux(e),o=[],i=[],t=[];let p=!1,m=!1;return new Promise((c,h)=>{Ha(r,b=>{const g=b.toString("utf8").trim();if(g.startsWith("shallow")){const w=g.slice(-41).trim();w.length!==40&&h(new St(w)),o.push(w)}else if(g.startsWith("unshallow")){const w=g.slice(-41).trim();w.length!==40&&h(new St(w)),i.push(w)}else if(g.startsWith("ACK")){const[,w,$]=g.split(" ");t.push({oid:w,status:$}),$||(m=!0)}else g.startsWith("NAK")?(p=!0,m=!0):(m=!0,p=!0);m&&(e.error?h(e.error):c({shallows:o,unshallows:i,acks:t,nak:p,packfile:s,progress:n}))}).finally(()=>{m||(e.error?h(e.error):c({shallows:o,unshallows:i,acks:t,nak:p,packfile:s,progress:n}))})})}typeof window<"u"&&(window.Buffer=_r.Buffer);async function Nl(e,r,s){const n=await Ba(e,r),o=await Kl(n,r,s),i=await zl(e,s.map(p=>o[p].oid)),t={};return await Promise.all(s.map(async p=>{t[p]=await Fa(i,o[p].oid)})),t}async function Wl(e,r){const s=await Ba(e,r),n=await Ml(s,r);return n?.object?Da(n):[]}async function Ul(e,r){switch((r.type==="infer"||r.type===void 0)&&(["","HEAD"].includes(r.value)?r={value:r.value,type:"refname"}:typeof r.value=="string"&&r.value.length===40&&(r={value:r.value,type:"commit"})),r.type==="branch"&&(r={value:`refs/heads/${r.value}`,type:"refname"}),r.type){case"commit":return r.value;case"refname":{const s=await ql(e,r.value);if(!(r.value in s))throw new Error(`Branch ${r.value} not found`);return s[r.value]}default:throw new Error(`Invalid ref type: ${r.type}`)}}function Da(e){return e.object.map(r=>{if(r.type==="blob")return{name:r.path,type:"file"};if(r.type==="tree"&&r.object)return{name:r.path,type:"folder",children:Da(r)}}).filter(r=>!!r?.name)}async function ql(e,r){const s=_r.Buffer.from(await kt([Ce.encode(`command=ls-refs
`),Ce.encode(`agent=git/2.37.3
`),Ce.encode(`object-format=sha1
`),Ce.delim(),Ce.encode(`peel
`),Ce.encode(`ref-prefix ${r}
`),Ce.flush()])),n=await fetch(e+"/git-upload-pack",{method:"POST",headers:{Accept:"application/x-git-upload-pack-advertisement","content-type":"application/x-git-upload-pack-request","Content-Length":`${s.length}`,"Git-Protocol":"version=2"},body:s}),o={};for await(const i of Gl(n)){const t=i.indexOf(" "),p=i.slice(0,t),m=i.slice(t+1,i.length-1);o[m]=p}return o}async function Ba(e,r){const s=_r.Buffer.from(await kt([Ce.encode(`want ${r} multi_ack_detailed no-done side-band-64k thin-pack ofs-delta agent=git/2.37.3 filter 
`),Ce.encode(`filter blob:none
`),Ce.encode(`shallow ${r}
`),Ce.encode(`deepen 1
`),Ce.flush(),Ce.encode(`done
`),Ce.encode(`done
`)])),n=await fetch(e+"/git-upload-pack",{method:"POST",headers:{Accept:"application/x-git-upload-pack-advertisement","content-type":"application/x-git-upload-pack-request","Content-Length":`${s.length}`},body:s}),o=ja(n.body),i=await Ra(o),t=_r.Buffer.from(await kt(i.packfile)),p=await Et.fromPack({pack:t}),m=p.read;return p.read=async function({oid:c,...h}){const b=await m.call(this,{oid:c,...h});return b.oid=c,b},p}async function Ml(e,r){const s=await e.read({oid:r});Hr(s);const n=await e.read({oid:s.object.tree}),o=[n];for(;o.length>0;){const i=o.pop(),t=await e.read({oid:i.oid});if(Hr(t),i.object=t.object,t.type==="tree")for(const p of t.object)p.type==="tree"&&o.push(p)}return n}async function Kl(e,r,s){const n=await e.read({oid:r});Hr(n);const o=await e.read({oid:n.object.tree});Hr(o);const i={};for(const t of s){let p=o;const m=t.split("/");for(const c of m){if(p.type!=="tree")throw new Error(`Path not found in the repo: ${t}`);let h=!1;for(const b of p.object)if(b.path===c){try{p=await e.read({oid:b.oid}),Hr(p)}catch{p=b}h=!0;break}if(!h)throw new Error(`Path not found in the repo: ${t}`)}i[t]=p}return i}async function zl(e,r){const s=_r.Buffer.from(await kt([...r.map(p=>Ce.encode(`want ${p} multi_ack_detailed no-done side-band-64k thin-pack ofs-delta agent=git/2.37.3 
`)),Ce.flush(),Ce.encode(`done
`)])),n=await fetch(e+"/git-upload-pack",{method:"POST",headers:{Accept:"application/x-git-upload-pack-advertisement","content-type":"application/x-git-upload-pack-request","Content-Length":`${s.length}`},body:s}),o=ja(n.body),i=await Ra(o),t=_r.Buffer.from(await kt(i.packfile));return await Et.fromPack({pack:t})}async function Fa(e,r){const s=await e.read({oid:r});if(Hr(s),s.type==="blob")return s.object;const n={};for(const{path:o,oid:i,type:t}of s.object)if(t==="blob"){const p=await e.read({oid:i});Hr(p),n[o]=p.object}else t==="tree"&&(n[o]=await Fa(e,i));return n}function Hr(e){if(e.object instanceof _r.Buffer)switch(e.type){case"commit":e.object=Ne.from(e.object).parse();break;case"tree":e.object=oi.from(e.object).entries();break;case"blob":e.object=new Uint8Array(e.object),e.format="content";break;case"tag":e.object=ut.from(e.object).parse();break;default:throw new ys(e.oid,e.type,"blob|commit|tag|tree")}}async function*Gl(e){const r=await e.text();let s=0;for(;s<=r.length;){const n=parseInt(r.substring(s,s+4),16);if(n===0)break;yield r.substring(s+4,s+n),s+=n}}function ja(e){if(e[Symbol.asyncIterator])return e;const r=e.getReader();return{next(){return r.read()},return(){return r.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}function Zl(e,r){r=is(r);const s=["",".","/"].includes(r);let n=e;if(s)r="";else{const t=r.split("/");for(const p of t){const m=n?.find(c=>c.name===p);if(m?.type==="folder")n=m.children;else return m?[m.name]:[]}}const o=[],i=[{tree:n,path:r}];for(;i.length>0;){const{tree:t,path:p}=i.pop();for(const m of t){const c=`${p}${p?"/":""}${m.name}`;m.type==="folder"?i.push({tree:m.children,path:c}):o.push(c)}}return o}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Na=Symbol("Comlink.proxy"),Vl=Symbol("Comlink.endpoint"),Yl=Symbol("Comlink.releaseProxy"),js=Symbol("Comlink.finalizer"),Gt=Symbol("Comlink.thrown"),Wa=e=>typeof e=="object"&&e!==null||typeof e=="function",Xl={canHandle:e=>Wa(e)&&e[Na],serialize(e){const{port1:r,port2:s}=new MessageChannel;return yi(e,r),[s,[s]]},deserialize(e){return e.start(),_i(e)}},Jl={canHandle:e=>Wa(e)&&Gt in e,serialize({value:e}){let r;return e instanceof Error?r={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:r={isError:!1,value:e},[r,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},Qr=new Map([["proxy",Xl],["throw",Jl]]);function Ql(e,r){for(const s of e)if(r===s||s==="*"||s instanceof RegExp&&s.test(r))return!0;return!1}function yi(e,r=globalThis,s=["*"]){r.addEventListener("message",function n(o){if(!o||!o.data)return;if(!Ql(s,o.origin)){console.warn(`Invalid origin '${o.origin}' for comlink proxy`);return}const{id:i,type:t,path:p}=Object.assign({path:[]},o.data),m=(o.data.argumentList||[]).map(Lr);let c;try{const h=p.slice(0,-1).reduce((g,w)=>g[w],e),b=p.reduce((g,w)=>g[w],e);switch(t){case"GET":c=b;break;case"SET":h[p.slice(-1)[0]]=Lr(o.data.value),c=!0;break;case"APPLY":c=b.apply(h,m);break;case"CONSTRUCT":{const g=new b(...m);c=Ka(g)}break;case"ENDPOINT":{const{port1:g,port2:w}=new MessageChannel;yi(e,w),c=iu(g,[g])}break;case"RELEASE":c=void 0;break;default:return}}catch(h){c={value:h,[Gt]:0}}Promise.resolve(c).catch(h=>({value:h,[Gt]:0})).then(h=>{const[b,g]=ss(h);r.postMessage(Object.assign(Object.assign({},b),{id:i}),g),t==="RELEASE"&&(r.removeEventListener("message",n),Ua(r),js in e&&typeof e[js]=="function"&&e[js]())}).catch(h=>{const[b,g]=ss({value:new TypeError("Unserializable return value"),[Gt]:0});r.postMessage(Object.assign(Object.assign({},b),{id:i}),g)})}),r.start&&r.start()}function eu(e){return e.constructor.name==="MessagePort"}function Ua(e){eu(e)&&e.close()}function _i(e,r){return ei(e,[],r)}function Nt(e){if(e)throw new Error("Proxy has been released and is not useable")}function qa(e){return Xr(e,{type:"RELEASE"}).then(()=>{Ua(e)})}const rs=new WeakMap,ts="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const r=(rs.get(e)||0)-1;rs.set(e,r),r===0&&qa(e)});function ru(e,r){const s=(rs.get(r)||0)+1;rs.set(r,s),ts&&ts.register(e,r,e)}function tu(e){ts&&ts.unregister(e)}function ei(e,r=[],s=function(){}){let n=!1;const o=new Proxy(s,{get(i,t){if(Nt(n),t===Yl)return()=>{tu(o),qa(e),n=!0};if(t==="then"){if(r.length===0)return{then:()=>o};const p=Xr(e,{type:"GET",path:r.map(m=>m.toString())}).then(Lr);return p.then.bind(p)}return ei(e,[...r,t])},set(i,t,p){Nt(n);const[m,c]=ss(p);return Xr(e,{type:"SET",path:[...r,t].map(h=>h.toString()),value:m},c).then(Lr)},apply(i,t,p){Nt(n);const m=r[r.length-1];if(m===Vl)return Xr(e,{type:"ENDPOINT"}).then(Lr);if(m==="bind")return ei(e,r.slice(0,-1));const[c,h]=_n(p);return Xr(e,{type:"APPLY",path:r.map(b=>b.toString()),argumentList:c},h).then(Lr)},construct(i,t){Nt(n);const[p,m]=_n(t);return Xr(e,{type:"CONSTRUCT",path:r.map(c=>c.toString()),argumentList:p},m).then(Lr)}});return ru(o,e),o}function su(e){return Array.prototype.concat.apply([],e)}function _n(e){const r=e.map(ss);return[r.map(s=>s[0]),su(r.map(s=>s[1]))]}const Ma=new WeakMap;function iu(e,r){return Ma.set(e,r),e}function Ka(e){return Object.assign(e,{[Na]:!0})}function nu(e,r=globalThis,s="*"){return{postMessage:(n,o)=>e.postMessage(n,s,o),addEventListener:r.addEventListener.bind(r),removeEventListener:r.removeEventListener.bind(r)}}function ss(e){for(const[r,s]of Qr)if(s.canHandle(e)){const[n,o]=s.serialize(e);return[{type:"HANDLER",name:r,value:n},o]}return[{type:"RAW",value:e},Ma.get(e)||[]]}function Lr(e){switch(e.type){case"HANDLER":return Qr.get(e.name).deserialize(e.value);case"RAW":return e.value}}function Xr(e,r,s){return new Promise(n=>{const o=au();e.addEventListener("message",function i(t){!t.data||!t.data.id||t.data.id!==o||(e.removeEventListener("message",i),n(t.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:o},r),s)})}function au(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function ou(e,r=void 0){fu();const s=e instanceof Worker?e:nu(e,r),n=_i(s),o=za(n);return new Proxy(o,{get:(i,t)=>t==="isConnected"?async()=>{for(;;)try{await pu(n.isConnected(),200);break}catch{}}:n[t]})}async function pu(e,r){return new Promise((s,n)=>{setTimeout(n,r),e.then(s)})}let gn=!1;function fu(){if(gn)return;gn=!0,Qr.set("EVENT",{canHandle:s=>s instanceof CustomEvent,serialize:s=>[{detail:s.detail},[]],deserialize:s=>s}),Qr.set("FUNCTION",{canHandle:s=>typeof s=="function",serialize(s){const{port1:n,port2:o}=new MessageChannel;return yi(s,n),[o,[o]]},deserialize(s){return s.start(),_i(s)}}),Qr.set("PHPResponse",{canHandle:s=>typeof s=="object"&&s!==null&&"headers"in s&&"bytes"in s&&"errors"in s&&"exitCode"in s&&"httpStatusCode"in s,serialize(s){return[s.toRawData(),[]]},deserialize(s){return Xt.fromRawData(s)}});const e=Qr.get("throw"),r=e?.serialize;e.serialize=({value:s})=>{const n=r({value:s});return s.response&&(n[0].value.response=s.response),s.source&&(n[0].value.source=s.source),n}}function za(e){return new Proxy(e,{get(r,s){switch(typeof r[s]){case"function":return(...n)=>r[s](...n);case"object":return r[s]===null?r[s]:za(r[s]);case"undefined":case"number":case"string":return r[s];default:return Ka(r[s])}}})}function wr(e){return Object.fromEntries(Object.entries(e).map(([r,s])=>[s,r]))}const lu={server_name:0,max_fragment_length:1,client_certificate_url:2,trusted_ca_keys:3,truncated_hmac:4,status_request:5,user_mapping:6,client_authz:7,server_authz:8,cert_type:9,supported_groups:10,ec_point_formats:11,srp:12,signature_algorithms:13,use_srtp:14,heartbeat:15,application_layer_protocol_negotiation:16,status_request_v2:17,signed_certificate_timestamp:18,client_certificate_type:19,server_certificate_type:20,padding:21,encrypt_then_mac:22,extended_master_secret:23,token_binding:24,cached_info:25,tls_its:26,compress_certificate:27,record_size_limit:28,pwd_protect:29,pwo_clear:30,password_salt:31,ticket_pinning:32,tls_cert_with_extern_psk:33,delegated_credential:34,session_ticket:35,TLMSP:36,TLMSP_proxying:37,TLMSP_delegate:38,supported_ekt_ciphers:39,pre_shared_key:41,early_data:42,supported_versions:43,cookie:44,psk_key_exchange_modes:45,reserved:46,certificate_authorities:47,oid_filters:48,post_handshake_auth:49,signature_algorithms_cert:50,key_share:51,transparency_info:52,connection_id:54};wr(lu);const uu={host_name:0};wr(uu);const cu={TLS1_CK_PSK_WITH_RC4_128_SHA:138,TLS1_CK_PSK_WITH_3DES_EDE_CBC_SHA:139,TLS1_CK_PSK_WITH_AES_128_CBC_SHA:140,TLS1_CK_PSK_WITH_AES_256_CBC_SHA:141,TLS1_CK_DHE_PSK_WITH_RC4_128_SHA:142,TLS1_CK_DHE_PSK_WITH_3DES_EDE_CBC_SHA:143,TLS1_CK_DHE_PSK_WITH_AES_128_CBC_SHA:144,TLS1_CK_DHE_PSK_WITH_AES_256_CBC_SHA:145,TLS1_CK_RSA_PSK_WITH_RC4_128_SHA:146,TLS1_CK_RSA_PSK_WITH_3DES_EDE_CBC_SHA:147,TLS1_CK_RSA_PSK_WITH_AES_128_CBC_SHA:148,TLS1_CK_RSA_PSK_WITH_AES_256_CBC_SHA:149,TLS1_CK_PSK_WITH_AES_128_GCM_SHA256:168,TLS1_CK_PSK_WITH_AES_256_GCM_SHA384:169,TLS1_CK_DHE_PSK_WITH_AES_128_GCM_SHA256:170,TLS1_CK_DHE_PSK_WITH_AES_256_GCM_SHA384:171,TLS1_CK_RSA_PSK_WITH_AES_128_GCM_SHA256:172,TLS1_CK_RSA_PSK_WITH_AES_256_GCM_SHA384:173,TLS1_CK_PSK_WITH_AES_128_CBC_SHA256:174,TLS1_CK_PSK_WITH_AES_256_CBC_SHA384:175,TLS1_CK_PSK_WITH_NULL_SHA256:176,TLS1_CK_PSK_WITH_NULL_SHA384:177,TLS1_CK_DHE_PSK_WITH_AES_128_CBC_SHA256:178,TLS1_CK_DHE_PSK_WITH_AES_256_CBC_SHA384:179,TLS1_CK_DHE_PSK_WITH_NULL_SHA256:180,TLS1_CK_DHE_PSK_WITH_NULL_SHA384:181,TLS1_CK_RSA_PSK_WITH_AES_128_CBC_SHA256:182,TLS1_CK_RSA_PSK_WITH_AES_256_CBC_SHA384:183,TLS1_CK_RSA_PSK_WITH_NULL_SHA256:184,TLS1_CK_RSA_PSK_WITH_NULL_SHA384:185,TLS1_CK_PSK_WITH_NULL_SHA:44,TLS1_CK_DHE_PSK_WITH_NULL_SHA:45,TLS1_CK_RSA_PSK_WITH_NULL_SHA:46,TLS1_CK_RSA_WITH_AES_128_SHA:47,TLS1_CK_DH_DSS_WITH_AES_128_SHA:48,TLS1_CK_DH_RSA_WITH_AES_128_SHA:49,TLS1_CK_DHE_DSS_WITH_AES_128_SHA:50,TLS1_CK_DHE_RSA_WITH_AES_128_SHA:51,TLS1_CK_ADH_WITH_AES_128_SHA:52,TLS1_CK_RSA_WITH_AES_256_SHA:53,TLS1_CK_DH_DSS_WITH_AES_256_SHA:54,TLS1_CK_DH_RSA_WITH_AES_256_SHA:55,TLS1_CK_DHE_DSS_WITH_AES_256_SHA:56,TLS1_CK_DHE_RSA_WITH_AES_256_SHA:57,TLS1_CK_ADH_WITH_AES_256_SHA:58,TLS1_CK_RSA_WITH_NULL_SHA256:59,TLS1_CK_RSA_WITH_AES_128_SHA256:60,TLS1_CK_RSA_WITH_AES_256_SHA256:61,TLS1_CK_DH_DSS_WITH_AES_128_SHA256:62,TLS1_CK_DH_RSA_WITH_AES_128_SHA256:63,TLS1_CK_DHE_DSS_WITH_AES_128_SHA256:64,TLS1_CK_RSA_WITH_CAMELLIA_128_CBC_SHA:65,TLS1_CK_DH_DSS_WITH_CAMELLIA_128_CBC_SHA:66,TLS1_CK_DH_RSA_WITH_CAMELLIA_128_CBC_SHA:67,TLS1_CK_DHE_DSS_WITH_CAMELLIA_128_CBC_SHA:68,TLS1_CK_DHE_RSA_WITH_CAMELLIA_128_CBC_SHA:69,TLS1_CK_ADH_WITH_CAMELLIA_128_CBC_SHA:70,TLS1_CK_DHE_RSA_WITH_AES_128_SHA256:103,TLS1_CK_DH_DSS_WITH_AES_256_SHA256:104,TLS1_CK_DH_RSA_WITH_AES_256_SHA256:105,TLS1_CK_DHE_DSS_WITH_AES_256_SHA256:106,TLS1_CK_DHE_RSA_WITH_AES_256_SHA256:107,TLS1_CK_ADH_WITH_AES_128_SHA256:108,TLS1_CK_ADH_WITH_AES_256_SHA256:109,TLS1_CK_RSA_WITH_CAMELLIA_256_CBC_SHA:132,TLS1_CK_DH_DSS_WITH_CAMELLIA_256_CBC_SHA:133,TLS1_CK_DH_RSA_WITH_CAMELLIA_256_CBC_SHA:134,TLS1_CK_DHE_DSS_WITH_CAMELLIA_256_CBC_SHA:135,TLS1_CK_DHE_RSA_WITH_CAMELLIA_256_CBC_SHA:136,TLS1_CK_ADH_WITH_CAMELLIA_256_CBC_SHA:137,TLS1_CK_RSA_WITH_SEED_SHA:150,TLS1_CK_DH_DSS_WITH_SEED_SHA:151,TLS1_CK_DH_RSA_WITH_SEED_SHA:152,TLS1_CK_DHE_DSS_WITH_SEED_SHA:153,TLS1_CK_DHE_RSA_WITH_SEED_SHA:154,TLS1_CK_ADH_WITH_SEED_SHA:155,TLS1_CK_RSA_WITH_AES_128_GCM_SHA256:156,TLS1_CK_RSA_WITH_AES_256_GCM_SHA384:157,TLS1_CK_DHE_RSA_WITH_AES_128_GCM_SHA256:158,TLS1_CK_DHE_RSA_WITH_AES_256_GCM_SHA384:159,TLS1_CK_DH_RSA_WITH_AES_128_GCM_SHA256:160,TLS1_CK_DH_RSA_WITH_AES_256_GCM_SHA384:161,TLS1_CK_DHE_DSS_WITH_AES_128_GCM_SHA256:162,TLS1_CK_DHE_DSS_WITH_AES_256_GCM_SHA384:163,TLS1_CK_DH_DSS_WITH_AES_128_GCM_SHA256:164,TLS1_CK_DH_DSS_WITH_AES_256_GCM_SHA384:165,TLS1_CK_ADH_WITH_AES_128_GCM_SHA256:166,TLS1_CK_ADH_WITH_AES_256_GCM_SHA384:167,TLS1_CK_RSA_WITH_AES_128_CCM:49308,TLS1_CK_RSA_WITH_AES_256_CCM:49309,TLS1_CK_DHE_RSA_WITH_AES_128_CCM:49310,TLS1_CK_DHE_RSA_WITH_AES_256_CCM:49311,TLS1_CK_RSA_WITH_AES_128_CCM_8:49312,TLS1_CK_RSA_WITH_AES_256_CCM_8:49313,TLS1_CK_DHE_RSA_WITH_AES_128_CCM_8:49314,TLS1_CK_DHE_RSA_WITH_AES_256_CCM_8:49315,TLS1_CK_PSK_WITH_AES_128_CCM:49316,TLS1_CK_PSK_WITH_AES_256_CCM:49317,TLS1_CK_DHE_PSK_WITH_AES_128_CCM:49318,TLS1_CK_DHE_PSK_WITH_AES_256_CCM:49319,TLS1_CK_PSK_WITH_AES_128_CCM_8:49320,TLS1_CK_PSK_WITH_AES_256_CCM_8:49321,TLS1_CK_DHE_PSK_WITH_AES_128_CCM_8:49322,TLS1_CK_DHE_PSK_WITH_AES_256_CCM_8:49323,TLS1_CK_ECDHE_ECDSA_WITH_AES_128_CCM:49324,TLS1_CK_ECDHE_ECDSA_WITH_AES_256_CCM:49325,TLS1_CK_ECDHE_ECDSA_WITH_AES_128_CCM_8:49326,TLS1_CK_ECDHE_ECDSA_WITH_AES_256_CCM_8:49327,TLS1_CK_RSA_WITH_CAMELLIA_128_CBC_SHA256:186,TLS1_CK_DH_DSS_WITH_CAMELLIA_128_CBC_SHA256:187,TLS1_CK_DH_RSA_WITH_CAMELLIA_128_CBC_SHA256:188,TLS1_CK_DHE_DSS_WITH_CAMELLIA_128_CBC_SHA256:189,TLS1_CK_DHE_RSA_WITH_CAMELLIA_128_CBC_SHA256:190,TLS1_CK_ADH_WITH_CAMELLIA_128_CBC_SHA256:191,TLS1_CK_RSA_WITH_CAMELLIA_256_CBC_SHA256:192,TLS1_CK_DH_DSS_WITH_CAMELLIA_256_CBC_SHA256:193,TLS1_CK_DH_RSA_WITH_CAMELLIA_256_CBC_SHA256:194,TLS1_CK_DHE_DSS_WITH_CAMELLIA_256_CBC_SHA256:195,TLS1_CK_DHE_RSA_WITH_CAMELLIA_256_CBC_SHA256:196,TLS1_CK_ADH_WITH_CAMELLIA_256_CBC_SHA256:197,TLS1_CK_ECDH_ECDSA_WITH_NULL_SHA:49153,TLS1_CK_ECDH_ECDSA_WITH_RC4_128_SHA:49154,TLS1_CK_ECDH_ECDSA_WITH_DES_192_CBC3_SHA:49155,TLS1_CK_ECDH_ECDSA_WITH_AES_128_CBC_SHA:49156,TLS1_CK_ECDH_ECDSA_WITH_AES_256_CBC_SHA:49157,TLS1_CK_ECDHE_ECDSA_WITH_NULL_SHA:49158,TLS1_CK_ECDHE_ECDSA_WITH_RC4_128_SHA:49159,TLS1_CK_ECDHE_ECDSA_WITH_DES_192_CBC3_SHA:49160,TLS1_CK_ECDHE_ECDSA_WITH_AES_128_CBC_SHA:49161,TLS1_CK_ECDHE_ECDSA_WITH_AES_256_CBC_SHA:49162,TLS1_CK_ECDH_RSA_WITH_NULL_SHA:49163,TLS1_CK_ECDH_RSA_WITH_RC4_128_SHA:49164,TLS1_CK_ECDH_RSA_WITH_DES_192_CBC3_SHA:49165,TLS1_CK_ECDH_RSA_WITH_AES_128_CBC_SHA:49166,TLS1_CK_ECDH_RSA_WITH_AES_256_CBC_SHA:49167,TLS1_CK_ECDHE_RSA_WITH_NULL_SHA:49168,TLS1_CK_ECDHE_RSA_WITH_RC4_128_SHA:49169,TLS1_CK_ECDHE_RSA_WITH_DES_192_CBC3_SHA:49170,TLS1_CK_ECDHE_RSA_WITH_AES_128_CBC_SHA:49171,TLS1_CK_ECDHE_RSA_WITH_AES_256_CBC_SHA:49172,TLS1_CK_ECDH_anon_WITH_NULL_SHA:49173,TLS1_CK_ECDH_anon_WITH_RC4_128_SHA:49174,TLS1_CK_ECDH_anon_WITH_DES_192_CBC3_SHA:49175,TLS1_CK_ECDH_anon_WITH_AES_128_CBC_SHA:49176,TLS1_CK_ECDH_anon_WITH_AES_256_CBC_SHA:49177,TLS1_CK_SRP_SHA_WITH_3DES_EDE_CBC_SHA:49178,TLS1_CK_SRP_SHA_RSA_WITH_3DES_EDE_CBC_SHA:49179,TLS1_CK_SRP_SHA_DSS_WITH_3DES_EDE_CBC_SHA:49180,TLS1_CK_SRP_SHA_WITH_AES_128_CBC_SHA:49181,TLS1_CK_SRP_SHA_RSA_WITH_AES_128_CBC_SHA:49182,TLS1_CK_SRP_SHA_DSS_WITH_AES_128_CBC_SHA:49183,TLS1_CK_SRP_SHA_WITH_AES_256_CBC_SHA:49184,TLS1_CK_SRP_SHA_RSA_WITH_AES_256_CBC_SHA:49185,TLS1_CK_SRP_SHA_DSS_WITH_AES_256_CBC_SHA:49186,TLS1_CK_ECDHE_ECDSA_WITH_AES_128_SHA256:49187,TLS1_CK_ECDHE_ECDSA_WITH_AES_256_SHA384:49188,TLS1_CK_ECDH_ECDSA_WITH_AES_128_SHA256:49189,TLS1_CK_ECDH_ECDSA_WITH_AES_256_SHA384:49190,TLS1_CK_ECDHE_RSA_WITH_AES_128_SHA256:49191,TLS1_CK_ECDHE_RSA_WITH_AES_256_SHA384:49192,TLS1_CK_ECDH_RSA_WITH_AES_128_SHA256:49193,TLS1_CK_ECDH_RSA_WITH_AES_256_SHA384:49194,TLS1_CK_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256:49195,TLS1_CK_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384:49196,TLS1_CK_ECDH_ECDSA_WITH_AES_128_GCM_SHA256:49197,TLS1_CK_ECDH_ECDSA_WITH_AES_256_GCM_SHA384:49198,TLS1_CK_ECDHE_RSA_WITH_AES_128_GCM_SHA256:49199,TLS1_CK_ECDHE_RSA_WITH_AES_256_GCM_SHA384:49200,TLS1_CK_ECDH_RSA_WITH_AES_128_GCM_SHA256:49201,TLS1_CK_ECDH_RSA_WITH_AES_256_GCM_SHA384:49202,TLS1_CK_ECDHE_PSK_WITH_RC4_128_SHA:49203,TLS1_CK_ECDHE_PSK_WITH_3DES_EDE_CBC_SHA:49204,TLS1_CK_ECDHE_PSK_WITH_AES_128_CBC_SHA:49205,TLS1_CK_ECDHE_PSK_WITH_AES_256_CBC_SHA:49206,TLS1_CK_ECDHE_PSK_WITH_AES_128_CBC_SHA256:49207,TLS1_CK_ECDHE_PSK_WITH_AES_256_CBC_SHA384:49208,TLS1_CK_ECDHE_PSK_WITH_NULL_SHA:49209,TLS1_CK_ECDHE_PSK_WITH_NULL_SHA256:49210,TLS1_CK_ECDHE_PSK_WITH_NULL_SHA384:49211,TLS1_CK_ECDHE_ECDSA_WITH_CAMELLIA_128_CBC_SHA256:49266,TLS1_CK_ECDHE_ECDSA_WITH_CAMELLIA_256_CBC_SHA384:49267,TLS1_CK_ECDH_ECDSA_WITH_CAMELLIA_128_CBC_SHA256:49268,TLS1_CK_ECDH_ECDSA_WITH_CAMELLIA_256_CBC_SHA384:49269,TLS1_CK_ECDHE_RSA_WITH_CAMELLIA_128_CBC_SHA256:49270,TLS1_CK_ECDHE_RSA_WITH_CAMELLIA_256_CBC_SHA384:49271,TLS1_CK_ECDH_RSA_WITH_CAMELLIA_128_CBC_SHA256:49272,TLS1_CK_ECDH_RSA_WITH_CAMELLIA_256_CBC_SHA384:49273,TLS1_CK_PSK_WITH_CAMELLIA_128_CBC_SHA256:49300,TLS1_CK_PSK_WITH_CAMELLIA_256_CBC_SHA384:49301,TLS1_CK_DHE_PSK_WITH_CAMELLIA_128_CBC_SHA256:49302,TLS1_CK_DHE_PSK_WITH_CAMELLIA_256_CBC_SHA384:49303,TLS1_CK_RSA_PSK_WITH_CAMELLIA_128_CBC_SHA256:49304,TLS1_CK_RSA_PSK_WITH_CAMELLIA_256_CBC_SHA384:49305,TLS1_CK_ECDHE_PSK_WITH_CAMELLIA_128_CBC_SHA256:49306,TLS1_CK_ECDHE_PSK_WITH_CAMELLIA_256_CBC_SHA384:49307,TLS1_CK_ECDHE_RSA_WITH_CHACHA20_POLY1305:52392,TLS1_CK_ECDHE_ECDSA_WITH_CHACHA20_POLY1305:52393,TLS1_CK_DHE_RSA_WITH_CHACHA20_POLY1305:52394,TLS1_CK_PSK_WITH_CHACHA20_POLY1305:52395,TLS1_CK_ECDHE_PSK_WITH_CHACHA20_POLY1305:52396,TLS1_CK_DHE_PSK_WITH_CHACHA20_POLY1305:52397,TLS1_CK_RSA_PSK_WITH_CHACHA20_POLY1305:52398};wr(cu);const du={secp256r1:23,secp384r1:24,secp521r1:25,x25519:29,x448:30};wr(du);const hu={uncompressed:0,ansiX962_compressed_prime:1,ansiX962_compressed_char2:2};wr(hu);const mu={anonymous:0,rsa:1,dsa:2,ecdsa:3};wr(mu);const yu={none:0,md5:1,sha1:2,sha224:3,sha256:4,sha384:5,sha512:6};wr(yu);const _u={Warning:1,Fatal:2};wr(_u);const gu={CloseNotify:0,UnexpectedMessage:10,BadRecordMac:20,DecryptionFailed:21,RecordOverflow:22,DecompressionFailure:30,HandshakeFailure:40,NoCertificate:41,BadCertificate:42,UnsupportedCertificate:43,CertificateRevoked:44,CertificateExpired:45,CertificateUnknown:46,IllegalParameter:47,UnknownCa:48,AccessDenied:49,DecodeError:50,DecryptError:51,ExportRestriction:60,ProtocolVersion:70,InsufficientSecurity:71,InternalError:80,UserCanceled:90,NoRenegotiation:100,UnsupportedExtension:110};wr(gu);crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey","deriveBits"]);async function wu(e,r){const s=["GET","HEAD"].includes(e.method)||"body"in r?void 0:await e.blob();return new Request(r.url||e.url,{body:s,method:e.method,headers:e.headers,referrer:e.referrer,referrerPolicy:e.referrerPolicy,mode:e.mode==="navigate"?"same-origin":e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,integrity:e.integrity,...r})}async function bu(e,r,s){const n=fetch(e,r);if(!s)return n;try{return await n}catch{let o;if(typeof e=="string"||e instanceof URL)o=`${s}${e}`;else if(e instanceof Request)o=await wu(e,{url:`${s}${e.url}`});else throw new Error("Invalid input type for fetch");return fetch(o,r)}}const vu=["vfs","literal","wordpress.org/themes","wordpress.org/plugins","url","git:directory"];function Pu(e){return e&&typeof e=="object"&&typeof e.resource=="string"&&vu.includes(e.resource)}class br{get progress(){return this._progress}set progress(r){this._progress=r}setPlayground(r){this.playground=r}get isAsync(){return!1}static create(r,{semaphore:s,progress:n,corsProxy:o}){let i;switch(r.resource){case"vfs":i=new Eu(r,n);break;case"literal":i=new Su(r,n);break;case"wordpress.org/themes":i=new xu(r,n);break;case"wordpress.org/plugins":i=new Lu(r,n);break;case"url":i=new Au(r,n,{corsProxy:o});break;case"git:directory":i=new Tu(r,n,{corsProxy:o});break;case"literal:directory":i=new Ou(r,n);break;default:throw new Error(`Invalid resource: ${r}`)}return i=new $u(i),s&&(i=new Iu(i,s)),i}}class Ga extends br{constructor(r){super(),this.resource=r}get progress(){return this.resource.progress}set progress(r){this.resource.progress=r}get name(){return this.resource.name}get isAsync(){return this.resource.isAsync}setPlayground(r){this.resource.setPlayground(r)}}class Eu extends br{constructor(r,s){super(),this.resource=r,this._progress=s}async resolve(){const r=await this.playground.readFileAsBuffer(this.resource.path);return this.progress?.set(100),new File([r],this.name)}get name(){return this.resource.path.split("/").pop()||""}}class Su extends br{constructor(r,s){super(),this.resource=r,this._progress=s}async resolve(){return this.progress?.set(100),new File([this.resource.contents],this.resource.name)}get name(){return this.resource.name}}class gi extends br{constructor(r,s){super(),this._progress=r,this.corsProxy=s}async resolve(){this.progress?.setCaption(this.caption);const r=this.getURL();try{let s=await bu(r,void 0,this.corsProxy);if(!s.ok)throw new Error(`Could not download "${r}"`);if(s=await Jo(s,this.progress?.loadingListener??ku),s.status!==200)throw new Error(`Could not download "${r}"`);return new File([await s.blob()],this.name)}catch(s){throw new Error(`Could not download "${r}".
				Check if the URL is correct and the server is reachable.
				If it is reachable, the server might be blocking the request.
				Check the browser console and network tabs for more information.

				## Does the console show the error "No 'Access-Control-Allow-Origin' header"?

				This means the server that hosts your file does not allow requests from other sites
				(cross-origin requests, or CORS).	You need to move the asset to a server that allows
				cross-origin file downloads. Learn more about CORS at
				https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS.

				If your file is on GitHub, load it from "raw.githubusercontent.com".
				Here's how to do that:

				1. Start with the original GitHub URL of the file. For example:
				https://github.com/username/repository/blob/branch/filename.
				2. Replace "github.com" with "raw.githubusercontent.com".
				3. Remove the "/blob/" part of the URL.

				The resulting URL should look like this:
				https://raw.githubusercontent.com/username/repository/branch/filename

				Error:
				${s}`)}}get caption(){return`Downloading ${this.name}`}get name(){try{return new URL(this.getURL(),"http://example.com").pathname.split("/").pop()}catch{return this.getURL()}}get isAsync(){return!0}}const ku=()=>{};class Au extends gi{constructor(r,s,n){if(super(s,n?.corsProxy),this.resource=r,this.options=n,this.resource.url.startsWith("https://github.com/")){const o=this.resource.url.match(/^https:\/\/github\.com\/(?<owner>[^/]+)\/(?<repo>[^/]+)\/blob\/(?<branch>[^/]+)\/(?<path>.+[^/])$/);o?.groups&&(this.resource={...this.resource,url:`https://raw.githubusercontent.com/${o.groups.owner}/${o.groups.repo}/${o.groups.branch}/${o.groups.path}`})}}getURL(){return this.resource.url}get caption(){return this.resource.caption??super.caption}}class Tu extends br{constructor(r,s,n){super(),this.reference=r,this._progress=s,this.options=n}async resolve(){const r=this.options?.corsProxy?`${this.options.corsProxy}${this.reference.url}`:this.reference.url,s=await Ul(r,{value:this.reference.ref,type:"infer"}),n=await Wl(r,s),o=this.reference.path.replace(/^\/+/,""),i=Zl(n,o);let t=await Nl(r,s,i);return t=Cu(t,p=>p.substring(o.length).replace(/^\/+/,"")),{name:_t(this.reference.path)||this.reference.url.replaceAll(/[^a-zA-Z0-9-.]/g,"-").replaceAll(/-+/g,"-"),files:t}}get name(){return this.reference.path.split("/").pop()}}function Cu(e,r){return Object.fromEntries(Object.entries(e).map(([s,n])=>[r(s),n]))}class Ou extends br{constructor(r,s){super(),this.reference=r,this._progress=s}async resolve(){return this.reference}get name(){return this.reference.name}}class xu extends gi{constructor(r,s){super(s),this.resource=r}get name(){return ps(this.resource.slug)}getURL(){return`https://downloads.wordpress.org/theme/${Za(this.resource.slug)}`}}class Lu extends gi{constructor(r,s){super(s),this.resource=r}get name(){return ps(this.resource.slug)}getURL(){return`https://downloads.wordpress.org/plugin/${Za(this.resource.slug)}`}}function Za(e){return!e||e.endsWith(".zip")?e:e+".latest-stable.zip"}class $u extends Ga{async resolve(){return this.promise||(this.promise=this.resource.resolve()),this.promise}}class Iu extends Ga{constructor(r,s){super(r),this.semaphore=s}async resolve(){return this.isAsync?this.semaphore.run(()=>this.resource.resolve()):this.resource.resolve()}}const Hu="/assets/data-liberation-core.phar-3a939d0a.gz",Ru={type:"object",properties:{landingPage:{type:"string",description:"The URL to navigate to after the blueprint has been run."},description:{type:"string",description:"Optional description. It doesn't do anything but is exposed as a courtesy to developers who may want to document which blueprint file does what.",deprecated:"Use meta.description instead."},meta:{type:"object",properties:{title:{type:"string",description:"A clear and concise name for your Blueprint."},description:{type:"string",description:"A brief explanation of what your Blueprint offers."},author:{type:"string",description:"A GitHub username of the author of this Blueprint."},categories:{type:"array",items:{type:"string"},description:"Relevant categories to help users find your Blueprint in the future Blueprints section on WordPress.org."}},required:["title","author"],additionalProperties:!1,description:"Optional metadata. Used by the Blueprints gallery at https://github.com/WordPress/blueprints"},preferredVersions:{type:"object",properties:{php:{anyOf:[{$ref:"#/definitions/SupportedPHPVersion"},{type:"string",const:"latest"}],description:"The preferred PHP version to use. If not specified, the latest supported version will be used"},wp:{type:"string",description:"The preferred WordPress version to use. If not specified, the latest supported version will be used"}},required:["php","wp"],additionalProperties:!1,description:"The preferred PHP and WordPress versions to use."},features:{type:"object",properties:{networking:{type:"boolean",description:"Should boot with support for network request via wp_safe_remote_get?"}},additionalProperties:!1},extraLibraries:{type:"array",items:{$ref:"#/definitions/ExtraLibrary"},description:"Extra libraries to preload into the Playground instance."},constants:{$ref:"#/definitions/PHPConstants",description:"PHP Constants to define on every request"},plugins:{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/definitions/FileReference"}]},description:"WordPress plugins to install and activate"},siteOptions:{type:"object",additionalProperties:{type:"string"},properties:{blogname:{type:"string",description:"The site title"}},description:"WordPress site options to define"},login:{anyOf:[{type:"boolean"},{type:"object",properties:{username:{type:"string"},password:{type:"string"}},required:["username","password"],additionalProperties:!1}],description:"User to log in as. If true, logs the user in as admin/password."},phpExtensionBundles:{deprecated:"No longer used. Feel free to remove it from your Blueprint."},steps:{type:"array",items:{anyOf:[{$ref:"#/definitions/StepDefinition"},{type:"string"},{not:{}},{type:"boolean",const:!1},{type:"null"}]},description:"The steps to run after every other operation in this Blueprint was executed."},$schema:{type:"string"}},additionalProperties:!1},Du={type:"string",enum:["8.3","8.2","8.1","8.0","7.4","7.3","7.2","7.1","7.0"]},Bu={type:"object",additionalProperties:{type:["string","boolean","number"]}},Va=Object.prototype.hasOwnProperty;function le(e,{instancePath:r="",parentData:s,parentDataProperty:n,rootData:o=e}={}){let i=null,t=0;const p=t;let m=!1;const c=t;if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let W;if(e.resource===void 0&&(W="resource")||e.path===void 0&&(W="path")){const B={instancePath:r,schemaPath:"#/definitions/VFSReference/required",keyword:"required",params:{missingProperty:W},message:"must have required property '"+W+"'"};i===null?i=[B]:i.push(B),t++}else{const B=t;for(const O in e)if(!(O==="resource"||O==="path")){const N={instancePath:r,schemaPath:"#/definitions/VFSReference/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:O},message:"must NOT have additional properties"};i===null?i=[N]:i.push(N),t++;break}if(B===t){if(e.resource!==void 0){let O=e.resource;const N=t;if(typeof O!="string"){const C={instancePath:r+"/resource",schemaPath:"#/definitions/VFSReference/properties/resource/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[C]:i.push(C),t++}if(O!=="vfs"){const C={instancePath:r+"/resource",schemaPath:"#/definitions/VFSReference/properties/resource/const",keyword:"const",params:{allowedValue:"vfs"},message:"must be equal to constant"};i===null?i=[C]:i.push(C),t++}var b=N===t}else var b=!0;if(b)if(e.path!==void 0){const O=t;if(typeof e.path!="string"){const C={instancePath:r+"/path",schemaPath:"#/definitions/VFSReference/properties/path/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[C]:i.push(C),t++}var b=O===t}else var b=!0}}}else{const W={instancePath:r,schemaPath:"#/definitions/VFSReference/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[W]:i.push(W),t++}var g=c===t;if(m=m||g,!m){const W=t;if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let N;if(e.resource===void 0&&(N="resource")||e.name===void 0&&(N="name")||e.contents===void 0&&(N="contents")){const C={instancePath:r,schemaPath:"#/definitions/LiteralReference/required",keyword:"required",params:{missingProperty:N},message:"must have required property '"+N+"'"};i===null?i=[C]:i.push(C),t++}else{const C=t;for(const T in e)if(!(T==="resource"||T==="name"||T==="contents")){const S={instancePath:r,schemaPath:"#/definitions/LiteralReference/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:T},message:"must NOT have additional properties"};i===null?i=[S]:i.push(S),t++;break}if(C===t){if(e.resource!==void 0){let T=e.resource;const S=t;if(typeof T!="string"){const k={instancePath:r+"/resource",schemaPath:"#/definitions/LiteralReference/properties/resource/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[k]:i.push(k),t++}if(T!=="literal"){const k={instancePath:r+"/resource",schemaPath:"#/definitions/LiteralReference/properties/resource/const",keyword:"const",params:{allowedValue:"literal"},message:"must be equal to constant"};i===null?i=[k]:i.push(k),t++}var w=S===t}else var w=!0;if(w){if(e.name!==void 0){const T=t;if(typeof e.name!="string"){const k={instancePath:r+"/name",schemaPath:"#/definitions/LiteralReference/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[k]:i.push(k),t++}var w=T===t}else var w=!0;if(w)if(e.contents!==void 0){let T=e.contents;const S=t,k=t;let D=!1;const R=t;if(typeof T!="string"){const V={instancePath:r+"/contents",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[V]:i.push(V),t++}var $=R===t;if(D=D||$,!D){const V=t;if(t===V)if(T&&typeof T=="object"&&!Array.isArray(T)){let K;if(T.BYTES_PER_ELEMENT===void 0&&(K="BYTES_PER_ELEMENT")||T.buffer===void 0&&(K="buffer")||T.byteLength===void 0&&(K="byteLength")||T.byteOffset===void 0&&(K="byteOffset")||T.length===void 0&&(K="length")){const Y={instancePath:r+"/contents",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/required",keyword:"required",params:{missingProperty:K},message:"must have required property '"+K+"'"};i===null?i=[Y]:i.push(Y),t++}else{const Y=t;for(const G in T)if(!(G==="BYTES_PER_ELEMENT"||G==="buffer"||G==="byteLength"||G==="byteOffset"||G==="length")){let se=T[G];const ee=t;if(!(typeof se=="number"&&isFinite(se))){const X={instancePath:r+"/contents/"+G.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/additionalProperties/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[X]:i.push(X),t++}var E=ee===t;if(!E)break}if(Y===t){if(T.BYTES_PER_ELEMENT!==void 0){let G=T.BYTES_PER_ELEMENT;const se=t;if(!(typeof G=="number"&&isFinite(G))){const ee={instancePath:r+"/contents/BYTES_PER_ELEMENT",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/BYTES_PER_ELEMENT/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[ee]:i.push(ee),t++}var j=se===t}else var j=!0;if(j){if(T.buffer!==void 0){let G=T.buffer;const se=t;if(t===se)if(G&&typeof G=="object"&&!Array.isArray(G)){let X;if(G.byteLength===void 0&&(X="byteLength")){const J={instancePath:r+"/contents/buffer",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/buffer/required",keyword:"required",params:{missingProperty:X},message:"must have required property '"+X+"'"};i===null?i=[J]:i.push(J),t++}else{const J=t;for(const re in G)if(re!=="byteLength"){const ne={instancePath:r+"/contents/buffer",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/buffer/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:re},message:"must NOT have additional properties"};i===null?i=[ne]:i.push(ne),t++;break}if(J===t&&G.byteLength!==void 0){let re=G.byteLength;if(!(typeof re=="number"&&isFinite(re))){const ne={instancePath:r+"/contents/buffer/byteLength",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/buffer/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[ne]:i.push(ne),t++}}}}else{const X={instancePath:r+"/contents/buffer",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/buffer/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[X]:i.push(X),t++}var j=se===t}else var j=!0;if(j){if(T.byteLength!==void 0){let G=T.byteLength;const se=t;if(!(typeof G=="number"&&isFinite(G))){const X={instancePath:r+"/contents/byteLength",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[X]:i.push(X),t++}var j=se===t}else var j=!0;if(j){if(T.byteOffset!==void 0){let G=T.byteOffset;const se=t;if(!(typeof G=="number"&&isFinite(G))){const X={instancePath:r+"/contents/byteOffset",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/byteOffset/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[X]:i.push(X),t++}var j=se===t}else var j=!0;if(j)if(T.length!==void 0){let G=T.length;const se=t;if(!(typeof G=="number"&&isFinite(G))){const X={instancePath:r+"/contents/length",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/length/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[X]:i.push(X),t++}var j=se===t}else var j=!0}}}}}}else{const K={instancePath:r+"/contents",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[K]:i.push(K),t++}var $=V===t;D=D||$}if(D)t=k,i!==null&&(k?i.length=k:i=null);else{const V={instancePath:r+"/contents",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};i===null?i=[V]:i.push(V),t++}var w=S===t}else var w=!0}}}}else{const N={instancePath:r,schemaPath:"#/definitions/LiteralReference/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[N]:i.push(N),t++}var g=W===t;if(m=m||g,!m){const N=t;if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let S;if(e.resource===void 0&&(S="resource")||e.slug===void 0&&(S="slug")){const k={instancePath:r,schemaPath:"#/definitions/CoreThemeReference/required",keyword:"required",params:{missingProperty:S},message:"must have required property '"+S+"'"};i===null?i=[k]:i.push(k),t++}else{const k=t;for(const D in e)if(!(D==="resource"||D==="slug")){const R={instancePath:r,schemaPath:"#/definitions/CoreThemeReference/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:D},message:"must NOT have additional properties"};i===null?i=[R]:i.push(R),t++;break}if(k===t){if(e.resource!==void 0){let D=e.resource;const R=t;if(typeof D!="string"){const L={instancePath:r+"/resource",schemaPath:"#/definitions/CoreThemeReference/properties/resource/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[L]:i.push(L),t++}if(D!=="wordpress.org/themes"){const L={instancePath:r+"/resource",schemaPath:"#/definitions/CoreThemeReference/properties/resource/const",keyword:"const",params:{allowedValue:"wordpress.org/themes"},message:"must be equal to constant"};i===null?i=[L]:i.push(L),t++}var F=R===t}else var F=!0;if(F)if(e.slug!==void 0){const D=t;if(typeof e.slug!="string"){const L={instancePath:r+"/slug",schemaPath:"#/definitions/CoreThemeReference/properties/slug/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[L]:i.push(L),t++}var F=D===t}else var F=!0}}}else{const S={instancePath:r,schemaPath:"#/definitions/CoreThemeReference/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[S]:i.push(S),t++}var g=N===t;if(m=m||g,!m){const S=t;if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let R;if(e.resource===void 0&&(R="resource")||e.slug===void 0&&(R="slug")){const L={instancePath:r,schemaPath:"#/definitions/CorePluginReference/required",keyword:"required",params:{missingProperty:R},message:"must have required property '"+R+"'"};i===null?i=[L]:i.push(L),t++}else{const L=t;for(const V in e)if(!(V==="resource"||V==="slug")){const z={instancePath:r,schemaPath:"#/definitions/CorePluginReference/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:V},message:"must NOT have additional properties"};i===null?i=[z]:i.push(z),t++;break}if(L===t){if(e.resource!==void 0){let V=e.resource;const z=t;if(typeof V!="string"){const K={instancePath:r+"/resource",schemaPath:"#/definitions/CorePluginReference/properties/resource/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[K]:i.push(K),t++}if(V!=="wordpress.org/plugins"){const K={instancePath:r+"/resource",schemaPath:"#/definitions/CorePluginReference/properties/resource/const",keyword:"const",params:{allowedValue:"wordpress.org/plugins"},message:"must be equal to constant"};i===null?i=[K]:i.push(K),t++}var q=z===t}else var q=!0;if(q)if(e.slug!==void 0){const V=t;if(typeof e.slug!="string"){const K={instancePath:r+"/slug",schemaPath:"#/definitions/CorePluginReference/properties/slug/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[K]:i.push(K),t++}var q=V===t}else var q=!0}}}else{const R={instancePath:r,schemaPath:"#/definitions/CorePluginReference/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[R]:i.push(R),t++}var g=S===t;if(m=m||g,!m){const R=t;if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let z;if(e.resource===void 0&&(z="resource")||e.url===void 0&&(z="url")){const K={instancePath:r,schemaPath:"#/definitions/UrlReference/required",keyword:"required",params:{missingProperty:z},message:"must have required property '"+z+"'"};i===null?i=[K]:i.push(K),t++}else{const K=t;for(const Y in e)if(!(Y==="resource"||Y==="url"||Y==="caption")){const G={instancePath:r,schemaPath:"#/definitions/UrlReference/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Y},message:"must NOT have additional properties"};i===null?i=[G]:i.push(G),t++;break}if(K===t){if(e.resource!==void 0){let Y=e.resource;const G=t;if(typeof Y!="string"){const se={instancePath:r+"/resource",schemaPath:"#/definitions/UrlReference/properties/resource/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[se]:i.push(se),t++}if(Y!=="url"){const se={instancePath:r+"/resource",schemaPath:"#/definitions/UrlReference/properties/resource/const",keyword:"const",params:{allowedValue:"url"},message:"must be equal to constant"};i===null?i=[se]:i.push(se),t++}var I=G===t}else var I=!0;if(I){if(e.url!==void 0){const Y=t;if(typeof e.url!="string"){const se={instancePath:r+"/url",schemaPath:"#/definitions/UrlReference/properties/url/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[se]:i.push(se),t++}var I=Y===t}else var I=!0;if(I)if(e.caption!==void 0){const Y=t;if(typeof e.caption!="string"){const se={instancePath:r+"/caption",schemaPath:"#/definitions/UrlReference/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[se]:i.push(se),t++}var I=Y===t}else var I=!0}}}}else{const z={instancePath:r,schemaPath:"#/definitions/UrlReference/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[z]:i.push(z),t++}var g=R===t;m=m||g}}}}if(m)t=p,i!==null&&(p?i.length=p:i=null);else{const W={instancePath:r,schemaPath:"#/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[W]:i.push(W),t++,le.errors=i,!1}return le.errors=i,t===0}const Wt={type:"object",discriminator:{propertyName:"step"},required:["step"],oneOf:[{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"activatePlugin"},pluginPath:{type:"string",description:"Path to the plugin directory as absolute path (/wordpress/wp-content/plugins/plugin-name); or the plugin entry file relative to the plugins directory (plugin-name/plugin-name.php)."},pluginName:{type:"string",description:"Optional. Plugin name to display in the progress bar."}},required:["pluginPath","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"activateTheme"},themeFolderName:{type:"string",description:"The name of the theme folder inside wp-content/themes/"}},required:["step","themeFolderName"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"cp"},fromPath:{type:"string",description:"Source path"},toPath:{type:"string",description:"Target path"}},required:["fromPath","step","toPath"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"defineWpConfigConsts"},consts:{type:"object",additionalProperties:{},description:"The constants to define"},method:{type:"string",enum:["rewrite-wp-config","define-before-run"],description:`The method of defining the constants in wp-config.php. Possible values are:

- rewrite-wp-config: Default. Rewrites the wp-config.php file to                      explicitly call define() with the requested                      name and value. This method alters the file                      on the disk, but it doesn't conflict with                      existing define() calls in wp-config.php.

- define-before-run: Defines the constant before running the requested                      script. It doesn't alter any files on the disk, but                      constants defined this way may conflict with existing                      define() calls in wp-config.php.`},virtualize:{type:"boolean",deprecated:`This option is noop and will be removed in a future version.
This option is only kept in here to avoid breaking Blueprint schema validation
for existing apps using this option.`}},required:["consts","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"defineSiteUrl"},siteUrl:{type:"string",description:"The URL"}},required:["siteUrl","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"enableMultisite"},wpCliPath:{type:"string",description:"wp-cli.phar path"}},required:["step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"importWxr"},file:{$ref:"#/definitions/FileReference",description:"The file to import"},importer:{type:"string",enum:["data-liberation","default"],description:"The importer to use. Possible values:\n\n- `default`: The importer from https://github.com/humanmade/WordPress-Importer\n- `data-liberation`: The experimental Data Liberation WXR importer developed at                      https://github.com/WordPress/wordpress-playground/issues/1894\n\nThis option is deprecated. The syntax will not be removed, but once the Data Liberation importer matures, it will become the only supported importer and the `importer` option will be ignored.",deprecated:!0}},required:["file","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"importThemeStarterContent",description:"The step identifier."},themeSlug:{type:"string",description:"The name of the theme to import content from."}},required:["step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"importWordPressFiles"},wordPressFilesZip:{$ref:"#/definitions/FileReference",description:"The zip file containing the top-level WordPress files and directories."},pathInZip:{type:"string",description:"The path inside the zip file where the WordPress files are."}},required:["step","wordPressFilesZip"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},ifAlreadyInstalled:{type:"string",enum:["overwrite","skip","error"],description:"What to do if the asset already exists."},step:{type:"string",const:"installPlugin",description:"The step identifier."},pluginData:{anyOf:[{$ref:"#/definitions/FileReference"},{$ref:"#/definitions/DirectoryReference"}],description:"The plugin files to install. It can be a plugin zip file, a single PHP file, or a directory containing all the plugin files at its root."},pluginZipFile:{$ref:"#/definitions/FileReference",deprecated:". Use `pluginData` instead."},options:{$ref:"#/definitions/InstallPluginOptions",description:"Optional installation options."}},required:["pluginData","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},ifAlreadyInstalled:{type:"string",enum:["overwrite","skip","error"],description:"What to do if the asset already exists."},step:{type:"string",const:"installTheme",description:"The step identifier."},themeData:{anyOf:[{$ref:"#/definitions/FileReference"},{$ref:"#/definitions/DirectoryReference"}],description:"The theme files to install. It can be either a theme zip file, or a directory containing all the theme files at its root."},themeZipFile:{$ref:"#/definitions/FileReference",deprecated:". Use `themeData` instead."},options:{$ref:"#/definitions/InstallThemeOptions",description:"Optional installation options."}},required:["step","themeData"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"login"},username:{type:"string",description:"The user to log in as. Defaults to 'admin'."},password:{type:"string",deprecated:`The password field is deprecated and will be removed in a future version.
Only the username field is required for user authentication.`}},required:["step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"mkdir"},path:{type:"string",description:"The path of the directory you want to create"}},required:["path","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"mv"},fromPath:{type:"string",description:"Source path"},toPath:{type:"string",description:"Target path"}},required:["fromPath","step","toPath"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"resetData"}},required:["step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"request"},request:{$ref:"#/definitions/PHPRequest",description:"Request details (See /wordpress-playground/api/universal/interface/PHPRequest)"}},required:["request","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"rm"},path:{type:"string",description:"The path to remove"}},required:["path","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"rmdir"},path:{type:"string",description:"The path to remove"}},required:["path","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"runPHP",description:"The step identifier."},code:{type:"string",description:"The PHP code to run."}},required:["code","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"runPHPWithOptions"},options:{$ref:"#/definitions/PHPRunOptions",description:"Run options (See /wordpress-playground/api/universal/interface/PHPRunOptions/))"}},required:["options","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"runWpInstallationWizard"},options:{$ref:"#/definitions/WordPressInstallationOptions"}},required:["options","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"runSql",description:"The step identifier."},sql:{$ref:"#/definitions/FileReference",description:"The SQL to run. Each non-empty line must contain a valid SQL query."}},required:["sql","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"setSiteOptions",description:'The name of the step. Must be "setSiteOptions".'},options:{type:"object",additionalProperties:{},description:"The options to set on the site."}},required:["options","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"unzip"},zipFile:{$ref:"#/definitions/FileReference",description:"The zip file to extract"},zipPath:{type:"string",description:"The path of the zip file to extract",deprecated:"Use zipFile instead."},extractToPath:{type:"string",description:"The path to extract the zip file to"}},required:["extractToPath","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"updateUserMeta"},meta:{type:"object",additionalProperties:{},description:'An object of user meta values to set, e.g. { "first_name": "John" }'},userId:{type:"number",description:"User ID"}},required:["meta","step","userId"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"writeFile"},path:{type:"string",description:"The path of the file to write to"},data:{anyOf:[{$ref:"#/definitions/FileReference"},{type:"string"},{type:"object",properties:{BYTES_PER_ELEMENT:{type:"number"},buffer:{type:"object",properties:{byteLength:{type:"number"}},required:["byteLength"],additionalProperties:!1},byteLength:{type:"number"},byteOffset:{type:"number"},length:{type:"number"}},required:["BYTES_PER_ELEMENT","buffer","byteLength","byteOffset","length"],additionalProperties:{type:"number"}}],description:"The data to write"}},required:["data","path","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"writeFiles"},writeToPath:{type:"string",description:"The path of the file to write to"},filesTree:{$ref:"#/definitions/DirectoryReference",description:"The data to write"}},required:["filesTree","step","writeToPath"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"wp-cli",description:"The step identifier."},command:{anyOf:[{type:"string"},{type:"array",items:{type:"string"}}],description:"The WP CLI command to run."},wpCliPath:{type:"string",description:"wp-cli.phar path"}},required:["command","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"setSiteLanguage"},language:{type:"string",description:"The language to set, e.g. 'en_US'"}},required:["language","step"]}]},Fu={type:"object",additionalProperties:{anyOf:[{$ref:"#/definitions/FileTree"},{type:["object","string"]}]},properties:{}},Ns={validate:Rr};function Rr(e,{instancePath:r="",parentData:s,parentDataProperty:n,rootData:o=e}={}){let i=null,t=0;if(t===0)if(e&&typeof e=="object"&&!Array.isArray(e))for(const c in e){let h=e[c];const b=t,g=t;let w=!1;const $=t;Ns.validate(h,{instancePath:r+"/"+c.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:e,parentDataProperty:c,rootData:o})||(i=i===null?Ns.validate.errors:i.concat(Ns.validate.errors),t=i.length);var p=$===t;if(w=w||p,!w){const E=t;if(!(h&&typeof h=="object"&&!Array.isArray(h))&&typeof h!="string"){const F={instancePath:r+"/"+c.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/additionalProperties/anyOf/1/type",keyword:"type",params:{type:Fu.additionalProperties.anyOf[1].type},message:"must be object,string"};i===null?i=[F]:i.push(F),t++}var p=E===t;w=w||p}if(w)t=g,i!==null&&(g?i.length=g:i=null);else{const E={instancePath:r+"/"+c.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[E]:i.push(E),t++,Rr.errors=i,!1}var m=b===t;if(!m)break}else return Rr.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Rr.errors=i,t===0}function or(e,{instancePath:r="",parentData:s,parentDataProperty:n,rootData:o=e}={}){let i=null,t=0;if(t===0)if(e&&typeof e=="object"&&!Array.isArray(e)){let m;if(e.files===void 0&&(m="files")||e.name===void 0&&(m="name")||e.resource===void 0&&(m="resource"))return or.errors=[{instancePath:r,schemaPath:"#/required",keyword:"required",params:{missingProperty:m},message:"must have required property '"+m+"'"}],!1;{const c=t;for(const h in e)if(!(h==="resource"||h==="files"||h==="name"))return or.errors=[{instancePath:r,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties"}],!1;if(c===t){if(e.resource!==void 0){let h=e.resource;const b=t;if(typeof h!="string")return or.errors=[{instancePath:r+"/resource",schemaPath:"#/properties/resource/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(h!=="literal:directory")return or.errors=[{instancePath:r+"/resource",schemaPath:"#/properties/resource/const",keyword:"const",params:{allowedValue:"literal:directory"},message:"must be equal to constant"}],!1;var p=b===t}else var p=!0;if(p){if(e.files!==void 0){const h=t;Rr(e.files,{instancePath:r+"/files",parentData:e,parentDataProperty:"files",rootData:o})||(i=i===null?Rr.errors:i.concat(Rr.errors),t=i.length);var p=h===t}else var p=!0;if(p)if(e.name!==void 0){const h=t;if(typeof e.name!="string")return or.errors=[{instancePath:r+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=h===t}else var p=!0}}}}else return or.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return or.errors=i,t===0}function Qe(e,{instancePath:r="",parentData:s,parentDataProperty:n,rootData:o=e}={}){let i=null,t=0;const p=t;let m=!1;const c=t;if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let w;if(e.resource===void 0&&(w="resource")||e.url===void 0&&(w="url")||e.ref===void 0&&(w="ref")||e.path===void 0&&(w="path")){const $={instancePath:r,schemaPath:"#/definitions/GitDirectoryReference/required",keyword:"required",params:{missingProperty:w},message:"must have required property '"+w+"'"};i===null?i=[$]:i.push($),t++}else{const $=t;for(const E in e)if(!(E==="resource"||E==="url"||E==="ref"||E==="path")){const j={instancePath:r,schemaPath:"#/definitions/GitDirectoryReference/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:E},message:"must NOT have additional properties"};i===null?i=[j]:i.push(j),t++;break}if($===t){if(e.resource!==void 0){let E=e.resource;const j=t;if(typeof E!="string"){const F={instancePath:r+"/resource",schemaPath:"#/definitions/GitDirectoryReference/properties/resource/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[F]:i.push(F),t++}if(E!=="git:directory"){const F={instancePath:r+"/resource",schemaPath:"#/definitions/GitDirectoryReference/properties/resource/const",keyword:"const",params:{allowedValue:"git:directory"},message:"must be equal to constant"};i===null?i=[F]:i.push(F),t++}var b=j===t}else var b=!0;if(b){if(e.url!==void 0){const E=t;if(typeof e.url!="string"){const F={instancePath:r+"/url",schemaPath:"#/definitions/GitDirectoryReference/properties/url/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[F]:i.push(F),t++}var b=E===t}else var b=!0;if(b){if(e.ref!==void 0){const E=t;if(typeof e.ref!="string"){const F={instancePath:r+"/ref",schemaPath:"#/definitions/GitDirectoryReference/properties/ref/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[F]:i.push(F),t++}var b=E===t}else var b=!0;if(b)if(e.path!==void 0){const E=t;if(typeof e.path!="string"){const F={instancePath:r+"/path",schemaPath:"#/definitions/GitDirectoryReference/properties/path/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[F]:i.push(F),t++}var b=E===t}else var b=!0}}}}}else{const w={instancePath:r,schemaPath:"#/definitions/GitDirectoryReference/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[w]:i.push(w),t++}var g=c===t;if(m=m||g,!m){const w=t;or(e,{instancePath:r,parentData:s,parentDataProperty:n,rootData:o})||(i=i===null?or.errors:i.concat(or.errors),t=i.length);var g=w===t;m=m||g}if(m)t=p,i!==null&&(p?i.length=p:i=null);else{const w={instancePath:r,schemaPath:"#/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[w]:i.push(w),t++,Qe.errors=i,!1}return Qe.errors=i,t===0}const Ya={type:"string",enum:["GET","POST","HEAD","OPTIONS","PATCH","PUT","DELETE"]};function We(e,{instancePath:r="",parentData:s,parentDataProperty:n,rootData:o=e}={}){let i=null,t=0;if(t===0)if(e&&typeof e=="object"&&!Array.isArray(e)){let F;if(e.url===void 0&&(F="url"))return We.errors=[{instancePath:r,schemaPath:"#/required",keyword:"required",params:{missingProperty:F},message:"must have required property '"+F+"'"}],!1;{const q=t;for(const I in e)if(!(I==="method"||I==="url"||I==="headers"||I==="body"))return We.errors=[{instancePath:r,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:I},message:"must NOT have additional properties"}],!1;if(q===t){if(e.method!==void 0){let I=e.method;const W=t;if(typeof I!="string")return We.errors=[{instancePath:r+"/method",schemaPath:"#/definitions/HTTPMethod/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(I==="GET"||I==="POST"||I==="HEAD"||I==="OPTIONS"||I==="PATCH"||I==="PUT"||I==="DELETE"))return We.errors=[{instancePath:r+"/method",schemaPath:"#/definitions/HTTPMethod/enum",keyword:"enum",params:{allowedValues:Ya.enum},message:"must be equal to one of the allowed values"}],!1;var p=W===t}else var p=!0;if(p){if(e.url!==void 0){const I=t;if(typeof e.url!="string")return We.errors=[{instancePath:r+"/url",schemaPath:"#/properties/url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=I===t}else var p=!0;if(p){if(e.headers!==void 0){let I=e.headers;const W=t;if(t===t)if(I&&typeof I=="object"&&!Array.isArray(I))for(const N in I){const C=t;if(typeof I[N]!="string")return We.errors=[{instancePath:r+"/headers/"+N.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/PHPRequestHeaders/additionalProperties/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=C===t;if(!m)break}else return We.errors=[{instancePath:r+"/headers",schemaPath:"#/definitions/PHPRequestHeaders/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=W===t}else var p=!0;if(p)if(e.body!==void 0){let I=e.body;const W=t,B=t;let O=!1;const N=t;if(typeof I!="string"){const T={instancePath:r+"/body",schemaPath:"#/properties/body/anyOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[T]:i.push(T),t++}var c=N===t;if(O=O||c,!O){const T=t;if(t===T)if(I&&typeof I=="object"&&!Array.isArray(I)){let k;if(I.BYTES_PER_ELEMENT===void 0&&(k="BYTES_PER_ELEMENT")||I.buffer===void 0&&(k="buffer")||I.byteLength===void 0&&(k="byteLength")||I.byteOffset===void 0&&(k="byteOffset")||I.length===void 0&&(k="length")){const D={instancePath:r+"/body",schemaPath:"#/properties/body/anyOf/1/required",keyword:"required",params:{missingProperty:k},message:"must have required property '"+k+"'"};i===null?i=[D]:i.push(D),t++}else{const D=t;for(const R in I)if(!(R==="BYTES_PER_ELEMENT"||R==="buffer"||R==="byteLength"||R==="byteOffset"||R==="length")){let L=I[R];const V=t;if(!(typeof L=="number"&&isFinite(L))){const z={instancePath:r+"/body/"+R.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/1/additionalProperties/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[z]:i.push(z),t++}var h=V===t;if(!h)break}if(D===t){if(I.BYTES_PER_ELEMENT!==void 0){let R=I.BYTES_PER_ELEMENT;const L=t;if(!(typeof R=="number"&&isFinite(R))){const V={instancePath:r+"/body/BYTES_PER_ELEMENT",schemaPath:"#/properties/body/anyOf/1/properties/BYTES_PER_ELEMENT/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[V]:i.push(V),t++}var b=L===t}else var b=!0;if(b){if(I.buffer!==void 0){let R=I.buffer;const L=t;if(t===L)if(R&&typeof R=="object"&&!Array.isArray(R)){let z;if(R.byteLength===void 0&&(z="byteLength")){const K={instancePath:r+"/body/buffer",schemaPath:"#/properties/body/anyOf/1/properties/buffer/required",keyword:"required",params:{missingProperty:z},message:"must have required property '"+z+"'"};i===null?i=[K]:i.push(K),t++}else{const K=t;for(const Y in R)if(Y!=="byteLength"){const G={instancePath:r+"/body/buffer",schemaPath:"#/properties/body/anyOf/1/properties/buffer/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Y},message:"must NOT have additional properties"};i===null?i=[G]:i.push(G),t++;break}if(K===t&&R.byteLength!==void 0){let Y=R.byteLength;if(!(typeof Y=="number"&&isFinite(Y))){const G={instancePath:r+"/body/buffer/byteLength",schemaPath:"#/properties/body/anyOf/1/properties/buffer/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[G]:i.push(G),t++}}}}else{const z={instancePath:r+"/body/buffer",schemaPath:"#/properties/body/anyOf/1/properties/buffer/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[z]:i.push(z),t++}var b=L===t}else var b=!0;if(b){if(I.byteLength!==void 0){let R=I.byteLength;const L=t;if(!(typeof R=="number"&&isFinite(R))){const z={instancePath:r+"/body/byteLength",schemaPath:"#/properties/body/anyOf/1/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[z]:i.push(z),t++}var b=L===t}else var b=!0;if(b){if(I.byteOffset!==void 0){let R=I.byteOffset;const L=t;if(!(typeof R=="number"&&isFinite(R))){const z={instancePath:r+"/body/byteOffset",schemaPath:"#/properties/body/anyOf/1/properties/byteOffset/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[z]:i.push(z),t++}var b=L===t}else var b=!0;if(b)if(I.length!==void 0){let R=I.length;const L=t;if(!(typeof R=="number"&&isFinite(R))){const z={instancePath:r+"/body/length",schemaPath:"#/properties/body/anyOf/1/properties/length/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[z]:i.push(z),t++}var b=L===t}else var b=!0}}}}}}else{const k={instancePath:r+"/body",schemaPath:"#/properties/body/anyOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[k]:i.push(k),t++}var c=T===t;if(O=O||c,!O){const k=t;if(t===k)if(I&&typeof I=="object"&&!Array.isArray(I))for(const R in I){let L=I[R];const V=t,z=t;let K=!1;const Y=t;if(typeof L!="string"){const G={instancePath:r+"/body/"+R.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[G]:i.push(G),t++}var g=Y===t;if(K=K||g,!K){const G=t;if(t===G)if(L&&typeof L=="object"&&!Array.isArray(L)){let ee;if(L.BYTES_PER_ELEMENT===void 0&&(ee="BYTES_PER_ELEMENT")||L.buffer===void 0&&(ee="buffer")||L.byteLength===void 0&&(ee="byteLength")||L.byteOffset===void 0&&(ee="byteOffset")||L.length===void 0&&(ee="length")){const X={instancePath:r+"/body/"+R.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/required",keyword:"required",params:{missingProperty:ee},message:"must have required property '"+ee+"'"};i===null?i=[X]:i.push(X),t++}else{const X=t;for(const J in L)if(!(J==="BYTES_PER_ELEMENT"||J==="buffer"||J==="byteLength"||J==="byteOffset"||J==="length")){let re=L[J];const ne=t;if(!(typeof re=="number"&&isFinite(re))){const te={instancePath:r+"/body/"+R.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+J.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/additionalProperties/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[te]:i.push(te),t++}var w=ne===t;if(!w)break}if(X===t){if(L.BYTES_PER_ELEMENT!==void 0){let J=L.BYTES_PER_ELEMENT;const re=t;if(!(typeof J=="number"&&isFinite(J))){const ne={instancePath:r+"/body/"+R.replace(/~/g,"~0").replace(/\//g,"~1")+"/BYTES_PER_ELEMENT",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/BYTES_PER_ELEMENT/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[ne]:i.push(ne),t++}var $=re===t}else var $=!0;if($){if(L.buffer!==void 0){let J=L.buffer;const re=t;if(t===re)if(J&&typeof J=="object"&&!Array.isArray(J)){let te;if(J.byteLength===void 0&&(te="byteLength")){const ge={instancePath:r+"/body/"+R.replace(/~/g,"~0").replace(/\//g,"~1")+"/buffer",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/buffer/required",keyword:"required",params:{missingProperty:te},message:"must have required property '"+te+"'"};i===null?i=[ge]:i.push(ge),t++}else{const ge=t;for(const ve in J)if(ve!=="byteLength"){const De={instancePath:r+"/body/"+R.replace(/~/g,"~0").replace(/\//g,"~1")+"/buffer",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/buffer/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ve},message:"must NOT have additional properties"};i===null?i=[De]:i.push(De),t++;break}if(ge===t&&J.byteLength!==void 0){let ve=J.byteLength;if(!(typeof ve=="number"&&isFinite(ve))){const De={instancePath:r+"/body/"+R.replace(/~/g,"~0").replace(/\//g,"~1")+"/buffer/byteLength",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/buffer/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[De]:i.push(De),t++}}}}else{const te={instancePath:r+"/body/"+R.replace(/~/g,"~0").replace(/\//g,"~1")+"/buffer",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/buffer/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[te]:i.push(te),t++}var $=re===t}else var $=!0;if($){if(L.byteLength!==void 0){let J=L.byteLength;const re=t;if(!(typeof J=="number"&&isFinite(J))){const te={instancePath:r+"/body/"+R.replace(/~/g,"~0").replace(/\//g,"~1")+"/byteLength",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[te]:i.push(te),t++}var $=re===t}else var $=!0;if($){if(L.byteOffset!==void 0){let J=L.byteOffset;const re=t;if(!(typeof J=="number"&&isFinite(J))){const te={instancePath:r+"/body/"+R.replace(/~/g,"~0").replace(/\//g,"~1")+"/byteOffset",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/byteOffset/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[te]:i.push(te),t++}var $=re===t}else var $=!0;if($)if(L.length!==void 0){let J=L.length;const re=t;if(!(typeof J=="number"&&isFinite(J))){const te={instancePath:r+"/body/"+R.replace(/~/g,"~0").replace(/\//g,"~1")+"/length",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/length/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[te]:i.push(te),t++}var $=re===t}else var $=!0}}}}}}else{const ee={instancePath:r+"/body/"+R.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[ee]:i.push(ee),t++}var g=G===t;if(K=K||g,!K){const ee=t;if(t===ee)if(L&&typeof L=="object"&&!Array.isArray(L)){let J;if(L.lastModified===void 0&&(J="lastModified")||L.name===void 0&&(J="name")||L.size===void 0&&(J="size")||L.type===void 0&&(J="type")||L.webkitRelativePath===void 0&&(J="webkitRelativePath")){const re={instancePath:r+"/body/"+R.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/required",keyword:"required",params:{missingProperty:J},message:"must have required property '"+J+"'"};i===null?i=[re]:i.push(re),t++}else{const re=t;for(const ne in L)if(!(ne==="size"||ne==="type"||ne==="lastModified"||ne==="name"||ne==="webkitRelativePath")){const te={instancePath:r+"/body/"+R.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ne},message:"must NOT have additional properties"};i===null?i=[te]:i.push(te),t++;break}if(re===t){if(L.size!==void 0){let ne=L.size;const te=t;if(!(typeof ne=="number"&&isFinite(ne))){const ge={instancePath:r+"/body/"+R.replace(/~/g,"~0").replace(/\//g,"~1")+"/size",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/properties/size/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[ge]:i.push(ge),t++}var E=te===t}else var E=!0;if(E){if(L.type!==void 0){const ne=t;if(typeof L.type!="string"){const ge={instancePath:r+"/body/"+R.replace(/~/g,"~0").replace(/\//g,"~1")+"/type",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[ge]:i.push(ge),t++}var E=ne===t}else var E=!0;if(E){if(L.lastModified!==void 0){let ne=L.lastModified;const te=t;if(!(typeof ne=="number"&&isFinite(ne))){const ve={instancePath:r+"/body/"+R.replace(/~/g,"~0").replace(/\//g,"~1")+"/lastModified",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/properties/lastModified/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[ve]:i.push(ve),t++}var E=te===t}else var E=!0;if(E){if(L.name!==void 0){const ne=t;if(typeof L.name!="string"){const ge={instancePath:r+"/body/"+R.replace(/~/g,"~0").replace(/\//g,"~1")+"/name",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[ge]:i.push(ge),t++}var E=ne===t}else var E=!0;if(E)if(L.webkitRelativePath!==void 0){const ne=t;if(typeof L.webkitRelativePath!="string"){const ge={instancePath:r+"/body/"+R.replace(/~/g,"~0").replace(/\//g,"~1")+"/webkitRelativePath",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/properties/webkitRelativePath/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[ge]:i.push(ge),t++}var E=ne===t}else var E=!0}}}}}}else{const J={instancePath:r+"/body/"+R.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[J]:i.push(J),t++}var g=ee===t;K=K||g}}if(K)t=z,i!==null&&(z?i.length=z:i=null);else{const G={instancePath:r+"/body/"+R.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};i===null?i=[G]:i.push(G),t++}var j=V===t;if(!j)break}else{const R={instancePath:r+"/body",schemaPath:"#/properties/body/anyOf/2/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[R]:i.push(R),t++}var c=k===t;O=O||c}}if(O)t=B,i!==null&&(B?i.length=B:i=null);else{const T={instancePath:r+"/body",schemaPath:"#/properties/body/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[T]:i.push(T),t++,We.errors=i,!1}var p=W===t}else var p=!0}}}}}else return We.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return We.errors=i,t===0}const ju={type:"object",properties:{relativeUri:{type:"string",description:"Request path following the domain:port part."},scriptPath:{type:"string",description:"Path of the .php file to execute."},protocol:{type:"string",description:"Request protocol."},method:{$ref:"#/definitions/HTTPMethod",description:"Request method. Default: `GET`."},headers:{$ref:"#/definitions/PHPRequestHeaders",description:"Request headers."},body:{anyOf:[{type:"string"},{type:"object",properties:{BYTES_PER_ELEMENT:{type:"number"},buffer:{type:"object",properties:{byteLength:{type:"number"}},required:["byteLength"],additionalProperties:!1},byteLength:{type:"number"},byteOffset:{type:"number"},length:{type:"number"}},required:["BYTES_PER_ELEMENT","buffer","byteLength","byteOffset","length"],additionalProperties:{type:"number"}}],description:"Request body."},env:{type:"object",additionalProperties:{type:"string"},description:"Environment variables to set for this run."},$_SERVER:{type:"object",additionalProperties:{type:"string"},description:"$_SERVER entries to set for this run."},code:{type:"string",description:"The code snippet to eval instead of a php file."}},additionalProperties:!1};function ke(e,{instancePath:r="",parentData:s,parentDataProperty:n,rootData:o=e}={}){let i=null,t=0;if(t===0)if(e&&typeof e=="object"&&!Array.isArray(e)){const $=t;for(const E in e)if(!Va.call(ju.properties,E))return ke.errors=[{instancePath:r,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:E},message:"must NOT have additional properties"}],!1;if($===t){if(e.relativeUri!==void 0){const E=t;if(typeof e.relativeUri!="string")return ke.errors=[{instancePath:r+"/relativeUri",schemaPath:"#/properties/relativeUri/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=E===t}else var p=!0;if(p){if(e.scriptPath!==void 0){const E=t;if(typeof e.scriptPath!="string")return ke.errors=[{instancePath:r+"/scriptPath",schemaPath:"#/properties/scriptPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=E===t}else var p=!0;if(p){if(e.protocol!==void 0){const E=t;if(typeof e.protocol!="string")return ke.errors=[{instancePath:r+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=E===t}else var p=!0;if(p){if(e.method!==void 0){let E=e.method;const j=t;if(typeof E!="string")return ke.errors=[{instancePath:r+"/method",schemaPath:"#/definitions/HTTPMethod/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(E==="GET"||E==="POST"||E==="HEAD"||E==="OPTIONS"||E==="PATCH"||E==="PUT"||E==="DELETE"))return ke.errors=[{instancePath:r+"/method",schemaPath:"#/definitions/HTTPMethod/enum",keyword:"enum",params:{allowedValues:Ya.enum},message:"must be equal to one of the allowed values"}],!1;var p=j===t}else var p=!0;if(p){if(e.headers!==void 0){let E=e.headers;const j=t;if(t===t)if(E&&typeof E=="object"&&!Array.isArray(E))for(const I in E){const W=t;if(typeof E[I]!="string")return ke.errors=[{instancePath:r+"/headers/"+I.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/PHPRequestHeaders/additionalProperties/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=W===t;if(!m)break}else return ke.errors=[{instancePath:r+"/headers",schemaPath:"#/definitions/PHPRequestHeaders/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=j===t}else var p=!0;if(p){if(e.body!==void 0){let E=e.body;const j=t,F=t;let q=!1;const I=t;if(typeof E!="string"){const B={instancePath:r+"/body",schemaPath:"#/properties/body/anyOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[B]:i.push(B),t++}var c=I===t;if(q=q||c,!q){const B=t;if(t===B)if(E&&typeof E=="object"&&!Array.isArray(E)){let N;if(E.BYTES_PER_ELEMENT===void 0&&(N="BYTES_PER_ELEMENT")||E.buffer===void 0&&(N="buffer")||E.byteLength===void 0&&(N="byteLength")||E.byteOffset===void 0&&(N="byteOffset")||E.length===void 0&&(N="length")){const C={instancePath:r+"/body",schemaPath:"#/properties/body/anyOf/1/required",keyword:"required",params:{missingProperty:N},message:"must have required property '"+N+"'"};i===null?i=[C]:i.push(C),t++}else{const C=t;for(const T in E)if(!(T==="BYTES_PER_ELEMENT"||T==="buffer"||T==="byteLength"||T==="byteOffset"||T==="length")){let S=E[T];const k=t;if(!(typeof S=="number"&&isFinite(S))){const D={instancePath:r+"/body/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/1/additionalProperties/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[D]:i.push(D),t++}var h=k===t;if(!h)break}if(C===t){if(E.BYTES_PER_ELEMENT!==void 0){let T=E.BYTES_PER_ELEMENT;const S=t;if(!(typeof T=="number"&&isFinite(T))){const k={instancePath:r+"/body/BYTES_PER_ELEMENT",schemaPath:"#/properties/body/anyOf/1/properties/BYTES_PER_ELEMENT/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[k]:i.push(k),t++}var b=S===t}else var b=!0;if(b){if(E.buffer!==void 0){let T=E.buffer;const S=t;if(t===S)if(T&&typeof T=="object"&&!Array.isArray(T)){let D;if(T.byteLength===void 0&&(D="byteLength")){const R={instancePath:r+"/body/buffer",schemaPath:"#/properties/body/anyOf/1/properties/buffer/required",keyword:"required",params:{missingProperty:D},message:"must have required property '"+D+"'"};i===null?i=[R]:i.push(R),t++}else{const R=t;for(const L in T)if(L!=="byteLength"){const V={instancePath:r+"/body/buffer",schemaPath:"#/properties/body/anyOf/1/properties/buffer/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:L},message:"must NOT have additional properties"};i===null?i=[V]:i.push(V),t++;break}if(R===t&&T.byteLength!==void 0){let L=T.byteLength;if(!(typeof L=="number"&&isFinite(L))){const V={instancePath:r+"/body/buffer/byteLength",schemaPath:"#/properties/body/anyOf/1/properties/buffer/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[V]:i.push(V),t++}}}}else{const D={instancePath:r+"/body/buffer",schemaPath:"#/properties/body/anyOf/1/properties/buffer/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[D]:i.push(D),t++}var b=S===t}else var b=!0;if(b){if(E.byteLength!==void 0){let T=E.byteLength;const S=t;if(!(typeof T=="number"&&isFinite(T))){const D={instancePath:r+"/body/byteLength",schemaPath:"#/properties/body/anyOf/1/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[D]:i.push(D),t++}var b=S===t}else var b=!0;if(b){if(E.byteOffset!==void 0){let T=E.byteOffset;const S=t;if(!(typeof T=="number"&&isFinite(T))){const D={instancePath:r+"/body/byteOffset",schemaPath:"#/properties/body/anyOf/1/properties/byteOffset/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[D]:i.push(D),t++}var b=S===t}else var b=!0;if(b)if(E.length!==void 0){let T=E.length;const S=t;if(!(typeof T=="number"&&isFinite(T))){const D={instancePath:r+"/body/length",schemaPath:"#/properties/body/anyOf/1/properties/length/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[D]:i.push(D),t++}var b=S===t}else var b=!0}}}}}}else{const N={instancePath:r+"/body",schemaPath:"#/properties/body/anyOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[N]:i.push(N),t++}var c=B===t;q=q||c}if(q)t=F,i!==null&&(F?i.length=F:i=null);else{const B={instancePath:r+"/body",schemaPath:"#/properties/body/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[B]:i.push(B),t++,ke.errors=i,!1}var p=j===t}else var p=!0;if(p){if(e.env!==void 0){let E=e.env;const j=t;if(t===j)if(E&&typeof E=="object"&&!Array.isArray(E))for(const q in E){const I=t;if(typeof E[q]!="string")return ke.errors=[{instancePath:r+"/env/"+q.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/env/additionalProperties/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var g=I===t;if(!g)break}else return ke.errors=[{instancePath:r+"/env",schemaPath:"#/properties/env/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=j===t}else var p=!0;if(p){if(e.$_SERVER!==void 0){let E=e.$_SERVER;const j=t;if(t===j)if(E&&typeof E=="object"&&!Array.isArray(E))for(const q in E){const I=t;if(typeof E[q]!="string")return ke.errors=[{instancePath:r+"/$_SERVER/"+q.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/%24_SERVER/additionalProperties/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=I===t;if(!w)break}else return ke.errors=[{instancePath:r+"/$_SERVER",schemaPath:"#/properties/%24_SERVER/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=j===t}else var p=!0;if(p)if(e.code!==void 0){const E=t;if(typeof e.code!="string")return ke.errors=[{instancePath:r+"/code",schemaPath:"#/properties/code/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=E===t}else var p=!0}}}}}}}}}else return ke.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ke.errors=i,t===0}function d(e,{instancePath:r="",parentData:s,parentDataProperty:n,rootData:o=e}={}){let i=null,t=0;if(t===0)if(e&&typeof e=="object"&&!Array.isArray(e)){let _s;if(e.step===void 0&&(_s="step"))return d.errors=[{instancePath:r,schemaPath:"#/required",keyword:"required",params:{missingProperty:_s},message:"must have required property '"+_s+"'"}],!1;{const pe=e.step;if(typeof pe=="string")if(pe==="activatePlugin"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.pluginPath===void 0&&(x="pluginPath")||e.step===void 0&&(x="step"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="pluginPath"||a==="pluginName"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/0/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/0/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var p=M===t}else var p=!0;if(p)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/0/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=y===t}else var p=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/0/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=P===t}else var m=!0;if(m){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/0/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="activatePlugin")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/0/properties/step/const",keyword:"const",params:{allowedValue:"activatePlugin"},message:"must be equal to constant"}],!1;var m=P===t}else var m=!0;if(m){if(e.pluginPath!==void 0){const a=t;if(typeof e.pluginPath!="string")return d.errors=[{instancePath:r+"/pluginPath",schemaPath:"#/oneOf/0/properties/pluginPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=a===t}else var m=!0;if(m)if(e.pluginName!==void 0){const a=t;if(typeof e.pluginName!="string")return d.errors=[{instancePath:r+"/pluginName",schemaPath:"#/oneOf/0/properties/pluginName/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=a===t}else var m=!0}}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="activateTheme"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.step===void 0&&(x="step")||e.themeFolderName===void 0&&(x="themeFolderName"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="themeFolderName"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/1/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/1/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var c=M===t}else var c=!0;if(c)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/1/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=y===t}else var c=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/1/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var h=P===t}else var h=!0;if(h){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/1/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="activateTheme")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/1/properties/step/const",keyword:"const",params:{allowedValue:"activateTheme"},message:"must be equal to constant"}],!1;var h=P===t}else var h=!0;if(h)if(e.themeFolderName!==void 0){const a=t;if(typeof e.themeFolderName!="string")return d.errors=[{instancePath:r+"/themeFolderName",schemaPath:"#/oneOf/1/properties/themeFolderName/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var h=a===t}else var h=!0}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="cp"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.fromPath===void 0&&(x="fromPath")||e.step===void 0&&(x="step")||e.toPath===void 0&&(x="toPath"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/2/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="fromPath"||a==="toPath"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/2/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/2/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/2/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var b=M===t}else var b=!0;if(b)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/2/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var b=y===t}else var b=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/2/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var g=P===t}else var g=!0;if(g){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/2/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="cp")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/2/properties/step/const",keyword:"const",params:{allowedValue:"cp"},message:"must be equal to constant"}],!1;var g=P===t}else var g=!0;if(g){if(e.fromPath!==void 0){const a=t;if(typeof e.fromPath!="string")return d.errors=[{instancePath:r+"/fromPath",schemaPath:"#/oneOf/2/properties/fromPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var g=a===t}else var g=!0;if(g)if(e.toPath!==void 0){const a=t;if(typeof e.toPath!="string")return d.errors=[{instancePath:r+"/toPath",schemaPath:"#/oneOf/2/properties/toPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var g=a===t}else var g=!0}}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/2/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="defineWpConfigConsts"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.consts===void 0&&(x="consts")||e.step===void 0&&(x="step"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/3/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="consts"||a==="method"||a==="virtualize"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/3/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/3/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/3/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var w=M===t}else var w=!0;if(w)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/3/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=y===t}else var w=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/3/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var $=P===t}else var $=!0;if($){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/3/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="defineWpConfigConsts")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/3/properties/step/const",keyword:"const",params:{allowedValue:"defineWpConfigConsts"},message:"must be equal to constant"}],!1;var $=P===t}else var $=!0;if($){if(e.consts!==void 0){let a=e.consts;const P=t;if(t===P&&!(a&&typeof a=="object"&&!Array.isArray(a)))return d.errors=[{instancePath:r+"/consts",schemaPath:"#/oneOf/3/properties/consts/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var $=P===t}else var $=!0;if($){if(e.method!==void 0){let a=e.method;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/method",schemaPath:"#/oneOf/3/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(a==="rewrite-wp-config"||a==="define-before-run"))return d.errors=[{instancePath:r+"/method",schemaPath:"#/oneOf/3/properties/method/enum",keyword:"enum",params:{allowedValues:Wt.oneOf[3].properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var $=P===t}else var $=!0;if($)if(e.virtualize!==void 0){const a=t;if(typeof e.virtualize!="boolean")return d.errors=[{instancePath:r+"/virtualize",schemaPath:"#/oneOf/3/properties/virtualize/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var $=a===t}else var $=!0}}}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/3/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="defineSiteUrl"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.siteUrl===void 0&&(x="siteUrl")||e.step===void 0&&(x="step"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/4/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="siteUrl"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/4/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/4/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/4/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var E=M===t}else var E=!0;if(E)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/4/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var E=y===t}else var E=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/4/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var j=P===t}else var j=!0;if(j){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/4/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="defineSiteUrl")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/4/properties/step/const",keyword:"const",params:{allowedValue:"defineSiteUrl"},message:"must be equal to constant"}],!1;var j=P===t}else var j=!0;if(j)if(e.siteUrl!==void 0){const a=t;if(typeof e.siteUrl!="string")return d.errors=[{instancePath:r+"/siteUrl",schemaPath:"#/oneOf/4/properties/siteUrl/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var j=a===t}else var j=!0}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/4/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="enableMultisite"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.step===void 0&&(x="step"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/5/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="wpCliPath"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/5/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/5/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/5/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var F=M===t}else var F=!0;if(F)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/5/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var F=y===t}else var F=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/5/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var q=P===t}else var q=!0;if(q){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/5/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="enableMultisite")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/5/properties/step/const",keyword:"const",params:{allowedValue:"enableMultisite"},message:"must be equal to constant"}],!1;var q=P===t}else var q=!0;if(q)if(e.wpCliPath!==void 0){const a=t;if(typeof e.wpCliPath!="string")return d.errors=[{instancePath:r+"/wpCliPath",schemaPath:"#/oneOf/5/properties/wpCliPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var q=a===t}else var q=!0}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/5/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="importWxr"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.file===void 0&&(x="file")||e.step===void 0&&(x="step"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/6/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="file"||a==="importer"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/6/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/6/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/6/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var I=M===t}else var I=!0;if(I)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/6/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var I=y===t}else var I=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/6/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var W=P===t}else var W=!0;if(W){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/6/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="importWxr")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/6/properties/step/const",keyword:"const",params:{allowedValue:"importWxr"},message:"must be equal to constant"}],!1;var W=P===t}else var W=!0;if(W){if(e.file!==void 0){const a=t;le(e.file,{instancePath:r+"/file",parentData:e,parentDataProperty:"file",rootData:o})||(i=i===null?le.errors:i.concat(le.errors),t=i.length);var W=a===t}else var W=!0;if(W)if(e.importer!==void 0){let a=e.importer;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/importer",schemaPath:"#/oneOf/6/properties/importer/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(a==="data-liberation"||a==="default"))return d.errors=[{instancePath:r+"/importer",schemaPath:"#/oneOf/6/properties/importer/enum",keyword:"enum",params:{allowedValues:Wt.oneOf[6].properties.importer.enum},message:"must be equal to one of the allowed values"}],!1;var W=P===t}else var W=!0}}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/6/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="importThemeStarterContent"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.step===void 0&&(x="step"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/7/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="themeSlug"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/7/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/7/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/7/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var B=M===t}else var B=!0;if(B)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/7/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var B=y===t}else var B=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/7/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var O=P===t}else var O=!0;if(O){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/7/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="importThemeStarterContent")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/7/properties/step/const",keyword:"const",params:{allowedValue:"importThemeStarterContent"},message:"must be equal to constant"}],!1;var O=P===t}else var O=!0;if(O)if(e.themeSlug!==void 0){const a=t;if(typeof e.themeSlug!="string")return d.errors=[{instancePath:r+"/themeSlug",schemaPath:"#/oneOf/7/properties/themeSlug/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var O=a===t}else var O=!0}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/7/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="importWordPressFiles"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.step===void 0&&(x="step")||e.wordPressFilesZip===void 0&&(x="wordPressFilesZip"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/8/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="wordPressFilesZip"||a==="pathInZip"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/8/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/8/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/8/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var N=M===t}else var N=!0;if(N)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/8/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var N=y===t}else var N=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/8/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var C=P===t}else var C=!0;if(C){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/8/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="importWordPressFiles")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/8/properties/step/const",keyword:"const",params:{allowedValue:"importWordPressFiles"},message:"must be equal to constant"}],!1;var C=P===t}else var C=!0;if(C){if(e.wordPressFilesZip!==void 0){const a=t;le(e.wordPressFilesZip,{instancePath:r+"/wordPressFilesZip",parentData:e,parentDataProperty:"wordPressFilesZip",rootData:o})||(i=i===null?le.errors:i.concat(le.errors),t=i.length);var C=a===t}else var C=!0;if(C)if(e.pathInZip!==void 0){const a=t;if(typeof e.pathInZip!="string")return d.errors=[{instancePath:r+"/pathInZip",schemaPath:"#/oneOf/8/properties/pathInZip/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var C=a===t}else var C=!0}}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/8/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="installPlugin"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.pluginData===void 0&&(x="pluginData")||e.step===void 0&&(x="step"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/9/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="ifAlreadyInstalled"||a==="step"||a==="pluginData"||a==="pluginZipFile"||a==="options"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/9/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/9/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/9/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var T=M===t}else var T=!0;if(T)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/9/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var T=y===t}else var T=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/9/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var S=P===t}else var S=!0;if(S){if(e.ifAlreadyInstalled!==void 0){let a=e.ifAlreadyInstalled;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/ifAlreadyInstalled",schemaPath:"#/oneOf/9/properties/ifAlreadyInstalled/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(a==="overwrite"||a==="skip"||a==="error"))return d.errors=[{instancePath:r+"/ifAlreadyInstalled",schemaPath:"#/oneOf/9/properties/ifAlreadyInstalled/enum",keyword:"enum",params:{allowedValues:Wt.oneOf[9].properties.ifAlreadyInstalled.enum},message:"must be equal to one of the allowed values"}],!1;var S=P===t}else var S=!0;if(S){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/9/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="installPlugin")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/9/properties/step/const",keyword:"const",params:{allowedValue:"installPlugin"},message:"must be equal to constant"}],!1;var S=P===t}else var S=!0;if(S){if(e.pluginData!==void 0){let a=e.pluginData;const P=t,U=t;let y=!1;const M=t;le(a,{instancePath:r+"/pluginData",parentData:e,parentDataProperty:"pluginData",rootData:o})||(i=i===null?le.errors:i.concat(le.errors),t=i.length);var k=M===t;if(y=y||k,!y){const Pe=t;Qe(a,{instancePath:r+"/pluginData",parentData:e,parentDataProperty:"pluginData",rootData:o})||(i=i===null?Qe.errors:i.concat(Qe.errors),t=i.length);var k=Pe===t;y=y||k}if(y)t=U,i!==null&&(U?i.length=U:i=null);else{const Pe={instancePath:r+"/pluginData",schemaPath:"#/oneOf/9/properties/pluginData/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[Pe]:i.push(Pe),t++,d.errors=i,!1}var S=P===t}else var S=!0;if(S){if(e.pluginZipFile!==void 0){const a=t;le(e.pluginZipFile,{instancePath:r+"/pluginZipFile",parentData:e,parentDataProperty:"pluginZipFile",rootData:o})||(i=i===null?le.errors:i.concat(le.errors),t=i.length);var S=a===t}else var S=!0;if(S)if(e.options!==void 0){let a=e.options;const P=t;if(t===t)if(a&&typeof a=="object"&&!Array.isArray(a)){const M=t;for(const _e in a)if(!(_e==="activate"||_e==="targetFolderName"))return d.errors=[{instancePath:r+"/options",schemaPath:"#/definitions/InstallPluginOptions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:_e},message:"must NOT have additional properties"}],!1;if(M===t){if(a.activate!==void 0){const _e=t;if(typeof a.activate!="boolean")return d.errors=[{instancePath:r+"/options/activate",schemaPath:"#/definitions/InstallPluginOptions/properties/activate/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var D=_e===t}else var D=!0;if(D)if(a.targetFolderName!==void 0){const _e=t;if(typeof a.targetFolderName!="string")return d.errors=[{instancePath:r+"/options/targetFolderName",schemaPath:"#/definitions/InstallPluginOptions/properties/targetFolderName/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var D=_e===t}else var D=!0}}else return d.errors=[{instancePath:r+"/options",schemaPath:"#/definitions/InstallPluginOptions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var S=P===t}else var S=!0}}}}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/9/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="installTheme"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.step===void 0&&(x="step")||e.themeData===void 0&&(x="themeData"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/10/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="ifAlreadyInstalled"||a==="step"||a==="themeData"||a==="themeZipFile"||a==="options"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/10/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/10/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/10/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var R=M===t}else var R=!0;if(R)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/10/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var R=y===t}else var R=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/10/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var L=P===t}else var L=!0;if(L){if(e.ifAlreadyInstalled!==void 0){let a=e.ifAlreadyInstalled;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/ifAlreadyInstalled",schemaPath:"#/oneOf/10/properties/ifAlreadyInstalled/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(a==="overwrite"||a==="skip"||a==="error"))return d.errors=[{instancePath:r+"/ifAlreadyInstalled",schemaPath:"#/oneOf/10/properties/ifAlreadyInstalled/enum",keyword:"enum",params:{allowedValues:Wt.oneOf[10].properties.ifAlreadyInstalled.enum},message:"must be equal to one of the allowed values"}],!1;var L=P===t}else var L=!0;if(L){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/10/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="installTheme")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/10/properties/step/const",keyword:"const",params:{allowedValue:"installTheme"},message:"must be equal to constant"}],!1;var L=P===t}else var L=!0;if(L){if(e.themeData!==void 0){let a=e.themeData;const P=t,U=t;let y=!1;const M=t;le(a,{instancePath:r+"/themeData",parentData:e,parentDataProperty:"themeData",rootData:o})||(i=i===null?le.errors:i.concat(le.errors),t=i.length);var V=M===t;if(y=y||V,!y){const Pe=t;Qe(a,{instancePath:r+"/themeData",parentData:e,parentDataProperty:"themeData",rootData:o})||(i=i===null?Qe.errors:i.concat(Qe.errors),t=i.length);var V=Pe===t;y=y||V}if(y)t=U,i!==null&&(U?i.length=U:i=null);else{const Pe={instancePath:r+"/themeData",schemaPath:"#/oneOf/10/properties/themeData/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[Pe]:i.push(Pe),t++,d.errors=i,!1}var L=P===t}else var L=!0;if(L){if(e.themeZipFile!==void 0){const a=t;le(e.themeZipFile,{instancePath:r+"/themeZipFile",parentData:e,parentDataProperty:"themeZipFile",rootData:o})||(i=i===null?le.errors:i.concat(le.errors),t=i.length);var L=a===t}else var L=!0;if(L)if(e.options!==void 0){let a=e.options;const P=t;if(t===t)if(a&&typeof a=="object"&&!Array.isArray(a)){const M=t;for(const _e in a)if(!(_e==="activate"||_e==="importStarterContent"||_e==="targetFolderName"))return d.errors=[{instancePath:r+"/options",schemaPath:"#/definitions/InstallThemeOptions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:_e},message:"must NOT have additional properties"}],!1;if(M===t){if(a.activate!==void 0){const _e=t;if(typeof a.activate!="boolean")return d.errors=[{instancePath:r+"/options/activate",schemaPath:"#/definitions/InstallThemeOptions/properties/activate/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var z=_e===t}else var z=!0;if(z){if(a.importStarterContent!==void 0){const _e=t;if(typeof a.importStarterContent!="boolean")return d.errors=[{instancePath:r+"/options/importStarterContent",schemaPath:"#/definitions/InstallThemeOptions/properties/importStarterContent/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var z=_e===t}else var z=!0;if(z)if(a.targetFolderName!==void 0){const _e=t;if(typeof a.targetFolderName!="string")return d.errors=[{instancePath:r+"/options/targetFolderName",schemaPath:"#/definitions/InstallThemeOptions/properties/targetFolderName/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var z=_e===t}else var z=!0}}}else return d.errors=[{instancePath:r+"/options",schemaPath:"#/definitions/InstallThemeOptions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var L=P===t}else var L=!0}}}}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/10/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="login"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.step===void 0&&(x="step"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/11/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="username"||a==="password"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/11/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/11/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/11/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var K=M===t}else var K=!0;if(K)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/11/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var K=y===t}else var K=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/11/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Y=P===t}else var Y=!0;if(Y){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/11/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="login")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/11/properties/step/const",keyword:"const",params:{allowedValue:"login"},message:"must be equal to constant"}],!1;var Y=P===t}else var Y=!0;if(Y){if(e.username!==void 0){const a=t;if(typeof e.username!="string")return d.errors=[{instancePath:r+"/username",schemaPath:"#/oneOf/11/properties/username/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Y=a===t}else var Y=!0;if(Y)if(e.password!==void 0){const a=t;if(typeof e.password!="string")return d.errors=[{instancePath:r+"/password",schemaPath:"#/oneOf/11/properties/password/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Y=a===t}else var Y=!0}}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/11/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="mkdir"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.path===void 0&&(x="path")||e.step===void 0&&(x="step"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/12/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="path"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/12/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/12/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/12/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var G=M===t}else var G=!0;if(G)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/12/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var G=y===t}else var G=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/12/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var se=P===t}else var se=!0;if(se){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/12/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="mkdir")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/12/properties/step/const",keyword:"const",params:{allowedValue:"mkdir"},message:"must be equal to constant"}],!1;var se=P===t}else var se=!0;if(se)if(e.path!==void 0){const a=t;if(typeof e.path!="string")return d.errors=[{instancePath:r+"/path",schemaPath:"#/oneOf/12/properties/path/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var se=a===t}else var se=!0}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/12/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="mv"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.fromPath===void 0&&(x="fromPath")||e.step===void 0&&(x="step")||e.toPath===void 0&&(x="toPath"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/13/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="fromPath"||a==="toPath"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/13/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/13/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/13/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var ee=M===t}else var ee=!0;if(ee)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/13/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var ee=y===t}else var ee=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/13/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var X=P===t}else var X=!0;if(X){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/13/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="mv")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/13/properties/step/const",keyword:"const",params:{allowedValue:"mv"},message:"must be equal to constant"}],!1;var X=P===t}else var X=!0;if(X){if(e.fromPath!==void 0){const a=t;if(typeof e.fromPath!="string")return d.errors=[{instancePath:r+"/fromPath",schemaPath:"#/oneOf/13/properties/fromPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var X=a===t}else var X=!0;if(X)if(e.toPath!==void 0){const a=t;if(typeof e.toPath!="string")return d.errors=[{instancePath:r+"/toPath",schemaPath:"#/oneOf/13/properties/toPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var X=a===t}else var X=!0}}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/13/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="resetData"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.step===void 0&&(x="step"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/14/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/14/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/14/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/14/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var J=M===t}else var J=!0;if(J)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/14/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var J=y===t}else var J=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/14/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var re=P===t}else var re=!0;if(re)if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/14/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="resetData")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/14/properties/step/const",keyword:"const",params:{allowedValue:"resetData"},message:"must be equal to constant"}],!1;var re=P===t}else var re=!0}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/14/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="request"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.request===void 0&&(x="request")||e.step===void 0&&(x="step"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/15/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="request"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/15/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/15/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/15/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var ne=M===t}else var ne=!0;if(ne)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/15/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var ne=y===t}else var ne=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/15/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var te=P===t}else var te=!0;if(te){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/15/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="request")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/15/properties/step/const",keyword:"const",params:{allowedValue:"request"},message:"must be equal to constant"}],!1;var te=P===t}else var te=!0;if(te)if(e.request!==void 0){const a=t;We(e.request,{instancePath:r+"/request",parentData:e,parentDataProperty:"request",rootData:o})||(i=i===null?We.errors:i.concat(We.errors),t=i.length);var te=a===t}else var te=!0}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/15/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="rm"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.path===void 0&&(x="path")||e.step===void 0&&(x="step"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/16/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="path"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/16/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/16/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/16/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var ge=M===t}else var ge=!0;if(ge)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/16/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var ge=y===t}else var ge=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/16/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var ve=P===t}else var ve=!0;if(ve){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/16/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="rm")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/16/properties/step/const",keyword:"const",params:{allowedValue:"rm"},message:"must be equal to constant"}],!1;var ve=P===t}else var ve=!0;if(ve)if(e.path!==void 0){const a=t;if(typeof e.path!="string")return d.errors=[{instancePath:r+"/path",schemaPath:"#/oneOf/16/properties/path/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var ve=a===t}else var ve=!0}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/16/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="rmdir"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.path===void 0&&(x="path")||e.step===void 0&&(x="step"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/17/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="path"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/17/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/17/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/17/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var De=M===t}else var De=!0;if(De)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/17/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var De=y===t}else var De=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/17/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var tr=P===t}else var tr=!0;if(tr){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/17/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="rmdir")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/17/properties/step/const",keyword:"const",params:{allowedValue:"rmdir"},message:"must be equal to constant"}],!1;var tr=P===t}else var tr=!0;if(tr)if(e.path!==void 0){const a=t;if(typeof e.path!="string")return d.errors=[{instancePath:r+"/path",schemaPath:"#/oneOf/17/properties/path/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var tr=a===t}else var tr=!0}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/17/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="runPHP"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.code===void 0&&(x="code")||e.step===void 0&&(x="step"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/18/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="code"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/18/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/18/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/18/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var qr=M===t}else var qr=!0;if(qr)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/18/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var qr=y===t}else var qr=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/18/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var sr=P===t}else var sr=!0;if(sr){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/18/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="runPHP")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/18/properties/step/const",keyword:"const",params:{allowedValue:"runPHP"},message:"must be equal to constant"}],!1;var sr=P===t}else var sr=!0;if(sr)if(e.code!==void 0){const a=t;if(typeof e.code!="string")return d.errors=[{instancePath:r+"/code",schemaPath:"#/oneOf/18/properties/code/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var sr=a===t}else var sr=!0}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/18/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="runPHPWithOptions"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.options===void 0&&(x="options")||e.step===void 0&&(x="step"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/19/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="options"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/19/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/19/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/19/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Je=M===t}else var Je=!0;if(Je)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/19/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Je=y===t}else var Je=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/19/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Fe=P===t}else var Fe=!0;if(Fe){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/19/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="runPHPWithOptions")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/19/properties/step/const",keyword:"const",params:{allowedValue:"runPHPWithOptions"},message:"must be equal to constant"}],!1;var Fe=P===t}else var Fe=!0;if(Fe)if(e.options!==void 0){const a=t;ke(e.options,{instancePath:r+"/options",parentData:e,parentDataProperty:"options",rootData:o})||(i=i===null?ke.errors:i.concat(ke.errors),t=i.length);var Fe=a===t}else var Fe=!0}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/19/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="runWpInstallationWizard"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.options===void 0&&(x="options")||e.step===void 0&&(x="step"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/20/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="options"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/20/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/20/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/20/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Mr=M===t}else var Mr=!0;if(Mr)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/20/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Mr=y===t}else var Mr=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/20/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var cr=P===t}else var cr=!0;if(cr){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/20/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="runWpInstallationWizard")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/20/properties/step/const",keyword:"const",params:{allowedValue:"runWpInstallationWizard"},message:"must be equal to constant"}],!1;var cr=P===t}else var cr=!0;if(cr)if(e.options!==void 0){let a=e.options;const P=t;if(t===t)if(a&&typeof a=="object"&&!Array.isArray(a)){const M=t;for(const _e in a)if(!(_e==="adminUsername"||_e==="adminPassword"))return d.errors=[{instancePath:r+"/options",schemaPath:"#/definitions/WordPressInstallationOptions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:_e},message:"must NOT have additional properties"}],!1;if(M===t){if(a.adminUsername!==void 0){const _e=t;if(typeof a.adminUsername!="string")return d.errors=[{instancePath:r+"/options/adminUsername",schemaPath:"#/definitions/WordPressInstallationOptions/properties/adminUsername/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var vr=_e===t}else var vr=!0;if(vr)if(a.adminPassword!==void 0){const _e=t;if(typeof a.adminPassword!="string")return d.errors=[{instancePath:r+"/options/adminPassword",schemaPath:"#/definitions/WordPressInstallationOptions/properties/adminPassword/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var vr=_e===t}else var vr=!0}}else return d.errors=[{instancePath:r+"/options",schemaPath:"#/definitions/WordPressInstallationOptions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var cr=P===t}else var cr=!0}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/20/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="runSql"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.sql===void 0&&(x="sql")||e.step===void 0&&(x="step"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/21/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="sql"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/21/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/21/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/21/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Kr=M===t}else var Kr=!0;if(Kr)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/21/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Kr=y===t}else var Kr=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/21/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var dr=P===t}else var dr=!0;if(dr){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/21/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="runSql")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/21/properties/step/const",keyword:"const",params:{allowedValue:"runSql"},message:"must be equal to constant"}],!1;var dr=P===t}else var dr=!0;if(dr)if(e.sql!==void 0){const a=t;le(e.sql,{instancePath:r+"/sql",parentData:e,parentDataProperty:"sql",rootData:o})||(i=i===null?le.errors:i.concat(le.errors),t=i.length);var dr=a===t}else var dr=!0}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/21/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="setSiteOptions"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.options===void 0&&(x="options")||e.step===void 0&&(x="step"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/22/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="options"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/22/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/22/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/22/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Or=M===t}else var Or=!0;if(Or)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/22/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Or=y===t}else var Or=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/22/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var qe=P===t}else var qe=!0;if(qe){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/22/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="setSiteOptions")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/22/properties/step/const",keyword:"const",params:{allowedValue:"setSiteOptions"},message:"must be equal to constant"}],!1;var qe=P===t}else var qe=!0;if(qe)if(e.options!==void 0){let a=e.options;const P=t;if(t===P&&!(a&&typeof a=="object"&&!Array.isArray(a)))return d.errors=[{instancePath:r+"/options",schemaPath:"#/oneOf/22/properties/options/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var qe=P===t}else var qe=!0}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/22/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="unzip"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.extractToPath===void 0&&(x="extractToPath")||e.step===void 0&&(x="step"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/23/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="zipFile"||a==="zipPath"||a==="extractToPath"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/23/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/23/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/23/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var $e=M===t}else var $e=!0;if($e)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/23/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var $e=y===t}else var $e=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/23/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var xe=P===t}else var xe=!0;if(xe){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/23/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="unzip")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/23/properties/step/const",keyword:"const",params:{allowedValue:"unzip"},message:"must be equal to constant"}],!1;var xe=P===t}else var xe=!0;if(xe){if(e.zipFile!==void 0){const a=t;le(e.zipFile,{instancePath:r+"/zipFile",parentData:e,parentDataProperty:"zipFile",rootData:o})||(i=i===null?le.errors:i.concat(le.errors),t=i.length);var xe=a===t}else var xe=!0;if(xe){if(e.zipPath!==void 0){const a=t;if(typeof e.zipPath!="string")return d.errors=[{instancePath:r+"/zipPath",schemaPath:"#/oneOf/23/properties/zipPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var xe=a===t}else var xe=!0;if(xe)if(e.extractToPath!==void 0){const a=t;if(typeof e.extractToPath!="string")return d.errors=[{instancePath:r+"/extractToPath",schemaPath:"#/oneOf/23/properties/extractToPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var xe=a===t}else var xe=!0}}}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/23/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="updateUserMeta"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.meta===void 0&&(x="meta")||e.step===void 0&&(x="step")||e.userId===void 0&&(x="userId"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/24/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="meta"||a==="userId"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/24/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/24/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var zr=M===t}else var zr=!0;if(zr)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/24/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var zr=y===t}else var zr=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/24/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Se=P===t}else var Se=!0;if(Se){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/24/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="updateUserMeta")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/24/properties/step/const",keyword:"const",params:{allowedValue:"updateUserMeta"},message:"must be equal to constant"}],!1;var Se=P===t}else var Se=!0;if(Se){if(e.meta!==void 0){let a=e.meta;const P=t;if(t===P&&!(a&&typeof a=="object"&&!Array.isArray(a)))return d.errors=[{instancePath:r+"/meta",schemaPath:"#/oneOf/24/properties/meta/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Se=P===t}else var Se=!0;if(Se)if(e.userId!==void 0){let a=e.userId;const P=t;if(!(typeof a=="number"&&isFinite(a)))return d.errors=[{instancePath:r+"/userId",schemaPath:"#/oneOf/24/properties/userId/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Se=P===t}else var Se=!0}}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/24/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="writeFile"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.data===void 0&&(x="data")||e.path===void 0&&(x="path")||e.step===void 0&&(x="step"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/25/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="path"||a==="data"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/25/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/25/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/25/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Gr=M===t}else var Gr=!0;if(Gr)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/25/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Gr=y===t}else var Gr=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/25/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=P===t}else var u=!0;if(u){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/25/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="writeFile")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/25/properties/step/const",keyword:"const",params:{allowedValue:"writeFile"},message:"must be equal to constant"}],!1;var u=P===t}else var u=!0;if(u){if(e.path!==void 0){const a=t;if(typeof e.path!="string")return d.errors=[{instancePath:r+"/path",schemaPath:"#/oneOf/25/properties/path/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=a===t}else var u=!0;if(u)if(e.data!==void 0){let a=e.data;const P=t,U=t;let y=!1;const M=t;le(a,{instancePath:r+"/data",parentData:e,parentDataProperty:"data",rootData:o})||(i=i===null?le.errors:i.concat(le.errors),t=i.length);var f=M===t;if(y=y||f,!y){const Pe=t;if(typeof a!="string"){const ir={instancePath:r+"/data",schemaPath:"#/oneOf/25/properties/data/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[ir]:i.push(ir),t++}var f=Pe===t;if(y=y||f,!y){const ir=t;if(t===ir)if(a&&typeof a=="object"&&!Array.isArray(a)){let Me;if(a.BYTES_PER_ELEMENT===void 0&&(Me="BYTES_PER_ELEMENT")||a.buffer===void 0&&(Me="buffer")||a.byteLength===void 0&&(Me="byteLength")||a.byteOffset===void 0&&(Me="byteOffset")||a.length===void 0&&(Me="length")){const $t={instancePath:r+"/data",schemaPath:"#/oneOf/25/properties/data/anyOf/2/required",keyword:"required",params:{missingProperty:Me},message:"must have required property '"+Me+"'"};i===null?i=[$t]:i.push($t),t++}else{const $t=t;for(const ue in a)if(!(ue==="BYTES_PER_ELEMENT"||ue==="buffer"||ue==="byteLength"||ue==="byteOffset"||ue==="length")){let je=a[ue];const It=t;if(!(typeof je=="number"&&isFinite(je))){const Te={instancePath:r+"/data/"+ue.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/oneOf/25/properties/data/anyOf/2/additionalProperties/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Te]:i.push(Te),t++}var l=It===t;if(!l)break}if($t===t){if(a.BYTES_PER_ELEMENT!==void 0){let ue=a.BYTES_PER_ELEMENT;const je=t;if(!(typeof ue=="number"&&isFinite(ue))){const It={instancePath:r+"/data/BYTES_PER_ELEMENT",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/BYTES_PER_ELEMENT/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[It]:i.push(It),t++}var _=je===t}else var _=!0;if(_){if(a.buffer!==void 0){let ue=a.buffer;const je=t;if(t===je)if(ue&&typeof ue=="object"&&!Array.isArray(ue)){let Te;if(ue.byteLength===void 0&&(Te="byteLength")){const Ht={instancePath:r+"/data/buffer",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/buffer/required",keyword:"required",params:{missingProperty:Te},message:"must have required property '"+Te+"'"};i===null?i=[Ht]:i.push(Ht),t++}else{const Ht=t;for(const ot in ue)if(ot!=="byteLength"){const pt={instancePath:r+"/data/buffer",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/buffer/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ot},message:"must NOT have additional properties"};i===null?i=[pt]:i.push(pt),t++;break}if(Ht===t&&ue.byteLength!==void 0){let ot=ue.byteLength;if(!(typeof ot=="number"&&isFinite(ot))){const pt={instancePath:r+"/data/buffer/byteLength",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/buffer/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[pt]:i.push(pt),t++}}}}else{const Te={instancePath:r+"/data/buffer",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/buffer/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[Te]:i.push(Te),t++}var _=je===t}else var _=!0;if(_){if(a.byteLength!==void 0){let ue=a.byteLength;const je=t;if(!(typeof ue=="number"&&isFinite(ue))){const Te={instancePath:r+"/data/byteLength",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Te]:i.push(Te),t++}var _=je===t}else var _=!0;if(_){if(a.byteOffset!==void 0){let ue=a.byteOffset;const je=t;if(!(typeof ue=="number"&&isFinite(ue))){const Te={instancePath:r+"/data/byteOffset",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/byteOffset/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Te]:i.push(Te),t++}var _=je===t}else var _=!0;if(_)if(a.length!==void 0){let ue=a.length;const je=t;if(!(typeof ue=="number"&&isFinite(ue))){const Te={instancePath:r+"/data/length",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/length/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Te]:i.push(Te),t++}var _=je===t}else var _=!0}}}}}}else{const Me={instancePath:r+"/data",schemaPath:"#/oneOf/25/properties/data/anyOf/2/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[Me]:i.push(Me),t++}var f=ir===t;y=y||f}}if(y)t=U,i!==null&&(U?i.length=U:i=null);else{const Pe={instancePath:r+"/data",schemaPath:"#/oneOf/25/properties/data/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[Pe]:i.push(Pe),t++,d.errors=i,!1}var u=P===t}else var u=!0}}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/25/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="writeFiles"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.filesTree===void 0&&(x="filesTree")||e.step===void 0&&(x="step")||e.writeToPath===void 0&&(x="writeToPath"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/26/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="writeToPath"||a==="filesTree"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/26/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/26/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/26/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var v=M===t}else var v=!0;if(v)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/26/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var v=y===t}else var v=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/26/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var A=P===t}else var A=!0;if(A){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/26/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="writeFiles")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/26/properties/step/const",keyword:"const",params:{allowedValue:"writeFiles"},message:"must be equal to constant"}],!1;var A=P===t}else var A=!0;if(A){if(e.writeToPath!==void 0){const a=t;if(typeof e.writeToPath!="string")return d.errors=[{instancePath:r+"/writeToPath",schemaPath:"#/oneOf/26/properties/writeToPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var A=a===t}else var A=!0;if(A)if(e.filesTree!==void 0){const a=t;Qe(e.filesTree,{instancePath:r+"/filesTree",parentData:e,parentDataProperty:"filesTree",rootData:o})||(i=i===null?Qe.errors:i.concat(Qe.errors),t=i.length);var A=a===t}else var A=!0}}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/26/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="wp-cli"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.command===void 0&&(x="command")||e.step===void 0&&(x="step"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/27/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="command"||a==="wpCliPath"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/27/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/27/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/27/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var H=M===t}else var H=!0;if(H)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/27/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var H=y===t}else var H=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/27/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Q=P===t}else var Q=!0;if(Q){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/27/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="wp-cli")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/27/properties/step/const",keyword:"const",params:{allowedValue:"wp-cli"},message:"must be equal to constant"}],!1;var Q=P===t}else var Q=!0;if(Q){if(e.command!==void 0){let a=e.command;const P=t,U=t;let y=!1;const M=t;if(typeof a!="string"){const Pe={instancePath:r+"/command",schemaPath:"#/oneOf/27/properties/command/anyOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Pe]:i.push(Pe),t++}var ye=M===t;if(y=y||ye,!y){const Pe=t;if(t===Pe)if(Array.isArray(a)){var he=!0;const ir=a.length;for(let Lt=0;Lt<ir;Lt++){const Me=t;if(typeof a[Lt]!="string"){const ue={instancePath:r+"/command/"+Lt,schemaPath:"#/oneOf/27/properties/command/anyOf/1/items/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[ue]:i.push(ue),t++}var he=Me===t;if(!he)break}}else{const ir={instancePath:r+"/command",schemaPath:"#/oneOf/27/properties/command/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[ir]:i.push(ir),t++}var ye=Pe===t;y=y||ye}if(y)t=U,i!==null&&(U?i.length=U:i=null);else{const Pe={instancePath:r+"/command",schemaPath:"#/oneOf/27/properties/command/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[Pe]:i.push(Pe),t++,d.errors=i,!1}var Q=P===t}else var Q=!0;if(Q)if(e.wpCliPath!==void 0){const a=t;if(typeof e.wpCliPath!="string")return d.errors=[{instancePath:r+"/wpCliPath",schemaPath:"#/oneOf/27/properties/wpCliPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Q=a===t}else var Q=!0}}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/27/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(pe==="setSiteLanguage"){if(t===t)if(e&&typeof e=="object"&&!Array.isArray(e)){let x;if(e.language===void 0&&(x="language")||e.step===void 0&&(x="step"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/28/required",keyword:"required",params:{missingProperty:x},message:"must have required property '"+x+"'"}],!1;{const Z=t;for(const a in e)if(!(a==="progress"||a==="step"||a==="language"))return d.errors=[{instancePath:r,schemaPath:"#/oneOf/28/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(Z===t){if(e.progress!==void 0){let a=e.progress;const P=t;if(t===P)if(a&&typeof a=="object"&&!Array.isArray(a)){const U=t;for(const y in a)if(!(y==="weight"||y==="caption"))return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/28/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(U===t){if(a.weight!==void 0){let y=a.weight;const M=t;if(!(typeof y=="number"&&isFinite(y)))return d.errors=[{instancePath:r+"/progress/weight",schemaPath:"#/oneOf/28/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var me=M===t}else var me=!0;if(me)if(a.caption!==void 0){const y=t;if(typeof a.caption!="string")return d.errors=[{instancePath:r+"/progress/caption",schemaPath:"#/oneOf/28/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var me=y===t}else var me=!0}}else return d.errors=[{instancePath:r+"/progress",schemaPath:"#/oneOf/28/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var ae=P===t}else var ae=!0;if(ae){if(e.step!==void 0){let a=e.step;const P=t;if(typeof a!="string")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/28/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(a!=="setSiteLanguage")return d.errors=[{instancePath:r+"/step",schemaPath:"#/oneOf/28/properties/step/const",keyword:"const",params:{allowedValue:"setSiteLanguage"},message:"must be equal to constant"}],!1;var ae=P===t}else var ae=!0;if(ae)if(e.language!==void 0){const a=t;if(typeof e.language!="string")return d.errors=[{instancePath:r+"/language",schemaPath:"#/oneOf/28/properties/language/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var ae=a===t}else var ae=!0}}}}else return d.errors=[{instancePath:r,schemaPath:"#/oneOf/28/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else return d.errors=[{instancePath:r,schemaPath:"#/discriminator",keyword:"discriminator",params:{error:"mapping",tag:"step",tagValue:pe},message:'value of tag "step" must be in oneOf'}],!1;else return d.errors=[{instancePath:r,schemaPath:"#/discriminator",keyword:"discriminator",params:{error:"tag",tag:"step",tagValue:pe},message:'tag "step" must be string'}],!1}}else return d.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return d.errors=i,t===0}function ie(e,{instancePath:r="",parentData:s,parentDataProperty:n,rootData:o=e}={}){let i=null,t=0;if(t===0)if(e&&typeof e=="object"&&!Array.isArray(e)){const B=t;for(const O in e)if(!Va.call(Ru.properties,O))return ie.errors=[{instancePath:r,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:O},message:"must NOT have additional properties"}],!1;if(B===t){if(e.landingPage!==void 0){const O=t;if(typeof e.landingPage!="string")return ie.errors=[{instancePath:r+"/landingPage",schemaPath:"#/properties/landingPage/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=O===t}else var p=!0;if(p){if(e.description!==void 0){const O=t;if(typeof e.description!="string")return ie.errors=[{instancePath:r+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=O===t}else var p=!0;if(p){if(e.meta!==void 0){let O=e.meta;const N=t;if(t===N)if(O&&typeof O=="object"&&!Array.isArray(O)){let T;if(O.title===void 0&&(T="title")||O.author===void 0&&(T="author"))return ie.errors=[{instancePath:r+"/meta",schemaPath:"#/properties/meta/required",keyword:"required",params:{missingProperty:T},message:"must have required property '"+T+"'"}],!1;{const S=t;for(const k in O)if(!(k==="title"||k==="description"||k==="author"||k==="categories"))return ie.errors=[{instancePath:r+"/meta",schemaPath:"#/properties/meta/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:k},message:"must NOT have additional properties"}],!1;if(S===t){if(O.title!==void 0){const k=t;if(typeof O.title!="string")return ie.errors=[{instancePath:r+"/meta/title",schemaPath:"#/properties/meta/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=k===t}else var m=!0;if(m){if(O.description!==void 0){const k=t;if(typeof O.description!="string")return ie.errors=[{instancePath:r+"/meta/description",schemaPath:"#/properties/meta/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=k===t}else var m=!0;if(m){if(O.author!==void 0){const k=t;if(typeof O.author!="string")return ie.errors=[{instancePath:r+"/meta/author",schemaPath:"#/properties/meta/properties/author/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=k===t}else var m=!0;if(m)if(O.categories!==void 0){let k=O.categories;const D=t;if(t===D)if(Array.isArray(k)){var c=!0;const L=k.length;for(let V=0;V<L;V++){const z=t;if(typeof k[V]!="string")return ie.errors=[{instancePath:r+"/meta/categories/"+V,schemaPath:"#/properties/meta/properties/categories/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=z===t;if(!c)break}}else return ie.errors=[{instancePath:r+"/meta/categories",schemaPath:"#/properties/meta/properties/categories/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var m=D===t}else var m=!0}}}}}else return ie.errors=[{instancePath:r+"/meta",schemaPath:"#/properties/meta/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=N===t}else var p=!0;if(p){if(e.preferredVersions!==void 0){let O=e.preferredVersions;const N=t;if(t===N)if(O&&typeof O=="object"&&!Array.isArray(O)){let T;if(O.php===void 0&&(T="php")||O.wp===void 0&&(T="wp"))return ie.errors=[{instancePath:r+"/preferredVersions",schemaPath:"#/properties/preferredVersions/required",keyword:"required",params:{missingProperty:T},message:"must have required property '"+T+"'"}],!1;{const S=t;for(const k in O)if(!(k==="php"||k==="wp"))return ie.errors=[{instancePath:r+"/preferredVersions",schemaPath:"#/properties/preferredVersions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:k},message:"must NOT have additional properties"}],!1;if(S===t){if(O.php!==void 0){let k=O.php;const D=t,R=t;let L=!1;const V=t;if(typeof k!="string"){const z={instancePath:r+"/preferredVersions/php",schemaPath:"#/definitions/SupportedPHPVersion/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[z]:i.push(z),t++}if(!(k==="8.3"||k==="8.2"||k==="8.1"||k==="8.0"||k==="7.4"||k==="7.3"||k==="7.2"||k==="7.1"||k==="7.0")){const z={instancePath:r+"/preferredVersions/php",schemaPath:"#/definitions/SupportedPHPVersion/enum",keyword:"enum",params:{allowedValues:Du.enum},message:"must be equal to one of the allowed values"};i===null?i=[z]:i.push(z),t++}var h=V===t;if(L=L||h,!L){const z=t;if(typeof k!="string"){const Y={instancePath:r+"/preferredVersions/php",schemaPath:"#/properties/preferredVersions/properties/php/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Y]:i.push(Y),t++}if(k!=="latest"){const Y={instancePath:r+"/preferredVersions/php",schemaPath:"#/properties/preferredVersions/properties/php/anyOf/1/const",keyword:"const",params:{allowedValue:"latest"},message:"must be equal to constant"};i===null?i=[Y]:i.push(Y),t++}var h=z===t;L=L||h}if(L)t=R,i!==null&&(R?i.length=R:i=null);else{const z={instancePath:r+"/preferredVersions/php",schemaPath:"#/properties/preferredVersions/properties/php/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[z]:i.push(z),t++,ie.errors=i,!1}var b=D===t}else var b=!0;if(b)if(O.wp!==void 0){const k=t;if(typeof O.wp!="string")return ie.errors=[{instancePath:r+"/preferredVersions/wp",schemaPath:"#/properties/preferredVersions/properties/wp/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var b=k===t}else var b=!0}}}else return ie.errors=[{instancePath:r+"/preferredVersions",schemaPath:"#/properties/preferredVersions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=N===t}else var p=!0;if(p){if(e.features!==void 0){let O=e.features;const N=t;if(t===N)if(O&&typeof O=="object"&&!Array.isArray(O)){const T=t;for(const S in O)if(S!=="networking")return ie.errors=[{instancePath:r+"/features",schemaPath:"#/properties/features/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:S},message:"must NOT have additional properties"}],!1;if(T===t&&O.networking!==void 0&&typeof O.networking!="boolean")return ie.errors=[{instancePath:r+"/features/networking",schemaPath:"#/properties/features/properties/networking/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1}else return ie.errors=[{instancePath:r+"/features",schemaPath:"#/properties/features/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=N===t}else var p=!0;if(p){if(e.extraLibraries!==void 0){let O=e.extraLibraries;const N=t;if(t===N)if(Array.isArray(O)){var g=!0;const T=O.length;for(let S=0;S<T;S++){let k=O[S];const D=t;if(typeof k!="string")return ie.errors=[{instancePath:r+"/extraLibraries/"+S,schemaPath:"#/definitions/ExtraLibrary/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(k!=="wp-cli")return ie.errors=[{instancePath:r+"/extraLibraries/"+S,schemaPath:"#/definitions/ExtraLibrary/const",keyword:"const",params:{allowedValue:"wp-cli"},message:"must be equal to constant"}],!1;var g=D===t;if(!g)break}}else return ie.errors=[{instancePath:r+"/extraLibraries",schemaPath:"#/properties/extraLibraries/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var p=N===t}else var p=!0;if(p){if(e.constants!==void 0){let O=e.constants;const N=t;if(t===t)if(O&&typeof O=="object"&&!Array.isArray(O))for(const S in O){let k=O[S];const D=t;if(typeof k!="string"&&typeof k!="boolean"&&!(typeof k=="number"&&isFinite(k)))return ie.errors=[{instancePath:r+"/constants/"+S.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/PHPConstants/additionalProperties/type",keyword:"type",params:{type:Bu.additionalProperties.type},message:"must be string,boolean,number"}],!1;var w=D===t;if(!w)break}else return ie.errors=[{instancePath:r+"/constants",schemaPath:"#/definitions/PHPConstants/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=N===t}else var p=!0;if(p){if(e.plugins!==void 0){let O=e.plugins;const N=t;if(t===N)if(Array.isArray(O)){var $=!0;const T=O.length;for(let S=0;S<T;S++){let k=O[S];const D=t,R=t;let L=!1;const V=t;if(typeof k!="string"){const K={instancePath:r+"/plugins/"+S,schemaPath:"#/properties/plugins/items/anyOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[K]:i.push(K),t++}var E=V===t;if(L=L||E,!L){const K=t;le(k,{instancePath:r+"/plugins/"+S,parentData:O,parentDataProperty:S,rootData:o})||(i=i===null?le.errors:i.concat(le.errors),t=i.length);var E=K===t;L=L||E}if(L)t=R,i!==null&&(R?i.length=R:i=null);else{const K={instancePath:r+"/plugins/"+S,schemaPath:"#/properties/plugins/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[K]:i.push(K),t++,ie.errors=i,!1}var $=D===t;if(!$)break}}else return ie.errors=[{instancePath:r+"/plugins",schemaPath:"#/properties/plugins/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var p=N===t}else var p=!0;if(p){if(e.siteOptions!==void 0){let O=e.siteOptions;const N=t;if(t===N)if(O&&typeof O=="object"&&!Array.isArray(O)){const T=t;for(const S in O)if(S!=="blogname"){const k=t;if(typeof O[S]!="string")return ie.errors=[{instancePath:r+"/siteOptions/"+S.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/siteOptions/additionalProperties/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var j=k===t;if(!j)break}if(T===t&&O.blogname!==void 0&&typeof O.blogname!="string")return ie.errors=[{instancePath:r+"/siteOptions/blogname",schemaPath:"#/properties/siteOptions/properties/blogname/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1}else return ie.errors=[{instancePath:r+"/siteOptions",schemaPath:"#/properties/siteOptions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var p=N===t}else var p=!0;if(p){if(e.login!==void 0){let O=e.login;const N=t,C=t;let T=!1;const S=t;if(typeof O!="boolean"){const D={instancePath:r+"/login",schemaPath:"#/properties/login/anyOf/0/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};i===null?i=[D]:i.push(D),t++}var F=S===t;if(T=T||F,!T){const D=t;if(t===D)if(O&&typeof O=="object"&&!Array.isArray(O)){let L;if(O.username===void 0&&(L="username")||O.password===void 0&&(L="password")){const V={instancePath:r+"/login",schemaPath:"#/properties/login/anyOf/1/required",keyword:"required",params:{missingProperty:L},message:"must have required property '"+L+"'"};i===null?i=[V]:i.push(V),t++}else{const V=t;for(const z in O)if(!(z==="username"||z==="password")){const K={instancePath:r+"/login",schemaPath:"#/properties/login/anyOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:z},message:"must NOT have additional properties"};i===null?i=[K]:i.push(K),t++;break}if(V===t){if(O.username!==void 0){const z=t;if(typeof O.username!="string"){const K={instancePath:r+"/login/username",schemaPath:"#/properties/login/anyOf/1/properties/username/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[K]:i.push(K),t++}var q=z===t}else var q=!0;if(q)if(O.password!==void 0){const z=t;if(typeof O.password!="string"){const Y={instancePath:r+"/login/password",schemaPath:"#/properties/login/anyOf/1/properties/password/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Y]:i.push(Y),t++}var q=z===t}else var q=!0}}}else{const L={instancePath:r+"/login",schemaPath:"#/properties/login/anyOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[L]:i.push(L),t++}var F=D===t;T=T||F}if(T)t=C,i!==null&&(C?i.length=C:i=null);else{const D={instancePath:r+"/login",schemaPath:"#/properties/login/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[D]:i.push(D),t++,ie.errors=i,!1}var p=N===t}else var p=!0;if(p){if(e.steps!==void 0){let O=e.steps;const N=t;if(t===N)if(Array.isArray(O)){var I=!0;const T=O.length;for(let S=0;S<T;S++){let k=O[S];const D=t,R=t;let L=!1;const V=t;d(k,{instancePath:r+"/steps/"+S,parentData:O,parentDataProperty:S,rootData:o})||(i=i===null?d.errors:i.concat(d.errors),t=i.length);var W=V===t;if(L=L||W,!L){const K=t;if(typeof k!="string"){const G={instancePath:r+"/steps/"+S,schemaPath:"#/properties/steps/items/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[G]:i.push(G),t++}var W=K===t;if(L=L||W,!L){const G=t,se={instancePath:r+"/steps/"+S,schemaPath:"#/properties/steps/items/anyOf/2/not",keyword:"not",params:{},message:"must NOT be valid"};i===null?i=[se]:i.push(se),t++;var W=G===t;if(L=L||W,!L){const X=t;if(typeof k!="boolean"){const re={instancePath:r+"/steps/"+S,schemaPath:"#/properties/steps/items/anyOf/3/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};i===null?i=[re]:i.push(re),t++}if(k!==!1){const re={instancePath:r+"/steps/"+S,schemaPath:"#/properties/steps/items/anyOf/3/const",keyword:"const",params:{allowedValue:!1},message:"must be equal to constant"};i===null?i=[re]:i.push(re),t++}var W=X===t;if(L=L||W,!L){const re=t;if(k!==null){const te={instancePath:r+"/steps/"+S,schemaPath:"#/properties/steps/items/anyOf/4/type",keyword:"type",params:{type:"null"},message:"must be null"};i===null?i=[te]:i.push(te),t++}var W=re===t;L=L||W}}}}if(L)t=R,i!==null&&(R?i.length=R:i=null);else{const K={instancePath:r+"/steps/"+S,schemaPath:"#/properties/steps/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[K]:i.push(K),t++,ie.errors=i,!1}var I=D===t;if(!I)break}}else return ie.errors=[{instancePath:r+"/steps",schemaPath:"#/properties/steps/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var p=N===t}else var p=!0;if(p)if(e.$schema!==void 0){const O=t;if(typeof e.$schema!="string")return ie.errors=[{instancePath:r+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var p=O===t}else var p=!0}}}}}}}}}}}}else return ie.errors=[{instancePath:r,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ie.errors=i,t===0}function Zt(e,{instancePath:r="",parentData:s,parentDataProperty:n,rootData:o=e}={}){let i=null,t=0;return ie(e,{instancePath:r,parentData:s,parentDataProperty:n,rootData:o})||(i=i===null?ie.errors:i.concat(ie.errors),t=i.length),Zt.errors=i,t===0}const{wpCLI:Nu,...wn}=Yo,Wu={...wn,"wp-cli":Nu,importFile:wn.importWxr};function Uu(e,{progress:r=new fs,semaphore:s=new Tn({concurrency:3}),onStepCompleted:n=()=>{},corsProxy:o}={}){e=structuredClone(e),e={...e,steps:(e.steps||[]).filter(Ku).filter(zu)};for(const g of e.steps)!g||typeof g!="object"||(g.step==="importFile"?(g.step="importWxr",Oe.warn('The "importFile" step is deprecated. Use "importWxr" instead.')):g?.step==="installPlugin"&&"pluginZipFile"in g?(g.pluginData=g.pluginZipFile,Oe.warn('The "pluginZipFile" option of the "installPlugin" step is deprecated. Use "pluginData" instead.')):g?.step==="installTheme"&&"themeZipFile"in g&&(g.themeData=g.themeZipFile,Oe.warn('The "themeZipFile" option of the "installTheme" step is deprecated. Use "themeData" instead.')));if(e.constants&&e.steps.unshift({step:"defineWpConfigConsts",consts:e.constants}),e.siteOptions&&e.steps.unshift({step:"setSiteOptions",options:e.siteOptions}),e.plugins){const g=e.plugins.map(w=>typeof w=="string"?w.startsWith("https://")?{resource:"url",url:w}:{resource:"wordpress.org/plugins",slug:w}:w).map(w=>({step:"installPlugin",pluginData:w}));e.steps.unshift(...g)}e.login&&e.steps.push({step:"login",...e.login===!0?{username:"admin"}:e.login});const i=e.steps?.findIndex(g=>typeof g=="object"&&g?.step&&["wp-cli","enableMultisite"].includes(g.step))??-1;if(e?.extraLibraries?.includes("wp-cli")||i!==-1){const g={step:"writeFile",data:bo,path:ii};i===-1?e.steps?.push(g):e.steps?.splice(i,0,g)}const t=e.steps?.findIndex(g=>typeof g=="object"&&g?.step==="importWxr");t!==void 0&&t>-1&&(e.steps[t].importer==="data-liberation"?e.steps?.splice(t,0,{step:"writeFile",path:"/internal/shared/data-liberation-core.phar",data:{resource:"url",url:Hu,caption:"Downloading the Data Liberation WXR importer"}}):e.steps?.splice(t,0,{step:"installPlugin",pluginData:{resource:"url",url:"https://playground.wordpress.net/wordpress-importer.zip",caption:"Downloading the WordPress Importer plugin"}}));const{valid:p,errors:m}=qu(e);if(!p){const g=new Error(`Invalid blueprint: ${m[0].message} at ${m[0].instancePath}`);throw g.errors=m,g}const c=e.steps||[],h=c.reduce((g,w)=>g+(w.progress?.weight||1),0),b=c.map(g=>Gu(g,{semaphore:s,rootProgressTracker:r,totalProgressWeight:h,corsProxy:o}));return{versions:{php:Mu(e.preferredVersions?.php,ni,Lo),wp:e.preferredVersions?.wp||"latest"},features:{networking:e.features?.networking??!1},extraLibraries:e.extraLibraries||[],run:async g=>{try{for(const{resources:w}of b)for(const $ of w)$.setPlayground(g),$.isAsync&&$.resolve();for(const[w,{run:$,step:E}]of Object.entries(b))try{const j=await $(g);n(j,E)}catch(j){throw Oe.error(j),new Error(`Error when executing the blueprint step #${w} (${JSON.stringify(E)}) ${j instanceof Error?`: ${j.message}`:j}`,{cause:j})}}finally{try{await g.goTo(e.landingPage||"/")}catch{}r.finish()}}}}function qu(e){const r=Zt(e);if(r)return{valid:r};const s=new Set;for(const o of Zt.errors)o.schemaPath.startsWith("#/properties/steps/items/anyOf")||s.add(o.instancePath);const n=Zt.errors?.filter(o=>!(o.schemaPath.startsWith("#/properties/steps/items/anyOf")&&s.has(o.instancePath)));return{valid:r,errors:n}}function Mu(e,r,s){return e&&r.includes(e)?e:s}function Ku(e){return!!(typeof e=="object"&&e)}function zu(e){return["setPhpIniEntry","request"].includes(e.step)?(Oe.warn(`The "${e.step}" Blueprint is no longer supported and you can remove it from your Blueprint.`),!1):!0}function Gu(e,{semaphore:r,rootProgressTracker:s,totalProgressWeight:n,corsProxy:o}){const i=s.stage((e.progress?.weight||1)/n),t={};for(const b of Object.keys(e)){let g=e[b];Pu(g)&&(g=br.create(g,{semaphore:r,corsProxy:o})),t[b]=g}const p=async b=>{try{return i.fillSlowly(),await Wu[e.step](b,await Zu(t),{tracker:i,initialCaption:e.progress?.caption})}finally{i.finish()}},m=bn(t),c=bn(t).filter(b=>b.isAsync),h=1/(c.length+1);for(const b of c)b.progress=i.stage(h);return{run:p,step:e,resources:m}}function bn(e){const r=[];for(const s in e){const n=e[s];n instanceof br&&r.push(n)}return r}async function Zu(e){const r={};for(const s in e){const n=e[s];n instanceof br?r[s]=await n.resolve():r[s]=n}return r}async function Vu(e,r){await e.run(r)}async function nc({iframe:e,blueprint:r,remoteUrl:s,progressTracker:n=new fs,disableProgressBar:o,onBlueprintStepCompleted:i,onClientConnected:t=()=>{},sapiName:p,onBeforeBlueprint:m,mounts:c,scope:h,corsProxy:b,shouldInstallWordPress:g}){Xu(s),Yu(e),s=Ju(s,{progressbar:!o}),n.setCaption("Preparing WordPress"),r||(r={});const w=Uu(r,{progress:n.stage(.5),onStepCompleted:i,corsProxy:b});await new Promise(j=>{e.src=s,e.addEventListener("load",j,!1)});const $=ou(e.contentWindow,e.ownerDocument.defaultView);await $.isConnected(),n.pipe($);const E=n.stage();return await $.onDownloadProgress(E.loadingListener),await $.boot({mounts:c,sapiName:p,scope:h??Math.random().toFixed(16),shouldInstallWordPress:g,phpVersion:w.versions.php,wpVersion:w.versions.wp,withNetworking:w.features.networking,corsProxyUrl:b}),await $.isReady(),E.finish(),ro(Oe,$),t($),m&&await m(),await Vu(w,$),n.finish(),$}function Yu(e){e.sandbox?.length&&!e.sandbox?.contains("allow-storage-access-by-user-activation")&&e.sandbox.add("allow-storage-access-by-user-activation")}const Vt="https://playground.wordpress.net";function Xu(e){const r=new URL(e,Vt);if((r.origin===Vt||r.hostname==="localhost")&&r.pathname!=="/remote.html")throw new Error(`Invalid remote URL: ${r}. Expected origin to be ${Vt}/remote.html.`)}function Ju(e,r){const s=new URL(e,Vt),n=new URLSearchParams(s.search);for(const[o,i]of Object.entries(r))if(i!=null&&i!==!1)if(Array.isArray(i))for(const t of i)n.append(o,t.toString());else n.set(o,i.toString());return s.search=n.toString(),s.toString()}export{Tn as S,ec as a,Uu as b,Qu as c,Xa as d,sc as e,os as f,ri as g,En as h,Sn as i,de as j,_t as k,Oe as l,Wo as m,is as n,tc as o,Bo as p,rc as q,Re as r,nc as s,ns as t,Pn as w,Mo as z};
//# sourceMappingURL=index-091168b2.js.map
